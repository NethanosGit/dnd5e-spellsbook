{"version":3,"file":"js/app.1c5c8950.js","mappings":"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","sources":["webpack://dnd5e-spellsbook/./src/App.vue","webpack://dnd5e-spellsbook/./src/components/general/Navbar.vue","webpack://dnd5e-spellsbook/src/components/general/Navbar.vue","webpack://dnd5e-spellsbook/./src/components/general/Navbar.vue?68dd","webpack://dnd5e-spellsbook/./src/components/general/Navbar.vue?b711","webpack://dnd5e-spellsbook/./src/components/spells/SpellsPage.vue","webpack://dnd5e-spellsbook/./src/components/spells/SpellList.vue","webpack://dnd5e-spellsbook/./src/util/icons.js","webpack://dnd5e-spellsbook/./src/util/constants.js","webpack://dnd5e-spellsbook/src/components/spells/SpellList.vue","webpack://dnd5e-spellsbook/./src/components/spells/SpellList.vue?77b5","webpack://dnd5e-spellsbook/./src/components/spells/SpellList.vue?7a14","webpack://dnd5e-spellsbook/./src/components/spells/SpellsToolbar.vue","webpack://dnd5e-spellsbook/./src/components/general/CustomSelect.vue","webpack://dnd5e-spellsbook/src/components/general/CustomSelect.vue","webpack://dnd5e-spellsbook/./src/components/general/CustomSelect.vue?e246","webpack://dnd5e-spellsbook/./src/components/general/CustomSelect.vue?2735","webpack://dnd5e-spellsbook/./src/components/spells/SpellEditionControls.vue","webpack://dnd5e-spellsbook/src/components/spells/SpellEditionControls.vue","webpack://dnd5e-spellsbook/./src/components/spells/SpellEditionControls.vue?dd4b","webpack://dnd5e-spellsbook/./src/components/spells/SpellEditionControls.vue?0875","webpack://dnd5e-spellsbook/./src/util/spellOptions.js","webpack://dnd5e-spellsbook/src/components/spells/SpellsToolbar.vue","webpack://dnd5e-spellsbook/./src/components/spells/SpellsToolbar.vue?9e7d","webpack://dnd5e-spellsbook/./src/components/spells/SpellsToolbar.vue?ec56","webpack://dnd5e-spellsbook/./src/components/spells/SpellView.vue","webpack://dnd5e-spellsbook/./src/components/spells/HelpModal.vue","webpack://dnd5e-spellsbook/src/components/spells/HelpModal.vue","webpack://dnd5e-spellsbook/./src/components/spells/HelpModal.vue?1cdf","webpack://dnd5e-spellsbook/./src/components/spells/HelpModal.vue?9b4b","webpack://dnd5e-spellsbook/./src/components/spells/Diagram.vue","webpack://dnd5e-spellsbook/./src/util/geometry.js","webpack://dnd5e-spellsbook/src/components/spells/Diagram.vue","webpack://dnd5e-spellsbook/./src/components/spells/Diagram.vue?a237","webpack://dnd5e-spellsbook/./src/components/spells/Diagram.vue?10a1","webpack://dnd5e-spellsbook/./src/util/textBeautifier.js","webpack://dnd5e-spellsbook/src/components/spells/SpellView.vue","webpack://dnd5e-spellsbook/./src/components/spells/SpellView.vue?09b9","webpack://dnd5e-spellsbook/./src/components/spells/SpellView.vue?5067","webpack://dnd5e-spellsbook/./src/components/spells/SpellEditor.vue","webpack://dnd5e-spellsbook/./src/components/general/Toggler.vue","webpack://dnd5e-spellsbook/src/components/general/Toggler.vue","webpack://dnd5e-spellsbook/./src/components/general/Toggler.vue?8d49","webpack://dnd5e-spellsbook/./src/components/general/Toggler.vue?871d","webpack://dnd5e-spellsbook/src/components/spells/SpellEditor.vue","webpack://dnd5e-spellsbook/./src/components/spells/SpellEditor.vue?b5e1","webpack://dnd5e-spellsbook/./src/components/spells/SpellEditor.vue?0f68","webpack://dnd5e-spellsbook/src/components/spells/SpellsPage.vue","webpack://dnd5e-spellsbook/./src/components/spells/SpellsPage.vue?55b1","webpack://dnd5e-spellsbook/./src/components/spells/SpellsPage.vue?041b","webpack://dnd5e-spellsbook/./src/components/general/StatsPage.vue","webpack://dnd5e-spellsbook/src/components/general/StatsPage.vue","webpack://dnd5e-spellsbook/./src/components/general/StatsPage.vue?e1d5","webpack://dnd5e-spellsbook/./src/components/general/StatsPage.vue?c2ff","webpack://dnd5e-spellsbook/./src/components/general/SettingsPage.vue","webpack://dnd5e-spellsbook/src/components/general/SettingsPage.vue","webpack://dnd5e-spellsbook/./src/components/general/SettingsPage.vue?6fd9","webpack://dnd5e-spellsbook/./src/components/general/SettingsPage.vue?ac87","webpack://dnd5e-spellsbook/./src/components/general/OGLPage.vue","webpack://dnd5e-spellsbook/src/components/general/OGLPage.vue","webpack://dnd5e-spellsbook/./src/components/general/OGLPage.vue?7a7d","webpack://dnd5e-spellsbook/./src/components/general/OGLPage.vue?600c","webpack://dnd5e-spellsbook/./src/components/general/TipsPage.vue","webpack://dnd5e-spellsbook/src/components/general/TipsPage.vue","webpack://dnd5e-spellsbook/./src/components/general/TipsPage.vue?059e","webpack://dnd5e-spellsbook/./src/components/general/TipsPage.vue?6603","webpack://dnd5e-spellsbook/./src/components/general/AreasPage.vue","webpack://dnd5e-spellsbook/src/components/general/AreasPage.vue","webpack://dnd5e-spellsbook/./src/components/general/AreasPage.vue?e29f","webpack://dnd5e-spellsbook/./src/components/general/AreasPage.vue?76d0","webpack://dnd5e-spellsbook/./src/components/general/AboutPage.vue","webpack://dnd5e-spellsbook/src/components/general/AboutPage.vue","webpack://dnd5e-spellsbook/./src/components/general/AboutPage.vue?04a0","webpack://dnd5e-spellsbook/./src/components/general/AboutPage.vue?fcac","webpack://dnd5e-spellsbook/./src/components/general/NewsPage.vue","webpack://dnd5e-spellsbook/src/components/general/NewsPage.vue","webpack://dnd5e-spellsbook/./src/components/general/NewsPage.vue?0bdb","webpack://dnd5e-spellsbook/./src/components/general/NewsPage.vue?e8f0","webpack://dnd5e-spellsbook/./src/components/general/UpdatesPage.vue","webpack://dnd5e-spellsbook/src/components/general/UpdatesPage.vue","webpack://dnd5e-spellsbook/./src/components/general/UpdatesPage.vue?1403","webpack://dnd5e-spellsbook/./src/components/general/UpdatesPage.vue?5236","webpack://dnd5e-spellsbook/./src/components/general/ContentPage.vue","webpack://dnd5e-spellsbook/src/components/general/ContentPage.vue","webpack://dnd5e-spellsbook/./src/components/general/ContentPage.vue?917e","webpack://dnd5e-spellsbook/./src/components/general/ContentPage.vue?0342","webpack://dnd5e-spellsbook/./src/components/rules/RulesPage.vue","webpack://dnd5e-spellsbook/./src/components/rules/RuleList.vue","webpack://dnd5e-spellsbook/src/components/rules/RuleList.vue","webpack://dnd5e-spellsbook/./src/components/rules/RuleList.vue?8ff4","webpack://dnd5e-spellsbook/./src/components/rules/RuleList.vue?8d48","webpack://dnd5e-spellsbook/./src/components/rules/RuleSearcher.vue","webpack://dnd5e-spellsbook/src/components/rules/RuleSearcher.vue","webpack://dnd5e-spellsbook/./src/components/rules/RuleSearcher.vue?28a8","webpack://dnd5e-spellsbook/./src/components/rules/RuleSearcher.vue?7783","webpack://dnd5e-spellsbook/./src/components/rules/RuleView.vue","webpack://dnd5e-spellsbook/src/components/rules/RuleView.vue","webpack://dnd5e-spellsbook/./src/components/rules/RuleView.vue?ad06","webpack://dnd5e-spellsbook/./src/components/rules/RuleView.vue?a100","webpack://dnd5e-spellsbook/src/components/rules/RulesPage.vue","webpack://dnd5e-spellsbook/./src/components/rules/RulesPage.vue?ea10","webpack://dnd5e-spellsbook/./src/components/rules/RulesPage.vue?d85d","webpack://dnd5e-spellsbook/./src/components/general/NotFound.vue","webpack://dnd5e-spellsbook/src/components/general/NotFound.vue","webpack://dnd5e-spellsbook/./src/components/general/NotFound.vue?cb2a","webpack://dnd5e-spellsbook/./src/components/general/NotFound.vue?3f5a","webpack://dnd5e-spellsbook/./src/components/general/Alert.vue","webpack://dnd5e-spellsbook/src/components/general/Alert.vue","webpack://dnd5e-spellsbook/./src/components/general/Alert.vue?7136","webpack://dnd5e-spellsbook/./src/components/general/Alert.vue?0721","webpack://dnd5e-spellsbook/./src/components/general/UpdateNotice.vue","webpack://dnd5e-spellsbook/./src/components/general/UpdateNotice.vue?b702","webpack://dnd5e-spellsbook/./src/util/contentDatabaseValidator.js","webpack://dnd5e-spellsbook/./src/util/contentDatabase.js","webpack://dnd5e-spellsbook/./src/util/settingsDatabase.js","webpack://dnd5e-spellsbook/src/App.vue","webpack://dnd5e-spellsbook/./src/App.vue?51dd","webpack://dnd5e-spellsbook/./src/App.vue?0e40","webpack://dnd5e-spellsbook/./src/main.js","webpack://dnd5e-spellsbook/./src/assets/images/icons/classes/ sync ^\\.\\/.*\\.png$","webpack://dnd5e-spellsbook/./src/assets/images/icons/components/ sync ^\\.\\/.*\\.png$","webpack://dnd5e-spellsbook/./src/assets/images/icons/ctimes/ sync ^\\.\\/.*\\.png$","webpack://dnd5e-spellsbook/./src/assets/images/icons/durations/ sync ^\\.\\/.*\\.png$","webpack://dnd5e-spellsbook/./src/assets/images/icons/ranges/ sync ^\\.\\/.*\\.png$","webpack://dnd5e-spellsbook/./src/assets/images/icons/rules/ sync ^\\.\\/.*\\.png$","webpack://dnd5e-spellsbook/./src/assets/images/icons/schools/ sync ^\\.\\/.*\\.png$","webpack://dnd5e-spellsbook/webpack/bootstrap","webpack://dnd5e-spellsbook/webpack/runtime/chunk loaded","webpack://dnd5e-spellsbook/webpack/runtime/compat get default export","webpack://dnd5e-spellsbook/webpack/runtime/define property getters","webpack://dnd5e-spellsbook/webpack/runtime/global","webpack://dnd5e-spellsbook/webpack/runtime/hasOwnProperty shorthand","webpack://dnd5e-spellsbook/webpack/runtime/make namespace object","webpack://dnd5e-spellsbook/webpack/runtime/publicPath","webpack://dnd5e-spellsbook/webpack/runtime/jsonp chunk loading","webpack://dnd5e-spellsbook/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mt-0\",attrs:{\"id\":\"app\"}},[_c('Navbar',{attrs:{\"enabled\":!_vm.awaitingInitialFetch}}),_c('main',{staticClass:\"container-fluid\"},[(_vm.awaitingInitialFetch)?_c('div',{staticClass:\"text-center\"},[_c('svg',{attrs:{\"id\":\"loadingIcon\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 100 100\"}},[_c('g',{attrs:{\"fill\":\"none\",\"stroke\":\"#393939\",\"stroke-width\":\"5\",\"stroke-linecap\":\"square\",\"stroke-linejoin\":\"bevel\"}},[_c('path',{attrs:{\"d\":\"M92 50a42 42 0 01-41 42M8 50A42 42 0 0149 8M30 70a28 28 0 0039 0m1-40a28 28 0 00-39 0M35 50a15 15 0 0015 15m15-15a15 15 0 00-15-15M19 81l11-11M70 30l11-11M19 50h16M65 50h16\"}})])])]):_c('router-view',{attrs:{\"app\":_vm.app}})],1),_c('Alert',{ref:\"alert\"}),(_vm.app.appUpdateAvailable && this.$route.path != '/updates')?_c('UpdateNotice'):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('header',[_c('b-navbar',{attrs:{\"toggleable\":\"sm\",\"type\":\"dark\",\"variant\":\"primary\"}},[_c('b-navbar-brand',{attrs:{\"href\":\"#\"}},[_c('router-link',{attrs:{\"to\":\"/\"}},[_c('img',{staticStyle:{\"width\":\"32px\"},attrs:{\"src\":require(\"@/assets/images/logo/logo64.png\"),\"alt\":\"\"}}),_vm._v(\" DND5e Tome \")])],1),(_vm.enabled)?[_c('b-navbar-toggle',{attrs:{\"target\":\"nav-collapse\"}}),_c('b-collapse',{attrs:{\"id\":\"nav-collapse\",\"is-nav\":\"\"}},[_c('b-navbar-nav',[_c('b-nav-item',{attrs:{\"to\":\"/\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/spells.png\"),\"alt\":\"\"}}),_vm._v(\" Spells\")]),_c('b-nav-item',{attrs:{\"to\":\"/rules\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/rules.png\"),\"alt\":\"\"}}),_vm._v(\" Rules\")]),_c('b-nav-item-dropdown',{attrs:{\"html\":`<img src='${require('@/assets/images/icons/menu/settings.png')}' alt=''/> More`}},[_c('b-dropdown-item',{attrs:{\"to\":\"/content\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/content.png\"),\"alt\":\"\"}}),_vm._v(\" Content\")]),_c('b-dropdown-item',{attrs:{\"to\":\"/stats\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/stats.png\"),\"alt\":\"\"}}),_vm._v(\" Stats\")]),_c('b-dropdown-item',{attrs:{\"to\":\"/areas\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/areas.png\"),\"alt\":\"\"}}),_vm._v(\" Areas\")]),_c('b-dropdown-item',{attrs:{\"to\":\"/tips\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/tips.png\"),\"alt\":\"\"}}),_vm._v(\" Tips\")]),_c('b-dropdown-item',{attrs:{\"to\":\"/news\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/news.png\"),\"alt\":\"\"}}),_vm._v(\" News\")]),_c('b-dropdown-item',{attrs:{\"to\":\"/settings\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/settings.png\"),\"alt\":\"\"}}),_vm._v(\" Settings\")]),_c('b-dropdown-item',{attrs:{\"to\":\"/ogl\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/ogl.png\"),\"alt\":\"\"}}),_vm._v(\" OGL\")]),_c('b-dropdown-item',{attrs:{\"to\":\"/about\"}},[_c('img',{staticStyle:{\"filter\":\"contrast(0) brightness(1.4)\"},attrs:{\"src\":require(\"@/assets/images/logo/logo64.png\"),\"alt\":\"\"}}),_vm._v(\" About\")])],1)],1)],1)]:_vm._e()],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <header>\r\n    <b-navbar toggleable=\"sm\" type=\"dark\" variant=\"primary\">\r\n      <b-navbar-brand href=\"#\">\r\n        <router-link to=\"/\">\r\n          <img\r\n            src=\"@/assets/images/logo/logo64.png\"\r\n            alt=\"\"\r\n            style=\"width: 32px\"\r\n          />\r\n          DND5e Tome\r\n        </router-link>\r\n      </b-navbar-brand>\r\n      <template v-if=\"enabled\">\r\n        <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\r\n        <b-collapse id=\"nav-collapse\" is-nav>\r\n          <b-navbar-nav>\r\n            <b-nav-item to=\"/\"\r\n              ><img src=\"@/assets/images/icons/menu/spells.png\" alt=\"\" />\r\n              Spells</b-nav-item\r\n            >\r\n            <b-nav-item to=\"/rules\"\r\n              ><img src=\"@/assets/images/icons/menu/rules.png\" alt=\"\" />\r\n              Rules</b-nav-item\r\n            >\r\n            <b-nav-item-dropdown\r\n              :html=\"`<img src='${require('@/assets/images/icons/menu/settings.png')}' alt=''/> More`\"\r\n            >\r\n              <b-dropdown-item to=\"/content\"\r\n                ><img src=\"@/assets/images/icons/menu/content.png\" alt=\"\" />\r\n                Content</b-dropdown-item\r\n              >\r\n              <b-dropdown-item to=\"/stats\"\r\n                ><img src=\"@/assets/images/icons/menu/stats.png\" alt=\"\" />\r\n                Stats</b-dropdown-item\r\n              >\r\n              <b-dropdown-item to=\"/areas\"\r\n                ><img src=\"@/assets/images/icons/menu/areas.png\" alt=\"\" />\r\n                Areas</b-dropdown-item\r\n              >\r\n              <b-dropdown-item to=\"/tips\"\r\n                ><img src=\"@/assets/images/icons/menu/tips.png\" alt=\"\" />\r\n                Tips</b-dropdown-item\r\n              >\r\n              <b-dropdown-item to=\"/news\"\r\n                ><img src=\"@/assets/images/icons/menu/news.png\" alt=\"\" />\r\n                News</b-dropdown-item\r\n              >\r\n              <b-dropdown-item to=\"/settings\"\r\n                ><img src=\"@/assets/images/icons/menu/settings.png\" alt=\"\" />\r\n                Settings</b-dropdown-item\r\n              >\r\n              <b-dropdown-item to=\"/ogl\"\r\n                ><img src=\"@/assets/images/icons/menu/ogl.png\" alt=\"\" />\r\n                OGL</b-dropdown-item\r\n              >\r\n              <b-dropdown-item to=\"/about\"\r\n                ><img\r\n                  src=\"@/assets/images/logo/logo64.png\"\r\n                  style=\"filter: contrast(0) brightness(1.4)\"\r\n                  alt=\"\"\r\n                />\r\n                About</b-dropdown-item\r\n              >\r\n            </b-nav-item-dropdown>\r\n          </b-navbar-nav>\r\n        </b-collapse>\r\n      </template>\r\n    </b-navbar>\r\n  </header>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"Navbar\",\r\n  props: {\r\n    enabled: Boolean,\r\n  },\r\n};\r\n</script>\r\n<style>\r\nnav {\r\n  min-height: 42px;\r\n}\r\nnav.bg-primary {\r\n  background-color: #292929 !important;\r\n}\r\n.navbar-expand-sm {\r\n  padding: 0px 10px !important;\r\n  box-shadow: 0px 0px 3px #d8d8d8;\r\n  margin-bottom: 4px;\r\n  /* font-family: 'Marcellus SC', 'Ubuntu', sans-serif; */\r\n}\r\n.navbar-toggler {\r\n  border: 0 !important;\r\n}\r\n.navbar-brand img {\r\n  filter: contrast(0) brightness(0.8);\r\n  transition: filter 0.4s, transform 0.4s;\r\n}\r\n.navbar-brand {\r\n  padding: 0 !important;\r\n}\r\n.navbar-brand > a {\r\n  color: #7b7b7b !important;\r\n  transition: color 0.4s;\r\n  padding: 10px 20px 10px 0px; /* Make link easier to click on mobile */\r\n}\r\n@media (pointer: fine) {\r\n  .navbar-brand:hover a {\r\n    color: #eee !important;\r\n  }\r\n  .navbar-brand:hover img {\r\n    transform: scale(1.12);\r\n    filter: contrast(1) brightness(1);\r\n  }\r\n}\r\n.nav-link img {\r\n  height: 26px;\r\n  transition: filter 0.4s;\r\n}\r\n.nav-link:hover img,\r\n.nav-item.show img {\r\n  filter: brightness(1.6);\r\n}\r\n.dropdown-menu {\r\n  background-color: #2c2c2c !important;\r\n}\r\n.dropdown-item {\r\n  color: #ddd !important;\r\n  background-color: #2c2c2c !important;\r\n}\r\n.dropdown-item:hover,\r\n.dropdown-item:focus,\r\n.dropdown-item:active {\r\n  background-color: #2f2f2f !important;\r\n}\r\n.dropdown-item img {\r\n  height: 20px;\r\n  margin-right: 4px;\r\n}\r\n/* Increase spacing between menus */\r\n.nav-link {\r\n  padding: 0.5rem 20px !important;\r\n  transition: background-color 0.2s, color 0.2s;\r\n}\r\n/* Make the hamburger toggle a bit bigger in mobile */\r\n@media (max-width: 767px) {\r\n  .navbar-toggler-icon {\r\n    width: 1.8em !important;\r\n    height: 1.8em !important;\r\n  }\r\n}\r\n.nav-link:hover {\r\n  background-color: #2f2e2e;\r\n}\r\n.navbar a {\r\n  outline: 0;\r\n}\r\n/* Hide the triangle icon on dropdown menus */\r\n.dropdown-toggle::after {\r\n  display: none !important;\r\n}\r\n/* Add separator lines between dropdown menu items */\r\n.dropdown-menu > li:not(:first-child) {\r\n  border-top: 1px solid #232323;\r\n}\r\n.dropdown-item {\r\n  padding: 0.5rem 1.5rem;\r\n}\r\n.dropdown-menu {\r\n  padding: 0;\r\n}\r\n.new-tag {\r\n  font-size: 50%;\r\n  background-color: #3d5368;\r\n  padding: 1px 3px;\r\n  border-radius: 6px;\r\n  font-weight: bold;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Navbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Navbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Navbar.vue?vue&type=template&id=36fc9132&\"\nimport script from \"./Navbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Navbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Navbar.vue?vue&type=style&index=0&id=36fc9132&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('SpellsToolbar',{class:_vm.panelIsOpen ? 'd-none d-md-flex' : '',attrs:{\"app\":_vm.app,\"query\":_vm.query,\"selectedSpell\":_vm.selectedSpell,\"detailedModeOn\":_vm.detailedModeOn},on:{\"toggle-detailed-view\":_vm.toggleDetailedView,\"navigate-spells\":_vm.navigateSpells,\"select-spell\":(s) => {\n        _vm.selectedSpell = s;\n      }}}),_c('div',{staticClass:\"row\"},[_c('div',{class:_vm.detailedModeOn\n          ? _vm.panelIsOpen\n            ? 'd-none'\n            : 'd-block col-12'\n          : _vm.panelIsOpen\n          ? 'col-md-6 col-lg-4 col-xl-3 d-none d-md-block'\n          : 'col-12'},[(_vm.queryPresent)?_c('SpellList',{attrs:{\"app\":_vm.app,\"spells\":_vm.filteredSpells,\"panelIsOpen\":_vm.panelIsOpen,\"selectedSpell\":_vm.selectedSpell,\"detailedModeOn\":_vm.detailedModeOn},on:{\"spell-clicked\":_vm.openSpell}}):_c('div',{staticClass:\"list-message\"},[_vm._v(\"Type anything to search\")])],1),(_vm.selectedSpell)?[(_vm.app.editionModeOn)?_c('SpellEditor',{class:`${\n          _vm.detailedModeOn ? 'col-12' : 'col-md-6 col-lg-8 col-xl-9'\n        } scrollable-panel`,attrs:{\"app\":_vm.app,\"spell\":_vm.selectedSpell}}):_c('SpellView',{class:`${\n          _vm.detailedModeOn ? 'col-12' : 'col-md-6 col-lg-8 col-xl-9'\n        } scrollable-panel`,attrs:{\"app\":_vm.app,\"spell\":_vm.selectedSpell},on:{\"clear-spell\":_vm.clearSpell}})]:_vm._e()],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.spells.length > 0)?_c('div',{staticClass:\"row spells scrollable-panel\"},[(!_vm.detailedModeOn)?_vm._l((_vm.spells),function(s){return _c('div',{key:s.codename,class:`spell col-12 ${_vm.panelIsOpen ? (s.codename == _vm.selectedSpell.codename ? 'selected' : '') : 'col-md-6 col-lg-4 col-xl-3'}`,on:{\"click\":function($event){return _vm.spellClicked($event, s.codename)}}},[_c('span',{staticClass:\"level\"},[_vm._v(_vm._s(s.level))]),_c('img',{staticClass:\"school\",attrs:{\"src\":_vm.icons.schoolIcon(s),\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(s.name)+\" \")])}):_vm._l((_vm.spells),function(s){return _c('div',{key:s.codename,staticClass:\"spell col-12\",on:{\"click\":function($event){return _vm.spellClicked($event, s.codename)}}},[_vm._l((_vm.classes),function(c){return _c('img',{key:c,class:s.classes.includes(c) ? '' : 'absent',attrs:{\"src\":_vm.icons.classIcon(c),\"alt\":\"\"}})}),_c('img',{class:s.verbal ? '' : 'absent',attrs:{\"src\":require(\"@/assets/images/icons/components/verbal.png\"),\"alt\":\"\"}}),_c('img',{class:s.somatic ? '' : 'absent',attrs:{\"src\":require(\"@/assets/images/icons/components/somatic.png\"),\"alt\":\"\"}}),_c('img',{class:s.material > 0 ? '' : 'absent',attrs:{\"src\":require(\"@/assets/images/icons/components/material.png\"),\"alt\":\"\"}}),_c('img',{class:s.material == 2 ? '' : 'absent',attrs:{\"src\":require(\"@/assets/images/icons/components/expensive2.png\"),\"alt\":\"\"}}),_c('img',{class:s.material == 3 ? '' : 'absent',attrs:{\"src\":require(\"@/assets/images/icons/components/expensive3.png\"),\"alt\":\"\"}}),_c('img',{class:s.aoe ? '' : 'absent',attrs:{\"src\":_vm.icons.aoeIcon(s),\"alt\":\"\"}}),_c('img',{attrs:{\"src\":_vm.icons.rangeIcon(s),\"alt\":\"\"}}),_c('img',{attrs:{\"src\":_vm.icons.durationIcon(s),\"alt\":\"\"}}),_c('img',{class:s.concentration ? '' : 'absent',attrs:{\"src\":require(\"@/assets/images/icons/spell_features/concentration.png\"),\"alt\":\"\"}}),_c('img',{attrs:{\"src\":_vm.icons.castingIcon(s),\"alt\":\"\"}}),_c('img',{class:s.ritual ? '' : 'absent',attrs:{\"src\":require(\"@/assets/images/icons/spell_features/ritual.png\"),\"alt\":\"\"}}),_c('img',{class:s.atHigherLevel ? '' : 'absent',attrs:{\"src\":require(\"@/assets/images/icons/spell_features/scalable.png\"),\"alt\":\"\"}}),_c('img',{class:_vm.app.settings.favorites.has(s.codename) ? '' : 'absent',attrs:{\"src\":require(\"@/assets/images/icons/misc/favorite.png\"),\"alt\":\"\"}}),_c('span',{staticClass:\"level\"},[_vm._v(_vm._s(s.level))]),_c('img',{staticClass:\"school\",attrs:{\"src\":_vm.icons.schoolIcon(s),\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(s.name)+\" \")],2)})],2):_c('div',{staticClass:\"list-message\"},[_vm._v(\" No spells found \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'.\r\n\r\n// This static class abstracts frequently used logic related to spell icons.\r\nclass Icons {\r\n  static classIcon(className) {\r\n    return require(`@/assets/images/icons/classes/${className}.png`);\r\n  }\r\n  static classIcons(spell) {\r\n    return spell.classes.map(this.classIcon);\r\n  }\r\n  static schoolIcon(spell) {\r\n    return require(`@/assets/images/icons/schools/${spell.school}.png`);\r\n  }\r\n  static durationIcon(spell) {\r\n    const name = { instantaneous: 'instant', 'until dispelled': 'dispelled' }[spell.duration.toLowerCase()] || 'transient';\r\n    return require(`@/assets/images/icons/durations/${name}.png`);\r\n  }\r\n  static aoeIcon(spell) {\r\n    const name = spell.aoe ? { cube: 'cube', sphere: 'sphere', cone: 'cone' }[spell.aoe.type] : null;\r\n    return name ? require(`@/assets/images/icons/ranges/${name}.png`) : require('@/assets/images/icons/misc/none.png');\r\n  }\r\n  static rangeIcon(spell) {\r\n    let name;\r\n    const range = spell.range.toLowerCase();\r\n    if (range.includes(\"self\")) {\r\n      name = \"self\";\r\n    } else if (range.includes(\"touch\")) {\r\n      name = \"touch\";\r\n    } else {\r\n      name = \"range\";\r\n    }\r\n    return require(`@/assets/images/icons/ranges/${name}.png`);\r\n  }\r\n  static castingIcon(spell) {\r\n    let name;\r\n    const casting = spell.casting.toLowerCase();\r\n    if (casting.includes(\"bonus\")) {\r\n      name = \"bonus\";\r\n    } else if (casting.includes(\"reaction\")) {\r\n      name = \"reaction\";\r\n    } else if (casting.includes(\"action\")) {\r\n      name = \"action\";\r\n    } else {\r\n      name = \"longcast\";\r\n    }\r\n    return require(`@/assets/images/icons/ctimes/${name}.png`);\r\n  }\r\n  static componentIcons(spell) {\r\n    let icons = [];\r\n    if (spell.verbal) icons.push(require('@/assets/images/icons/components/verbal.png'));\r\n    if (spell.somatic) icons.push(require('@/assets/images/icons/components/somatic.png'));\r\n    if (spell.material > 0) icons.push(require('@/assets/images/icons/components/material.png'));\r\n    if (spell.material == 2) icons.push(require('@/assets/images/icons/components/expensive2.png'));\r\n    if (spell.material == 3) icons.push(require('@/assets/images/icons/components/expensive3.png'));\r\n    return icons;\r\n  }\r\n}\r\nexport default Icons;\r\n","// © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'.\r\n\r\n// This file defines some application-wide constants.\r\nexport default {\r\n  appVersion: \"1.0.2\",\r\n  srdVersion: 15,\r\n  levels: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\r\n  schools: [\r\n    \"abjuration\",\r\n    \"conjuration\",\r\n    \"divination\",\r\n    \"enchantment\",\r\n    \"evocation\",\r\n    \"illusion\",\r\n    \"necromancy\",\r\n    \"transmutation\",\r\n  ],\r\n  classes: [\r\n    \"bard\",\r\n    \"cleric\",\r\n    \"druid\",\r\n    \"paladin\",\r\n    \"ranger\",\r\n    \"sorcerer\",\r\n    \"warlock\",\r\n    \"wizard\",\r\n    \"monk\",\r\n  ],\r\n  allowedTags: [\r\n    \"p\",\r\n    \"ul\",\r\n    \"li\",\r\n    \"table\",\r\n    \"thead\",\r\n    \"tbody\",\r\n    \"tr\",\r\n    \"th\",\r\n    \"td\",\r\n    \"i\",\r\n    \"b\",\r\n    \"img\",\r\n  ],\r\n};\r\n","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"row spells scrollable-panel\" v-if=\"spells.length > 0\">\r\n      <template v-if=\"!detailedModeOn\">\r\n        <div v-for=\"s in spells\" :key=\"s.codename\" :class=\"`spell col-12 ${panelIsOpen ? (s.codename == selectedSpell.codename ? 'selected' : '') : 'col-md-6 col-lg-4 col-xl-3'}`\" @click=\"spellClicked($event, s.codename)\">\r\n          <span class=\"level\">{{ s.level }}</span>\r\n          <img :src=\"icons.schoolIcon(s)\" class=\"school\" alt=\"\"/> {{ s.name }}\r\n        </div>\r\n      </template>\r\n      <template v-else>\r\n        <div v-for=\"s in spells\" :key=\"s.codename\" class=\"spell col-12\" @click=\"spellClicked($event, s.codename)\">\r\n          <img v-for=\"c in classes\" :key=\"c\" :src=\"icons.classIcon(c)\" :class=\"s.classes.includes(c) ? '' : 'absent'\" alt=\"\"/>\r\n          <img src=\"@/assets/images/icons/components/verbal.png\" :class=\"s.verbal ? '' : 'absent'\" alt=\"\"/>\r\n          <img src=\"@/assets/images/icons/components/somatic.png\" :class=\"s.somatic ? '' : 'absent'\" alt=\"\"/>\r\n          <img src=\"@/assets/images/icons/components/material.png\" :class=\"s.material > 0 ? '' : 'absent'\" alt=\"\"/>\r\n          <img src=\"@/assets/images/icons/components/expensive2.png\" :class=\"s.material == 2 ? '' : 'absent'\" alt=\"\"/>\r\n          <img src=\"@/assets/images/icons/components/expensive3.png\" :class=\"s.material == 3 ? '' : 'absent'\" alt=\"\"/>\r\n          <img :src=\"icons.aoeIcon(s)\" :class=\"s.aoe ? '' : 'absent'\" alt=\"\"/>\r\n          <img :src=\"icons.rangeIcon(s)\" alt=\"\"/>\r\n          <img :src=\"icons.durationIcon(s)\" alt=\"\"/>\r\n          <img src=\"@/assets/images/icons/spell_features/concentration.png\" :class=\"s.concentration ? '' : 'absent'\" alt=\"\"/>\r\n          <img :src=\"icons.castingIcon(s)\" alt=\"\"/>\r\n          <img src=\"@/assets/images/icons/spell_features/ritual.png\" :class=\"s.ritual ? '' : 'absent'\" alt=\"\"/>\r\n          <img src=\"@/assets/images/icons/spell_features/scalable.png\" :class=\"s.atHigherLevel ? '' : 'absent'\" alt=\"\"/>\r\n          <img src=\"@/assets/images/icons/misc/favorite.png\" :class=\"app.settings.favorites.has(s.codename) ? '' : 'absent'\" alt=\"\"/>\r\n          <span class=\"level\">{{ s.level }}</span>\r\n          <img :src=\"icons.schoolIcon(s)\" class=\"school\" alt=\"\"/>\r\n          {{ s.name }}\r\n        </div>\r\n      </template>\r\n    </div>\r\n    <div v-else class=\"list-message\">\r\n      No spells found\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Icons from '@/util/icons.js';\r\nimport constants from '@/util/constants.js';\r\n\r\nexport default {\r\n  name: 'SpellList',\r\n  props: {\r\n    app: Object,\r\n    spells: Array,\r\n    panelIsOpen: Boolean,\r\n    selectedSpell: Object,\r\n    detailedModeOn: Boolean\r\n  },\r\n  computed: {\r\n    icons() {\r\n      return Icons;\r\n    },\r\n    classes() {\r\n      return constants.classes;\r\n    }\r\n  },\r\n  methods: {\r\n    spellClicked(event, key) {\r\n      if (!this.selectedSpell) {\r\n        const div = event.currentTarget;\r\n        setTimeout(() => div.scrollIntoView({behavior: \"smooth\", block: \"center\"}), 100);\r\n      }\r\n      this.$emit(\"spell-clicked\", key);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .spells {\r\n    padding: 3px;\r\n    font-size: 16px;\r\n    line-height: 1;\r\n    color: #eee;\r\n  }\r\n  .spell {\r\n    text-align: left;\r\n    background-color: #212020;\r\n    border: 2px solid #1b1b1b;\r\n    border-radius: 4px;\r\n    padding: 2px 6px !important;\r\n    cursor: pointer;\r\n    overflow-y: hidden;\r\n    height: 34px;\r\n    line-height: 20px;\r\n  }\r\n  .spell:hover, .spell.selected {\r\n    background-color: #272727;\r\n    border-color: #212121;\r\n  }\r\n  .spell:hover .school, .spell.selected .school {\r\n    transform: scale(1.05);\r\n    filter: brightness(1.4);\r\n  }\r\n  .spell img {\r\n    height: 26px;\r\n  }\r\n  .level {\r\n    font-size: 20px;\r\n    width: 20px;\r\n    display: inline-block;\r\n    text-align: center;\r\n    font-weight: bold;\r\n    color: #5a5a5a;\r\n  }\r\n  .spell img.absent {\r\n    opacity: 0.1;\r\n  }\r\n  @media(max-width: 767px) {\r\n    .spells { font-size: 18px; }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpellList.vue?vue&type=template&id=8b413458&\"\nimport script from \"./SpellList.vue?vue&type=script&lang=js&\"\nexport * from \"./SpellList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpellList.vue?vue&type=style&index=0&id=8b413458&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"col-12 col-lg-5 col-xl-6 query-area pr-2\"},[_c('input',{directives:[{name:\"focus\",rawName:\"v-focus\"},{name:\"model\",rawName:\"v-model\",value:(_vm.rawQueryText),expression:\"rawQueryText\"}],ref:\"queryField\",staticClass:\"form-control query\",attrs:{\"type\":\"text\",\"placeholder\":\"Search...\"},domProps:{\"value\":(_vm.rawQueryText)},on:{\"keydown\":_vm.handleQueryKeydown,\"input\":function($event){if($event.target.composing)return;_vm.rawQueryText=$event.target.value}}}),_c('div',{staticClass:\"search-actions\"},[_c('span',{on:{\"click\":_vm.clearQuery}},[_c('img',{staticClass:\"details-icon\",attrs:{\"src\":require(\"@/assets/images/icons/misc/close.png\"),\"title\":\"Reset query and filters\",\"alt\":\"\"}})]),_c('span',{staticClass:\"d-none d-md-inline-block\",on:{\"click\":function($event){return _vm.$emit('toggle-detailed-view')}}},[_c('img',{class:`details-icon ${_vm.detailedModeOn ? 'active' : ''}`,attrs:{\"src\":require(\"@/assets/images/icons/misc/details.png\"),\"title\":\"Toggle detailed spell list\",\"alt\":\"\"}})]),_c('span',{on:{\"click\":function($event){_vm.query.favorites = !_vm.query.favorites}}},[_c('img',{class:`details-icon ${_vm.query.favorites ? 'active' : ''}`,attrs:{\"src\":require(\"@/assets/images/icons/misc/favorite.png\"),\"title\":\"Toggle favorites filter\",\"alt\":\"\"}})]),_c('SpellEditionControls',{attrs:{\"app\":_vm.app,\"selectedSpell\":_vm.selectedSpell},on:{\"select-spell\":s => _vm.$emit('select-spell', s)}})],1)]),_c('div',{staticClass:\"col-12 col-lg-7 col-xl-6 filters\"},[_c('div',{staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"d-block col-4 col-lg-3 filter\"},[_c('CustomSelect',{attrs:{\"options\":_vm.classOptions},model:{value:(_vm.query.class),callback:function ($$v) {_vm.$set(_vm.query, \"class\", $$v)},expression:\"query.class\"}})],1),_c('div',{staticClass:\"d-block col-4 col-lg-3 filter\"},[_c('CustomSelect',{attrs:{\"options\":_vm.levelOptions},model:{value:(_vm.query.level),callback:function ($$v) {_vm.$set(_vm.query, \"level\", $$v)},expression:\"query.level\"}})],1),_c('div',{staticClass:\"d-block col-4 col-lg-3 filter\"},[_c('CustomSelect',{attrs:{\"options\":_vm.schoolOptions},model:{value:(_vm.query.school),callback:function ($$v) {_vm.$set(_vm.query, \"school\", $$v)},expression:\"query.school\"}})],1),_c('div',{staticClass:\"d-none d-lg-block col-3 filter\"},[_c('CustomSelect',{attrs:{\"options\":_vm.sourceOptions,\"align\":\"right\"},model:{value:(_vm.query.sourceName),callback:function ($$v) {_vm.$set(_vm.query, \"sourceName\", $$v)},expression:\"query.sourceName\"}})],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"on-clickaway\",rawName:\"v-on-clickaway\",value:(_vm.close),expression:\"close\"}],staticClass:\"cs\"},[_c('div',{class:`cs-field ${_vm.value == '' ? 'blank' : ''}`,on:{\"click\":function($event){_vm.open = !_vm.open}}},[(_vm.selectedOption.image)?_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.value != ''),expression:\"value != ''\"}],staticClass:\"cs-field-icon\",attrs:{\"src\":_vm.selectedOption.image,\"alt\":\"\"}}):_vm._e(),_vm._v(\" \"+_vm._s(_vm.selectedOption.text || _vm.selectedOption.value)+\" \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.open),expression:\"open\"}],class:`cs-options ${ _vm.align == 'right' ? 'cs-right' : ''}`},_vm._l((_vm.options),function(option){return _c('div',{key:option.value,staticClass:\"cs-option\",on:{\"click\":function($event){return _vm.choose(option.value)}}},[(option.image)?_c('img',{staticClass:\"cs-option-icon\",attrs:{\"src\":option.image,\"alt\":\"\"}}):_vm._e(),_vm._v(\" \"+_vm._s(option.text || option.value)+\" \")])}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"cs\" v-on-clickaway=\"close\">\r\n    <div :class=\"`cs-field ${value == '' ? 'blank' : ''}`\" @click=\"open = !open\">\r\n      <img v-if=\"selectedOption.image\" v-show=\"value != ''\" class=\"cs-field-icon\" :src=\"selectedOption.image\" alt=\"\"/> {{ selectedOption.text || selectedOption.value }}\r\n    </div>\r\n    <div :class=\"`cs-options ${ align == 'right' ? 'cs-right' : ''}`\" v-show=\"open\">\r\n      <div v-for=\"option in options\" :key=\"option.value\" @click=\"choose(option.value)\" class=\"cs-option\">\r\n        <img v-if=\"option.image\" class=\"cs-option-icon\" :src=\"option.image\" alt=\"\"/> {{ option.text || option.value }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n  .cs {\r\n    position: relative;\r\n    user-select: none;\r\n  }\r\n  .cs-field {\r\n    height: 40px;\r\n    border-bottom: 1px solid gray;\r\n    border-radius: 5px;\r\n    padding: 7px 12px;\r\n    cursor: pointer;\r\n    transition: border-color 0.5s;\r\n    text-transform: capitalize;\r\n    overflow-x: hidden;\r\n    white-space: nowrap;\r\n  }\r\n  .cs-field.blank {\r\n    color: #555;\r\n  }\r\n  .cs-field:hover {\r\n    border-color: #ddd;\r\n  }\r\n  .cs-options {\r\n    background-color: #2b2b2b;\r\n    border: 2px solid #313131;\r\n    border-radius: 3px;\r\n    position: absolute;\r\n    width: 100%;\r\n    text-transform: capitalize;\r\n    z-index: 100;\r\n    min-width: 200px;\r\n  }\r\n  .cs-right {\r\n    right: 0;\r\n  }\r\n  .cs-option {\r\n    padding: 4px 5px;\r\n    border-bottom: 1px solid #444;\r\n    cursor: pointer;\r\n    min-height: 38px;\r\n    line-height: 29px;\r\n  }\r\n  .cs-option:hover {\r\n    background-color: #2f2f2f;\r\n  }\r\n  .cs-field-icon {\r\n    width: 22px;\r\n  }\r\n  .cs-option-icon {\r\n    width: 24px;\r\n  }\r\n</style>\r\n<script>\r\nimport { mixin as clickaway } from 'vue-clickaway';\r\n\r\nexport default {\r\n  name: 'CustomSelect',\r\n  props: {\r\n    value: [String, Number],\r\n    options: Array,\r\n    align: String\r\n  },\r\n  data() { return {\r\n    open: false\r\n  }},\r\n  computed: {\r\n    selectedOption() {\r\n      return this.options.find(o => o.value == this.value) || this.options.find(o => !o.value);\r\n    }\r\n  },\r\n  methods: {\r\n    choose(value) {\r\n      this.$emit('input', value);\r\n      this.open = false;\r\n    },\r\n    close() {\r\n      this.open = false;\r\n    }\r\n  },\r\n  mixins: [ clickaway ]\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CustomSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CustomSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomSelect.vue?vue&type=template&id=11a5decd&\"\nimport script from \"./CustomSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomSelect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CustomSelect.vue?vue&type=style&index=0&id=11a5decd&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',[(_vm.app.editionModeOn)?_c('span',{on:{\"click\":function($event){return _vm.addNewSpell()}}},[_c('img',{staticClass:\"details-icon\",attrs:{\"src\":require(\"@/assets/images/icons/misc/addSpell.png\"),\"title\":\"Add a new blank spell\",\"alt\":\"\"}})]):_vm._e(),(_vm.app.editionModeOn)?_c('span',{on:{\"click\":function($event){return _vm.deleteSpell()}}},[_c('img',{class:{ 'details-icon': true, disabled: !_vm.selectedSpell },attrs:{\"src\":require(\"@/assets/images/icons/misc/deleteSpell.png\"),\"title\":\"Delete the currently selected spell\",\"alt\":\"\"}})]):_vm._e(),(_vm.app.editionModeOn)?_c('span',{on:{\"click\":function($event){return _vm.validateAndSave()}}},[_c('img',{staticClass:\"details-icon\",attrs:{\"src\":require(\"@/assets/images/icons/misc/save1.png\"),\"title\":\"Save changes\",\"alt\":\"\"}})]):_vm._e(),_c('span',{on:{\"click\":function($event){_vm.app.editionModeOn = !_vm.app.editionModeOn}}},[_c('img',{class:{ 'details-icon': true, active: _vm.app.editionModeOn },attrs:{\"src\":require(\"@/assets/images/icons/misc/edition.png\"),\"title\":\"Toggle spell edition mode\",\"alt\":\"\"}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<!-- This component manages the section of the SpellsToolbar dedicated to spell edition-related functions. -->\r\n<template>\r\n  <span>\r\n    <span v-if=\"app.editionModeOn\" @click=\"addNewSpell()\">\r\n      <img src=\"@/assets/images/icons/misc/addSpell.png\" class=\"details-icon\" title=\"Add a new blank spell\" alt=\"\"/>\r\n    </span>\r\n    <span v-if=\"app.editionModeOn\" @click=\"deleteSpell()\">\r\n      <img src=\"@/assets/images/icons/misc/deleteSpell.png\" :class=\"{ 'details-icon': true, disabled: !selectedSpell }\" title=\"Delete the currently selected spell\" alt=\"\"/>\r\n    </span>\r\n    <span v-if=\"app.editionModeOn\" @click=\"validateAndSave()\">\r\n      <img src=\"@/assets/images/icons/misc/save1.png\" class=\"details-icon\" title=\"Save changes\" alt=\"\"/>\r\n    </span>\r\n    <span @click=\"app.editionModeOn = !app.editionModeOn\">\r\n      <img src=\"@/assets/images/icons/misc/edition.png\" :class=\"{ 'details-icon': true, active: app.editionModeOn }\" title=\"Toggle spell edition mode\" alt=\"\"/>\r\n    </span>\r\n  </span>\r\n</template>\r\n\r\n<script>\r\nconst newSpellTemplate = {\r\n  name: \"New spell\",\r\n  classes: [],\r\n  school: \"divination\",\r\n  level: 0,\r\n  range: \"\",\r\n  duration: \"\",\r\n  casting: \"\",\r\n  verbal: false,\r\n  somatic: false,\r\n  material: 0,\r\n  materials: null,\r\n  concentration: false,\r\n  ritual: false,\r\n  description: \"\",\r\n  atHigherLevel: null\r\n};\r\n\r\nexport default {\r\n  name: 'SpellEditionControls',\r\n  props: {\r\n    app: Object,\r\n    selectedSpell: Object\r\n  },\r\n  methods: {\r\n    validateAndSave() {\r\n      try {\r\n        this.app.contentDatabase.validate();\r\n        this.app.contentDatabase.saveToStorage();\r\n      } catch (error) {\r\n        if (error.message) {\r\n          this.app.alert(\"Validation error: \" + error.message);\r\n        }\r\n        return;\r\n      }\r\n      this.app.alert(\"Content saved\", \"success\");\r\n    },\r\n    // Add a new spell for the user to fill in\r\n    addNewSpell() {\r\n      const newSpell = {};\r\n      Object.assign(newSpell, newSpellTemplate); // Clone the new spell hash to prevent modification\r\n      let defaultSource = this.app.contentDatabase.data.sources.find(s => s.name == \"Unassigned\");\r\n      if (!defaultSource) {\r\n        defaultSource = {\r\n          name: \"Unassigned\",\r\n          description: \"Spells you created through the editor.\",\r\n          version: 0,\r\n          spells: [],\r\n          rules: []\r\n        };\r\n        this.app.contentDatabase.data.sources.push(defaultSource);\r\n      }\r\n      // If a spell named \"New spell\" already exists, append numbers until necessary\r\n      while(this.app.spells.some(s => s.name == newSpell.name)) {\r\n        const number = (newSpell.name.match(/ (\\d+)$/) || [])[1]; // Grab the number from the current spell name\r\n        if (number) {\r\n          newSpell.name = \"New spell \" + (parseInt(number) + 1);\r\n        } else {\r\n          newSpell.name = \"New spell 2\";\r\n        }\r\n      }\r\n      this.app.contentDatabase.addSpell(newSpell, defaultSource.name);\r\n      this.app.reloadDatabase();\r\n      // Notify SpellView to open the newly created spell\r\n      this.$emit(\"select-spell\", newSpell);\r\n    },\r\n    // Delete the currently selected spell from the database\r\n    deleteSpell() {\r\n      if (this.selectedSpell) {\r\n        if (confirm(`Delete spell \"${this.selectedSpell.name}\"?`)) {\r\n          this.app.contentDatabase.deleteSpell(this.selectedSpell);\r\n          this.app.reloadDatabase();\r\n          this.$emit(\"select-spell\", null);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellEditionControls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellEditionControls.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpellEditionControls.vue?vue&type=template&id=7361627f&\"\nimport script from \"./SpellEditionControls.vue?vue&type=script&lang=js&\"\nexport * from \"./SpellEditionControls.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'.\r\n\r\n// This file define the options that CustomSelect dropdowns for spell school,\r\n// class, level and source should have.\r\n\r\nimport constants from '@/util/constants.js';\r\nimport Icons from '@/util/icons.js';\r\n\r\nexport default {\r\n  classOptions: constants.classes.map(c => { return { value: c, text: c, image: Icons.classIcon(c) }}),\r\n  levelOptions: [{ value: '0', text: 'Cantrip' }, { value: '1', text: '1st level' },\r\n    { value: '2', text: '2nd level' }, { value: '3', text: '3rd level' }\r\n    ].concat([4,5,6,7,8,9].map(n => { return { value: n.toString(), text: n + 'th level' }})),\r\n  schoolOptions: constants.schools.map(s => { return { value: s, text: s, image: Icons.schoolIcon({school: s}) }}),\r\n  materialOptions: [\r\n    { value: '0', text: 'No material component' },\r\n    { value: '1', text: 'Normal material component', image: require('@/assets/images/icons/components/material.png') },\r\n    { value: '2', text: 'Expensive material, not consumed', image: require('@/assets/images/icons/components/expensive2.png') },\r\n    { value: '3', text: 'Expensive material, consumed', image: require('@/assets/images/icons/components/expensive3.png') }\r\n  ],\r\n  sourceOptions(app) {\r\n    return app.contentDatabase.data.sources.map(s => { return { value: s.name, image: require('@/assets/images/icons/spell_features/source.png') } });\r\n  },\r\n  aoeOptions: ['sphere', 'cube', 'cone'].map(a => { return { value: a, image: require(`@/assets/images/icons/ranges/${a}.png`) }}).concat(\r\n    [{ value: '', text: 'None', image: require('@/assets/images/icons/misc/none.png') }]\r\n  ),\r\n  centerOptions: [\r\n    { value: '', text: \"automatic\", image: require('@/assets/images/icons/misc/none.png') },\r\n    { value: 'intersection', image: require('@/assets/images/icons/misc/cntInter.png') },\r\n    { value: 'cell', image: require('@/assets/images/icons/misc/cntCell.png') }\r\n  ]\r\n};","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row no-gutters\">\r\n    <div class=\"col-12 col-lg-5 col-xl-6 query-area pr-2\">\r\n      <input type=\"text\" class=\"form-control query\" v-focus v-model=\"rawQueryText\" ref=\"queryField\" placeholder=\"Search...\" @keydown=\"handleQueryKeydown\"/>\r\n      <div class=\"search-actions\">\r\n        <span @click=\"clearQuery\">\r\n          <img src=\"@/assets/images/icons/misc/close.png\" class=\"details-icon\" title=\"Reset query and filters\" alt=\"\"/>\r\n        </span>\r\n        <span class=\"d-none d-md-inline-block\" @click=\"$emit('toggle-detailed-view')\">\r\n          <img src=\"@/assets/images/icons/misc/details.png\" :class=\"`details-icon ${detailedModeOn ? 'active' : ''}`\" title=\"Toggle detailed spell list\" alt=\"\"/>\r\n        </span>\r\n        <span @click=\"query.favorites = !query.favorites\">\r\n          <img src=\"@/assets/images/icons/misc/favorite.png\" :class=\"`details-icon ${query.favorites ? 'active' : ''}`\" title=\"Toggle favorites filter\" alt=\"\"/>\r\n        </span>\r\n        <SpellEditionControls :app=\"app\" :selectedSpell=\"selectedSpell\" @select-spell=\"s => $emit('select-spell', s)\"/>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-12 col-lg-7 col-xl-6 filters\">\r\n      <div class=\"row no-gutters\">\r\n        <div class=\"d-block col-4 col-lg-3 filter\">\r\n          <CustomSelect v-model=\"query.class\" :options=\"classOptions\"/>\r\n        </div>\r\n        <div class=\"d-block col-4 col-lg-3 filter\">\r\n          <CustomSelect v-model=\"query.level\" :options=\"levelOptions\"/>\r\n        </div>\r\n        <div class=\"d-block col-4 col-lg-3 filter\">\r\n          <CustomSelect v-model=\"query.school\" :options=\"schoolOptions\"/>\r\n        </div>\r\n        <div class=\"d-none d-lg-block col-3 filter\">\r\n          <CustomSelect v-model=\"query.sourceName\" :options=\"sourceOptions\" align=\"right\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CustomSelect from \"@/components/general/CustomSelect.vue\";\r\nimport SpellEditionControls from \"@/components/spells/SpellEditionControls.vue\";\r\nimport spellOptions from '@/util/spellOptions.js';\r\nimport { debounce } from \"debounce\";\r\n\r\nexport default {\r\n  name: 'SpellsToolbar',\r\n  components: {\r\n    SpellEditionControls,\r\n    CustomSelect\r\n  },\r\n  props: {\r\n    app: Object,\r\n    query: Object,\r\n    selectedSpell: Object,\r\n    detailedModeOn: Boolean\r\n  },\r\n  data() { return {\r\n    rawQueryText: '',\r\n  }},\r\n  computed: {\r\n    classOptions() {\r\n      return [{ value: '', text: 'Any class', image: require('@/assets/images/icons/misc/none.png') }].concat(spellOptions.classOptions);\r\n    },\r\n    levelOptions() {\r\n      return [{ value: '', text: 'Any level' }].concat(spellOptions.levelOptions);\r\n    },\r\n    schoolOptions() {\r\n      return [{value: '', text: 'Any school', image: require('@/assets/images/icons/misc/none.png')}].concat(spellOptions.schoolOptions);\r\n    },\r\n    sourceOptions() {\r\n      return [{value: '', text: 'Any source', image: require('@/assets/images/icons/misc/none.png')}].concat(spellOptions.sourceOptions(this.app));\r\n    }\r\n  },\r\n  methods: {\r\n    // Resets the search text field and filters to the default state\r\n    clearQuery() {\r\n      this.rawQueryText = '';\r\n      this.query.text = '';\r\n      this.query.level = '';\r\n      this.query.class = '';\r\n      this.query.school = '';\r\n      this.query.sourceName = '';\r\n      this.$refs.queryField.focus();\r\n    },\r\n    // Add the ability to move through the spell list by using the Up/Down arrows while focused on the query input\r\n    handleQueryKeydown(evt) {\r\n      if (evt.keyCode == 38) { // Up arrow\r\n        this.$emit('navigate-spells', 'up');\r\n        evt.preventDefault();\r\n      } else if (evt.keyCode == 40) { // Down arrow\r\n        this.$emit('navigate-spells', 'down');\r\n        evt.preventDefault();\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    rawQueryText() {\r\n      // Binding the text field directly to query.text can make the app stutter a bit because it has to re-render\r\n      // the list with each keydown event. Instead, we use a separate field called rawQueryText that updates\r\n      // query.text at a limited rate (aka debouncing).\r\n      debounce(() => {\r\n        // If the query starts with a period, it means the user wants to search in the spell description too\r\n        this.query.includeDescription = this.rawQueryText.startsWith(\".\");\r\n        // Remove the period from the query if present\r\n        this.query.text = (this.query.includeDescription ? this.rawQueryText.substring(1) : this.rawQueryText).toLowerCase();\r\n      }, 200)();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .filter {\r\n    padding: 0px 5px !important;\r\n  }\r\n  .query-area img {\r\n    height: 30px;\r\n    cursor: pointer;\r\n    transition: filter 0.3s, opacity 0.3s;\r\n    opacity: 0.3;\r\n    filter: saturate(0%);\r\n  }\r\n  .query-area img.active {\r\n    filter: saturate(100%);\r\n    opacity: 1;\r\n  }\r\n  .query-area {\r\n    display: flex;\r\n    align-items: flex-end;\r\n  }\r\n  .query-area > span {\r\n    flex-shrink: 0;\r\n  }\r\n  .search-actions {\r\n    padding: 5px;\r\n    flex-shrink: 0;\r\n  }\r\n  input.query {\r\n    display: inline-block;\r\n    flex-grow: 1;\r\n    width: 10px !important; /* Will be \"stretched\" by flex to the appropriate width */\r\n  }\r\n  /* Make favorite hover effect work only on non-touch devices, because otherwise it looks favorited after un-favoriting */\r\n  @media (pointer: fine) {\r\n    .query-area img:hover {\r\n      filter: saturate(100%);\r\n      opacity: 1;\r\n    }\r\n    .query-area img.disabled, .query-area img.disabled:hover {\r\n      filter: saturate(0%);\r\n      opacity: 0.15;\r\n      cursor: not-allowed;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellsToolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellsToolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpellsToolbar.vue?vue&type=template&id=0a106655&\"\nimport script from \"./SpellsToolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./SpellsToolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpellsToolbar.vue?vue&type=style&index=0&id=0a106655&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"spell-details\"},[_c('div',{staticClass:\"spell-head\"},[_c('img',{staticClass:\"spell-school clickable\",attrs:{\"src\":_vm.icons.schoolIcon(_vm.spell),\"title\":\"School\"},on:{\"click\":function($event){return _vm.helpFor('schools')}}}),_c('div',{staticClass:\"spell-title\"},[_c('div',{staticClass:\"spell-name\"},[_vm._v(_vm._s(_vm.spell.name))]),_c('div',{staticClass:\"spell-type\"},[_vm._v(_vm._s(_vm.prettyLevel)+\" \"+_vm._s(_vm.spell.school))])]),_c('div',{staticClass:\"spell-actions\"},[_c('div',{staticClass:\"spell-close d-none d-md-block\",on:{\"click\":function($event){return _vm.$emit('clear-spell')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/close.png\")}})]),_c('div',{class:`spell-favorite ${_vm.favorited() ? 'favorited' : ''}`,on:{\"click\":_vm.favoriteSpell}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/favorite.png\")}})])])]),_c('div',{staticClass:\"row spell-features\"},[_c('div',{staticClass:\"col-6 col-lg-4 col-xl-3\"},[_c('router-link',{attrs:{\"to\":\"/rules/range\",\"title\":\"Range\"}},[_c('img',{attrs:{\"src\":_vm.icons.rangeIcon(_vm.spell)}}),_vm._v(\" \"+_vm._s(_vm.spell.range)+\" \")]),_c('br'),_c('img',{attrs:{\"src\":_vm.icons.durationIcon(_vm.spell),\"title\":\"Duration\"}}),_vm._v(\" \"+_vm._s(_vm.spell.duration)),_c('br'),(_vm.spell.concentration)?[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/spell_features/concentration.png\"),\"title\":\"Spell requires concentration\"}}),_vm._v(\" Concentration\"),_c('br')]:_vm._e(),_c('router-link',{attrs:{\"to\":\"/rules/casting-time\",\"title\":\"Casting time\"}},[_c('img',{attrs:{\"src\":_vm.icons.castingIcon(_vm.spell)}}),_vm._v(\" \"+_vm._s(_vm.spell.casting)+\" \")]),_c('br'),(_vm.spell.ritual)?[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/spell_features/ritual.png\")}}),_vm._v(\" Ritual\")]:_vm._e()],2),_c('div',{staticClass:\"col-6 col-lg-4 col-xl-3\"},[_c('div',{attrs:{\"title\":\"Classes\"},on:{\"click\":function($event){return _vm.helpFor('classes')}}},_vm._l((_vm.icons.classIcons(_vm.spell)),function(icon){return _c('img',{key:icon,staticClass:\"clickable\",attrs:{\"src\":`${icon}`}})}),0),_c('div',{attrs:{\"title\":\"Components\"},on:{\"click\":function($event){return _vm.helpFor('components')}}},_vm._l((_vm.icons.componentIcons(_vm.spell)),function(icon){return _c('img',{key:icon,staticClass:\"clickable\",attrs:{\"src\":icon}})}),0),(_vm.spell.atHigherLevel)?[_c('router-link',{attrs:{\"to\":\"/rules/casting-a-spell-at-a-higher-level\",\"title\":\"Spell improves when cast with higher level slot\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/spell_features/scalable.png\")}}),_vm._v(\" Scalable \")])]:_vm._e()],2),_c('div',{staticClass:\"d-none d-lg-block col-lg-4 col-xl-6\"},[_c('div',{attrs:{\"title\":\"Which book/source this spell originates from\"}},[_c('router-link',{attrs:{\"to\":\"/content\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/spell_features/source.png\")}}),_vm._v(\" \"+_vm._s(_vm.spell.location || _vm.spell.sourceName)+\" \")])],1),(_vm.spell.material > 0)?_c('div',{attrs:{\"title\":\"Materials\"},domProps:{\"innerHTML\":_vm._s(_vm.spell.materials)}}):_vm._e()])]),_c('div',{staticClass:\"spell-description\",domProps:{\"innerHTML\":_vm._s(_vm.prettyDescription)},on:{\"click\":_vm.handleDescriptionClick}}),(_vm.spell.atHigherLevel)?_c('div',{staticClass:\"spell-higher\",domProps:{\"innerHTML\":_vm._s(_vm.prettyHigherLevel)}}):_vm._e(),_c('Diagram',{attrs:{\"defaultRange\":_vm.numericRange,\"aoe\":_vm.spell.aoe,\"title\":\"Range visualization\"}}),_c('div',{staticClass:\"d-block d-lg-none mobile-foot\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/spell_features/source.png\"),\"title\":\"Which book/source this spell originates from\"}}),_vm._v(\" \"+_vm._s(_vm.spell.location || _vm.spell.sourceName)),_c('br'),(_vm.spell.material > 0)?_c('div',{attrs:{\"title\":\"Materials\"},domProps:{\"innerHTML\":_vm._s(_vm.prettyMaterials)}}):_vm._e()]),_c('HelpModal',{attrs:{\"app\":_vm.app,\"topic\":_vm.helpTopic}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-modal',{attrs:{\"id\":\"helpModal\",\"title\":_vm.topic}},[(_vm.topic == 'classes')?_c('div',{staticClass:\"row\"},_vm._l((_vm.classes),function(c){return _c('div',{key:c,staticClass:\"col-6 col-sm-4 capitalize\"},[_c('img',{attrs:{\"src\":_vm.icons.classIcon(c),\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(c)+\" \")])}),0):_vm._e(),(_vm.topic == 'components')?_c('div',{staticClass:\"row\"},[_vm._l(([['verbal'], ['somatic'], ['material'], ['expensive2', 'Expensive material, not consumed'], ['expensive3', 'Expensive material, consumed']]),function(c){return _c('div',{key:c,staticClass:\"col-12 capitalize\"},[_c('img',{attrs:{\"src\":require(`@/assets/images/icons/components/${c[0]}.png`),\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(c[1] || c[0])+\" \")])}),_c('div',{staticClass:\"col-12 pt-3\"},[_c('router-link',{attrs:{\"to\":\"/rules/components\"}},[_vm._v(\"Read more about spell components\")])],1)],2):_vm._e(),(_vm.topic == 'schools')?_c('div',{staticClass:\"row\"},_vm._l((_vm.schools),function(s){return _c('div',{key:s,staticClass:\"col-6 capitalize\"},[_c('img',{attrs:{\"src\":_vm.icons.schoolIcon({school:s}),\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(s)+\" \")])}),0):_vm._e(),_c('div',{staticClass:\"w-100\",attrs:{\"slot\":\"modal-footer\"},slot:\"modal-footer\"},[_c('b-button',{staticClass:\"float-right\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.$bvModal.hide('helpModal')}}},[_vm._v(\"Close\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <b-modal id=\"helpModal\" :title=\"topic\">\r\n\r\n    <div v-if=\"topic == 'classes'\" class=\"row\">\r\n      <div v-for=\"c in classes\" :key=\"c\" class=\"col-6 col-sm-4 capitalize\">\r\n        <img :src=\"icons.classIcon(c)\" alt=\"\"> {{ c }}\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"topic == 'components'\" class=\"row\">\r\n      <div v-for=\"c in [['verbal'], ['somatic'], ['material'], ['expensive2', 'Expensive material, not consumed'], ['expensive3', 'Expensive material, consumed']]\" :key=\"c\" class=\"col-12 capitalize\">\r\n        <img :src=\"require(`@/assets/images/icons/components/${c[0]}.png`)\" alt=\"\"> {{ c[1] || c[0] }}\r\n      </div>\r\n      <div class=\"col-12 pt-3\">\r\n        <router-link to=\"/rules/components\">Read more about spell components</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"topic == 'schools'\" class=\"row\">\r\n      <div v-for=\"s in schools\" :key=\"s\" class=\"col-6 capitalize\">\r\n        <img :src=\"icons.schoolIcon({school:s})\" alt=\"\"> {{ s }}\r\n      </div>\r\n    </div>\r\n\r\n    <div slot=\"modal-footer\" class=\"w-100\">\r\n      <b-button variant=\"primary\" size=\"sm\" class=\"float-right\" @click=\"$bvModal.hide('helpModal')\">Close</b-button>\r\n    </div>\r\n  </b-modal>\r\n</template>\r\n<script>\r\nimport Icons from '@/util/icons.js';\r\nimport constants from '@/util/constants.js';\r\n\r\nexport default {\r\n  name: 'HelpModal',\r\n  props: {\r\n    app: Object,\r\n    topic: String\r\n  },\r\n  computed: {\r\n    icons() {\r\n      return Icons;\r\n    },\r\n    schools() {\r\n      return constants.schools;\r\n    },\r\n    classes() {\r\n      return constants.classes;\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n  #helpModal img {\r\n    width: 30px;\r\n  }\r\n  #helpModal .modal-title {\r\n    text-transform: capitalize;\r\n  }\r\n  #helpModal .capitalize {\r\n    text-transform: capitalize;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HelpModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HelpModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HelpModal.vue?vue&type=template&id=04f38c4e&\"\nimport script from \"./HelpModal.vue?vue&type=script&lang=js&\"\nexport * from \"./HelpModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HelpModal.vue?vue&type=style&index=0&id=04f38c4e&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.enabled)?_c('canvas',{attrs:{\"id\":\"diagram\",\"width\":_vm.width,\"height\":_vm.height}}):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'.\r\n\r\n// This static class contains some generic geometry-related functions.\r\n// Here be secrets more arcane than the spells themselves.\r\nclass Geometry {\r\n\r\n  // Determine whether or not the point P lies within the triangle ABC\r\n  // Adapted from answer at https://stackoverflow.com/questions/2049582/how-to-determine-if-a-point-is-in-a-2d-triangle\r\n  static pointIsWithinTriangle(px, py, ax, ay, bx, by, cx, cy) {\r\n    const as_x = px - ax;\r\n    const as_y = py - ay;\r\n    const s_ab = (bx - ax) * as_y - (by - ay) * as_x > 0;\r\n    if ((cx - ax) * as_y - (cy - ay) * as_x > 0 == s_ab) return false;\r\n    if ((cx - bx) * (py - by) - (cy - by) * (px - bx) > 0 != s_ab) return false;\r\n    return true;\r\n  }\r\n\r\n  // Find the intersection points between the line defined by the points A and B, and the circle with center C\r\n  // Adapted from answer at https://stackoverflow.com/questions/13053061/circle-line-intersection-points\r\n  static findCircleLineIntersections(ax, ay, bx, by, cx, cy, radius) {\r\n    const baX = bx - ax;\r\n    const baY = by - ay;\r\n    const caX = cx - ax;\r\n    const caY = cy - ay;\r\n    const a = baX * baX + baY * baY;\r\n    const bBy2 = baX * caX + baY * caY;\r\n    const c = caX * caX + caY * caY - radius * radius;\r\n    const pBy2 = bBy2 / a;\r\n    const q = c / a;\r\n    const disc = pBy2 * pBy2 - q;\r\n    const tmpSqrt = Math.sqrt(disc);\r\n    const abScalingFactor1 = -pBy2 + tmpSqrt;\r\n    const abScalingFactor2 = -pBy2 - tmpSqrt;\r\n    const p1 = { x: ax - baX * abScalingFactor1, y: ay- baY * abScalingFactor1 };\r\n    return disc == 0 ? [p1] : [p1, { x: ax - baX * abScalingFactor2, y: ay - baY * abScalingFactor2 }];\r\n  }\r\n\r\n  // Defines whether or not the line segment defined by the points A and B intersects the circle with center C\r\n  static segmentIntersectsCircle(ax, ay, bx, by, cx, cy, radius) {\r\n    const intersections = this.findCircleLineIntersections(ax, ay, bx, by, cx, cy, radius);\r\n    // Even if the (infinite) line has intersections, we need to check that at least one intersection lies within the given line segment\r\n    return intersections.length > 1 && intersections.some(p => p.x >= Math.min(ax, bx) && p.x <= Math.max(ax, bx) && p.y >= Math.min(ay, by) && p.y <= Math.max(ay, by));\r\n  }\r\n}\r\nexport default Geometry;\r\n","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <canvas id=\"diagram\" v-if=\"enabled\" :width=\"width\" :height=\"height\"></canvas>\r\n</template>\r\n<style>\r\n#diagram {\r\n  max-width: 100%;\r\n}\r\n</style>\r\n<script>\r\nimport Geometry from \"@/util/geometry.js\";\r\n\r\nconst cellSize = 20; // The size of each cell of the grid, in px\r\nconst margin = 14; // The margin between the grid and the canvas, in px\r\nconst fade = 40; // The width of the fade effect on the edges of the grid, in px\r\nconst feetPerCell = 5; // How many feet each cell in the grid represents\r\nconst circleRadius = 6; // The radius of the circles that represent the player and the target mob, in px\r\nconst pixelsPerFoot = cellSize / feetPerCell; // How many pixels represent each foot\r\nconst pixelsPerCell = feetPerCell * pixelsPerFoot; // How many pixels are in each grid cell\r\nconst minRange = 10; // The minimum spell range (doesn't make much sense to diagram a 5-foot-range spell unless it's an AOE), in feet\r\nconst maxRange = 300; // The maximum spell range (prevent drawing humongous grids for spells with very long range), in feet\r\nconst maxAOERadius = 120; // The maximum AOE radius (same reason as above), in feet\r\nconst coneAmplitude = Math.atan(0.5) * 2; // The amplitude of the cone AOE, in radians (isosceles triangle where base equals height, ~ 53 degrees)\r\n// const coneSideLengthMultiplier = Math.sqrt(1.5) // The side of the isosceles triangle if cone length = 1\r\nconst coneSideLengthMultiplier = 1.115; // TODO: This should be the commented value above. Check math.\r\n\r\nexport default {\r\n  name: \"Diagram\",\r\n  props: {\r\n    app: Object,\r\n    defaultRange: Number, // The \"official\" range of the spell, in feet, as defined in the book\r\n    aoe: Object, // A hash that represents the Area Of Effect of this spell,\r\n  },\r\n  computed: {\r\n    // The range of the effect to show in the diagram, in feet. In most cases it will match the\r\n    // defaultRange of the spell, but in some cases we might want to use a different range for the\r\n    // AOE. In such cases, the aoe object contains a range attribute that overrides the \"official\" range.\r\n    range() {\r\n      const overrideRange = (this.aoe || {}).range;\r\n      return overrideRange === undefined ? this.defaultRange : overrideRange;\r\n    },\r\n    width() {\r\n      // The width of the canvas, in pixels\r\n      return this.cols * cellSize + margin * 2;\r\n    },\r\n    height() {\r\n      // The height of the canvas, in pixels\r\n      return this.rows * cellSize + margin * 2;\r\n    },\r\n    rows() {\r\n      // The amount of rows in the grid\r\n      return this.getOptimalRowAmount();\r\n    },\r\n    cols() {\r\n      // The amount of columns in the grid\r\n      return this.getOptimalColAmount();\r\n    },\r\n    enabled() {\r\n      // Whether this diagram should be drawn, or adds no value to the given spell and should be hidden\r\n      return this.range <= maxRange && (this.range >= minRange || this.aoe);\r\n    },\r\n    // [Sphere AOEs only] Determine whether the sphere's center should be a grid intersection point or a cell\r\n    isCenteredInIntersection() {\r\n      if (this.aoe.center) {\r\n        // if the source explicitly declares where the center should be, use that\r\n        return this.aoe.center == \"intersection\";\r\n      } else {\r\n        // If not, automatic behavior is to center the sphere in an intersection unless it's range 0\r\n        return this.range > 0;\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    // When the Diagram is rendered for the first time, draw the canvas\r\n    this.draw();\r\n  },\r\n  updated() {\r\n    // When the Diagram is updated (because the user clicked on another spell), re-draw the canvas\r\n    this.draw();\r\n  },\r\n  methods: {\r\n    draw() {\r\n      if (!this.enabled) return;\r\n      if (this.aoe && this.aoe.type == \"cone\" && !this.aoe.angle) {\r\n        this.aoe.angle = 0;\r\n      }\r\n      const canvas = document.getElementById(\"diagram\");\r\n      const ctx = canvas.getContext(\"2d\");\r\n      ctx.font = \"12px Ubuntu\";\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height); // Remove any previous drawings\r\n      ctx.setLineDash([]); // Remove any previous line dash\r\n      this.positionCaster();\r\n      this.positionTarget();\r\n      this.drawGrid(ctx);\r\n      this.drawAOE(ctx);\r\n      this.drawCaster(ctx);\r\n      this.drawTarget(ctx);\r\n    },\r\n    drawGrid(ctx) {\r\n      ctx.lineWidth = 2;\r\n      ctx.strokeStyle = \"#333\";\r\n      const rowCount = this.rows,\r\n        colCount = this.cols;\r\n      const maxX = this.width,\r\n        maxY = this.height;\r\n      for (let rowNumber = 0; rowNumber <= rowCount; rowNumber++) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, margin + rowNumber * cellSize);\r\n        ctx.lineTo(maxX, margin + rowNumber * cellSize);\r\n        ctx.stroke();\r\n      }\r\n      for (let colNumber = 0; colNumber <= colCount; colNumber++) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(margin + colNumber * cellSize, 0);\r\n        ctx.lineTo(margin + colNumber * cellSize, maxY);\r\n        ctx.stroke();\r\n      }\r\n      //Simulate a \"fade\" effect on the edges using a dark gradient\r\n      [\r\n        // [gradientOriginX, gradientOriginY, gradientEndX, gradientEndY]\r\n        [0, 0, fade, 0], // Left edge\r\n        [maxX, 0, maxX - fade, 0], // Right edge\r\n        [0, 0, 0, fade], // Top edge\r\n        [0, maxY, 0, maxY - fade], // Bottom edge\r\n      ].forEach((p) => {\r\n        var grd = ctx.createLinearGradient(p[0], p[1], p[2], p[3]);\r\n        grd.addColorStop(0, \"#1b1b1bff\");\r\n        grd.addColorStop(1, \"#1b1b1b00\");\r\n        ctx.fillStyle = grd;\r\n        ctx.fillRect(0, 0, maxX, maxY);\r\n      });\r\n    },\r\n    positionCaster() {\r\n      this.caster = {\r\n        x: margin + cellSize * 1.5,\r\n        y: margin + (cellSize * this.rows) / 2,\r\n      };\r\n      // If the AOE is big enough to include the caster, we need to make more room to the left of the caster to draw the AOE\r\n      if (this.aoe) {\r\n        switch (this.aoe.type) {\r\n          case \"sphere\":\r\n            this.caster.x += Math.max(\r\n              (this.range - this.aoe.radius + feetPerCell) * -pixelsPerFoot,\r\n              0\r\n            );\r\n            break;\r\n          case \"cube\":\r\n            // The cube never includes the caster (technically it could, but on the diagram we always show the point of origin on the left side of the cube)\r\n            break;\r\n          case \"cone\":\r\n            this.caster.x += Math.max(\r\n              (this.range -\r\n                Math.ceil(\r\n                  (this.aoe.length * coneSideLengthMultiplier * 0.95) /\r\n                    feetPerCell\r\n                ) *\r\n                  feetPerCell) *\r\n                -pixelsPerFoot,\r\n              0\r\n            ); // 0.95 fixes off-center caster\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    positionTarget() {\r\n      this.target = {\r\n        x: this.caster.x + this.range * pixelsPerFoot,\r\n        y: this.caster.y,\r\n      };\r\n      if (this.aoe) {\r\n        switch (this.aoe.type) {\r\n          case \"cone\":\r\n            const angleInDegrees = this.aoe.angle / (Math.PI / 180);\r\n            // Target position within the cell depends on the direction of the cone\r\n            if (angleInDegrees < 45 || angleInDegrees >= 315) {\r\n              this.target.x += cellSize / 2;\r\n              this.target.y += (Math.tan(this.aoe.angle) * cellSize) / 2;\r\n            } else if (angleInDegrees >= 45 && angleInDegrees < 135) {\r\n              this.target.x -=\r\n                (Math.tan(this.aoe.angle - Math.PI / 2) * cellSize) / 2;\r\n              this.target.y += cellSize / 2;\r\n            } else if (angleInDegrees >= 135 && angleInDegrees < 225) {\r\n              this.target.x -= cellSize / 2;\r\n              this.target.y -= (Math.tan(this.aoe.angle) * cellSize) / 2;\r\n            } else {\r\n              // 225 to 315\r\n              this.target.x -=\r\n                (Math.tan((3 * Math.PI) / 2 - this.aoe.angle) * cellSize) / 2;\r\n              this.target.y -= cellSize / 2;\r\n            }\r\n            break;\r\n          case \"cube\":\r\n            this.target.x += cellSize / 2;\r\n            if (this.aoe.edge % 10 == 0) {\r\n              this.target.y += cellSize / 2;\r\n            }\r\n            break;\r\n          case \"sphere\":\r\n            // Target should be a grid intersection point instead of the center of a cell, unless it's range 0 (centered on caster)\r\n            // or the data source explicitly demands that it's centered on a cell.\r\n            if (this.isCenteredInIntersection) {\r\n              this.target.x += cellSize / 2;\r\n              this.target.y += cellSize / 2;\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    drawAOE(ctx) {\r\n      const target = this.target;\r\n      if (this.aoe) {\r\n        ctx.setLineDash([4, 6]); // 5px long, 3px separated\r\n        switch (this.aoe.type) {\r\n          case \"sphere\":\r\n            if (this.aoe.radius <= maxAOERadius) {\r\n              const radiusInPixels = this.aoe.radius * pixelsPerFoot;\r\n              ctx.beginPath();\r\n              ctx.strokeStyle = \"#ff444444\";\r\n              ctx.arc(target.x, target.y, radiusInPixels, 0, 2 * Math.PI);\r\n              ctx.stroke();\r\n              ctx.fillStyle = \"#ccc\";\r\n              const textOffsetY = this.isCenteredInIntersection ? 4 : 13; // Place the text right above the sphere\r\n              ctx.fillText(\r\n                this.aoe.radius + \"-foot radius\",\r\n                target.x - 38,\r\n                target.y - radiusInPixels - textOffsetY\r\n              ); // 38 and 4 are values to roughly center the text\r\n              // Highligh individual squares\r\n              ctx.setLineDash([]);\r\n              ctx.strokeStyle = \"#913a3a\";\r\n              const offset = this.isCenteredInIntersection ? 0 : cellSize / 2; // If the sphere is centered on an intersection, add an offset\r\n              for (\r\n                let x = target.x - radiusInPixels - offset;\r\n                x < target.x + radiusInPixels;\r\n                x += pixelsPerCell\r\n              ) {\r\n                for (\r\n                  let y = target.y - radiusInPixels - offset;\r\n                  y < target.y + radiusInPixels;\r\n                  y += pixelsPerCell\r\n                ) {\r\n                  // Highlight a cell only if its center point is within the circle (distanceToCenter < radius)\r\n                  if (\r\n                    Math.sqrt(\r\n                      Math.pow(target.x - x - cellSize / 2, 2) +\r\n                        Math.pow(target.y - y - cellSize / 2, 2)\r\n                    ) <= radiusInPixels\r\n                  ) {\r\n                    ctx.beginPath();\r\n                    ctx.rect(x, y, cellSize, cellSize);\r\n                    ctx.stroke();\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            break;\r\n          case \"cube\": {\r\n            const halfEdge = this.aoe.edge / 2;\r\n            if (halfEdge <= maxAOERadius) {\r\n              ctx.beginPath();\r\n              ctx.strokeStyle = \"#913a3a\";\r\n              ctx.rect(\r\n                target.x,\r\n                target.y - halfEdge * pixelsPerFoot,\r\n                this.aoe.edge * pixelsPerFoot,\r\n                this.aoe.edge * pixelsPerFoot\r\n              );\r\n              ctx.stroke();\r\n              ctx.fillStyle = \"#ccc\";\r\n              ctx.fillText(\r\n                this.aoe.edge + \"-foot cube\",\r\n                target.x + halfEdge * pixelsPerFoot - 38,\r\n                target.y - halfEdge * pixelsPerFoot - 4\r\n              );\r\n              // Highligh individual squares\r\n              ctx.setLineDash([]);\r\n              for (\r\n                let x = target.x;\r\n                x < target.x + this.aoe.edge * pixelsPerFoot;\r\n                x += pixelsPerCell\r\n              ) {\r\n                for (\r\n                  let y = target.y - halfEdge * pixelsPerFoot;\r\n                  y < target.y + halfEdge * pixelsPerFoot;\r\n                  y += pixelsPerCell\r\n                ) {\r\n                  ctx.beginPath();\r\n                  ctx.rect(x, y, cellSize, cellSize);\r\n                  ctx.stroke();\r\n                }\r\n              }\r\n            }\r\n            break;\r\n          }\r\n          case \"cone\":\r\n            if (this.aoe.length <= maxAOERadius) {\r\n              const angle1 = this.aoe.angle - coneAmplitude / 2;\r\n              const angle2 = this.aoe.angle + coneAmplitude / 2;\r\n              const origin = { x: target.x, y: target.y };\r\n              ctx.strokeStyle = \"#913a3a\";\r\n              // Draw the triangle\r\n              const coneSideLengthPixels =\r\n                this.aoe.length * pixelsPerFoot * coneSideLengthMultiplier;\r\n              const end1 = {\r\n                x: origin.x + Math.cos(angle1) * coneSideLengthPixels,\r\n                y: origin.y + Math.sin(angle1) * coneSideLengthPixels,\r\n              };\r\n              ctx.beginPath();\r\n              ctx.moveTo(origin.x, origin.y);\r\n              ctx.lineTo(end1.x, end1.y);\r\n              ctx.stroke();\r\n              const end2 = {\r\n                x: origin.x + Math.cos(angle2) * coneSideLengthPixels,\r\n                y: origin.y + Math.sin(angle2) * coneSideLengthPixels,\r\n              };\r\n              ctx.beginPath();\r\n              ctx.moveTo(origin.x, origin.y);\r\n              ctx.lineTo(end2.x, end2.y);\r\n              ctx.stroke();\r\n              ctx.lineTo(end1.x, end1.y);\r\n              ctx.stroke();\r\n              // Highligh individual squares\r\n              ctx.setLineDash([]);\r\n              // Narrow down the cells that are candidates to be highlighted to minimize the amount of intersection calculations we have to do\r\n              const minX = Math.min(origin.x, end1.x, end2.x),\r\n                maxX = Math.max(origin.x, end1.x, end2.x);\r\n              const minY = Math.min(origin.y, end1.y, end2.y),\r\n                maxY = Math.max(origin.y, end1.y, end2.y);\r\n              for (\r\n                let x =\r\n                  margin + Math.floor((minX - margin) / cellSize) * cellSize;\r\n                x < Math.ceil((maxX - margin) / cellSize) * cellSize;\r\n                x += pixelsPerCell\r\n              ) {\r\n                for (\r\n                  let y =\r\n                    margin + Math.floor((minY - margin) / cellSize) * cellSize;\r\n                  y < Math.ceil((maxY - margin) / cellSize) * cellSize;\r\n                  y += pixelsPerCell\r\n                ) {\r\n                  // A cell is highlighted if the cell center point is within the cone triangle OR any of the triangle edges touches the cell's inscribed circle\r\n                  // Relevant discussion: https://rpg.stackexchange.com/questions/46492/how-do-i-map-a-15-cone-to-a-1-grid\r\n                  if (\r\n                    Geometry.pointIsWithinTriangle(\r\n                      x + cellSize / 2,\r\n                      y + cellSize / 2,\r\n                      origin.x,\r\n                      origin.y,\r\n                      end1.x,\r\n                      end1.y,\r\n                      end2.x,\r\n                      end2.y\r\n                    ) ||\r\n                    Geometry.segmentIntersectsCircle(\r\n                      origin.x,\r\n                      origin.y,\r\n                      end1.x,\r\n                      end1.y,\r\n                      x + cellSize / 2,\r\n                      y + cellSize / 2,\r\n                      cellSize / 2\r\n                    ) ||\r\n                    Geometry.segmentIntersectsCircle(\r\n                      origin.x,\r\n                      origin.y,\r\n                      end2.x,\r\n                      end2.y,\r\n                      x + cellSize / 2,\r\n                      y + cellSize / 2,\r\n                      cellSize / 2\r\n                    ) ||\r\n                    Geometry.segmentIntersectsCircle(\r\n                      end1.x,\r\n                      end1.y,\r\n                      end2.x,\r\n                      end2.y,\r\n                      x + cellSize / 2,\r\n                      y + cellSize / 2,\r\n                      cellSize / 2\r\n                    )\r\n                  ) {\r\n                    ctx.beginPath();\r\n                    ctx.rect(x, y, cellSize, cellSize);\r\n                    ctx.stroke();\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    drawCaster(ctx) {\r\n      const caster = this.caster;\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = \"#9bd0ff\";\r\n      ctx.arc(caster.x, caster.y, circleRadius, 0, 2 * Math.PI);\r\n      ctx.stroke();\r\n    },\r\n    drawTarget(ctx) {\r\n      const caster = this.caster,\r\n        target = this.target;\r\n      if (this.range >= minRange) {\r\n        // Draw the target mob\r\n        if (!this.aoe) {\r\n          ctx.beginPath();\r\n          ctx.strokeStyle = \"#f44\";\r\n          if (this.aoe) {\r\n            ctx.arc(\r\n              target.x - cellSize / 2,\r\n              target.y - cellSize / 2,\r\n              circleRadius,\r\n              0,\r\n              2 * Math.PI\r\n            );\r\n          } else {\r\n            ctx.arc(target.x, target.y, circleRadius, 0, 2 * Math.PI);\r\n          }\r\n          ctx.stroke();\r\n        }\r\n\r\n        // Draw the line connecting caster and target\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = \"#ccc\";\r\n        ctx.moveTo(caster.x + circleRadius, caster.y);\r\n        ctx.lineTo(this.aoe ? target.x : target.x - circleRadius, target.y); // unless spell is AOE, end the line a bit earlier so that it doesn't overlap the mob circle\r\n        ctx.setLineDash([4, 6]); // 4px long, 6px separated\r\n        ctx.stroke();\r\n        // Add range legend above the line\r\n        ctx.fillStyle = \"#ccc\";\r\n        ctx.fillText(\r\n          this.range + \" feet\",\r\n          caster.x + (this.range * pixelsPerFoot) / 2 - 20,\r\n          caster.y - cellSize / 2\r\n        ); // -20px is to roughly center the text\r\n      }\r\n    },\r\n    // Calculate the optimal amount of grid rows that should be used to represent this spell\r\n    getOptimalRowAmount() {\r\n      if (this.aoe) {\r\n        switch (this.aoe.type) {\r\n          case \"sphere\":\r\n            return this.aoe.radius <= maxAOERadius\r\n              ? 3 +\r\n                  Math.max(\r\n                    Math.ceil((this.aoe.radius - feetPerCell) / feetPerCell) *\r\n                      2,\r\n                    0\r\n                  )\r\n              : 3;\r\n          case \"cube\":\r\n            return this.aoe.edge / 2 <= maxAOERadius\r\n              ? 3 + Math.max(Math.ceil(this.aoe.edge / 2 / feetPerCell) * 2, 0)\r\n              : 3;\r\n          case \"cone\":\r\n            return this.aoe.length <= maxAOERadius\r\n              ? 3 +\r\n                  Math.max(\r\n                    Math.ceil(\r\n                      (this.aoe.length * coneSideLengthMultiplier -\r\n                        feetPerCell) /\r\n                        feetPerCell\r\n                    ) * 2,\r\n                    0\r\n                  )\r\n              : 3;\r\n          default:\r\n            throw \"Unrecognized AOE type: \" + this.aoe.type;\r\n        }\r\n      }\r\n      return 3;\r\n    },\r\n    // Calculate the optimal amount of grid cols that should be used to represent this spell\r\n    getOptimalColAmount() {\r\n      let baseCols = this.range / feetPerCell + 3;\r\n      if (this.aoe) {\r\n        switch (this.aoe.type) {\r\n          case \"sphere\":\r\n            return this.aoe.radius <= maxAOERadius\r\n              ? Math.max(\r\n                  Math.ceil(this.aoe.radius / feetPerCell - 1) + baseCols,\r\n                  (this.aoe.radius * 2) / feetPerCell + 1\r\n                )\r\n              : baseCols;\r\n          case \"cube\": {\r\n            let cols =\r\n              this.aoe.edge / 2 <= maxAOERadius\r\n                ? Math.ceil(this.aoe.edge / feetPerCell) + baseCols\r\n                : baseCols;\r\n            if (this.aoe.edge < 15) {\r\n              // Prevent text from escaping the diagram if the cube is small\r\n              cols += 1;\r\n            }\r\n            return cols;\r\n          }\r\n          case \"cone\":\r\n            return this.aoe.length <= maxAOERadius\r\n              ? Math.max(\r\n                  Math.ceil(\r\n                    (this.aoe.length * coneSideLengthMultiplier) / feetPerCell -\r\n                      1\r\n                  ) + baseCols,\r\n                  (this.aoe.length * 2) / feetPerCell + 5\r\n                )\r\n              : baseCols;\r\n          default:\r\n            throw \"Unrecognized AOE type: \" + this.aoe.type;\r\n        }\r\n      }\r\n      return baseCols;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Diagram.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Diagram.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Diagram.vue?vue&type=template&id=93d88b32&\"\nimport script from \"./Diagram.vue?vue&type=script&lang=js&\"\nexport * from \"./Diagram.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Diagram.vue?vue&type=style&index=0&id=93d88b32&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'.\r\n\r\n// This static class handles some text transformations to make descriptions prettier\r\nclass TextBeautifier {\r\n  // Colorize different keyword types within the text\r\n  static colorize(text) {\r\n    for (let sub of this.substitutions) {\r\n      text = text.replace(sub[0], sub[1]);\r\n    }\r\n    return text;\r\n  }\r\n\r\n  // Add the average of multi-die rolls as ruby text\r\n  static addDieAverages(text) {\r\n    /*for (let match of text.matchAll(/<span class=\"sx-die\">(.*?)<\\/span>/g)) {\r\n      const parts = match[1].split(\"d\");\r\n      const amount = parseInt(parts[0]);\r\n      if (!amount || amount < 2) continue;\r\n      const sides = parseInt(parts[1]);\r\n      text = text.replace(\r\n        match[0],\r\n        `<span class=\"sx-die\"><ruby>${match[1]}<rt>${\r\n          (amount * (sides + 1)) / 2\r\n        }</rt></ruby></span>`\r\n      );\r\n    }*/\r\n    return text;\r\n  }\r\n\r\n  // Add the 'table' class to tables for bootstrap CSS formatting\r\n  static styleTables(text) {\r\n    if (text.includes(\"<table>\")) {\r\n      return text.replace(/<table>/g, '<table class=\"table\">');\r\n    }\r\n    return text;\r\n  }\r\n\r\n  static addRuleLinks(text) {\r\n    return text.replace(\r\n      this.rulesRegex,\r\n      '<span class=\"dynamic-link\">$1</span>'\r\n    );\r\n  }\r\n\r\n  // Apply all transformations\r\n  static beautify(text) {\r\n    return this.styleTables(\r\n      this.addDieAverages(this.colorize(this.addRuleLinks(text)))\r\n    );\r\n  }\r\n}\r\nTextBeautifier.substitutions = [\r\n  [/([\\d,]+[- ](f[eo]{2}t|miles?))/g, '<span class=\"sx-distance\">$1</span>'],\r\n  [\r\n    /(\\d+[- ](rounds?|hours?|minutes?|days?))/g,\r\n    '<span class=\"sx-time\">$1</span>',\r\n  ],\r\n  [/(\\d+[- ](pounds?))/g, '<span class=\"sx-weight\">$1</span>'],\r\n  [\r\n    /(DC|(([Ss]trength|[Dd]exterity|[Cc]onstitution|[Ii]ntelligence|[Ww]isdom|[Cc]harisma)? saving throws?)|\\w*? \\(\\w+?\\) checks?)/g,\r\n    '<span class=\"sx-sthrow\">$1</span>',\r\n  ],\r\n  [/([^\\w](advantage)[^\\w])/g, '<span class=\"sx-advantage\">$1</span>'],\r\n  [/([^\\w](disadvantage)[^\\w])/g, '<span class=\"sx-disadvantage\">$1</span>'],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Bb]ludgeoning\\s+damage)/g,\r\n    '<span class=\"sx-weapon\">$1<img src=\"https://bg3.wiki/w/images/thumb/7/7d/Bludgeoning_Damage_Icon.png/30px-Bludgeoning_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Pp]iercing\\s+damage)/g,\r\n    '<span class=\"sx-weapon\">$1<img src=\"https://bg3.wiki/w/images/thumb/0/0b/Piercing_Damage_Icon.png/30px-Piercing_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Ss]lashing\\s+damage)/g,\r\n    '<span class=\"sx-weapon\">$1<img src=\"https://bg3.wiki/w/images/thumb/f/f0/Slashing_Damage_Icon.png/30px-Slashing_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Cc]old\\s+damage)/g,\r\n    '<span class=\"sx-cold\">$1<img src=\"https://bg3.wiki/w/images/thumb/0/05/Cold_Damage_Icon.png/30px-Cold_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Ff]orce\\s+damage)/g,\r\n    '<span class=\"sx-force\">$1<img src=\"https://bg3.wiki/w/images/thumb/d/d1/Force_Damage_Icon.png/30px-Force_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Ff]ire\\s+damage)/g,\r\n    '<span class=\"sx-fire\">$1<img src=\"https://bg3.wiki/w/images/thumb/8/84/Fire_Damage_Icon.png/30px-Fire_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Tt]hunder\\s+damage)/g,\r\n    '<span class=\"sx-thunder\">$1<img src=\"https://bg3.wiki/w/images/thumb/8/87/Thunder_Damage_Icon.png/30px-Thunder_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Ll]ightning\\s+damage)/g,\r\n    '<span class=\"sx-lightning\">$1<img src=\"https://bg3.wiki/w/images/thumb/3/31/Lightning_Damage_Icon.png/30px-Lightning_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Aa]cid\\s+damage)/g,\r\n    '<span class=\"sx-acid\">$1<img src=\"https://bg3.wiki/w/images/thumb/5/5f/Acid_Damage_Icon.png/30px-Acid_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Pp]oison\\s+damage)/g,\r\n    '<span class=\"sx-poison\">$1<img src=\"https://bg3.wiki/w/images/thumb/5/55/Poison_Damage_Icon.png/30px-Poison_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Rr]adiant\\s+damage)/g,\r\n    '<span class=\"sx-radiant\">$1<img src=\"https://bg3.wiki/w/images/thumb/7/78/Radiant_Damage_Icon.png/30px-Radiant_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Nn]ecrotic\\s+damage)/g,\r\n    '<span class=\"sx-necrotic\">$1<img src=\"https://bg3.wiki/w/images/thumb/3/39/Necrotic_Damage_Icon.png/30px-Necrotic_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [\r\n    /(\\d+d\\d+)\\s+([Pp]sychic\\s+damage)/g,\r\n    '<span class=\"sx-psychic\">$1<img src=\"https://bg3.wiki/w/images/thumb/0/04/Psychic_Damage_Icon.png/30px-Psychic_Damage_Icon.png\">$2</span>',\r\n  ],\r\n  [/((melee|ranged)( spell)? attacks?)/g, '<span class=\"sx-attack\">$1</span>'],\r\n  [/\\bby\\s(\\d*?d\\d+)/g, 'by <span class=\"sx-die\">$1</span>'],\r\n  [/\\((\\d+d\\d+)\\)/g, '(<span class=\"sx-die\">$1</span>)'],\r\n];\r\nTextBeautifier.rulesRegex =\r\n  /(blinded|blindsight|bright light|charmed|darkvision|deafened|dim light|exhaustion|frightened|heavily obscured|grappled|incapacitated|invisible|lightly obscured|paralyzed|petrified|poisoned|prone|restrained|stunned|truesight|unconscious)/g;\r\nexport default TextBeautifier;\r\n","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"spell-details\">\r\n    <div class=\"spell-head\">\r\n      <img\r\n        :src=\"icons.schoolIcon(spell)\"\r\n        class=\"spell-school clickable\"\r\n        @click=\"helpFor('schools')\"\r\n        title=\"School\"\r\n      />\r\n      <div class=\"spell-title\">\r\n        <div class=\"spell-name\">{{ spell.name }}</div>\r\n        <div class=\"spell-type\">{{ prettyLevel }} {{ spell.school }}</div>\r\n      </div>\r\n      <div class=\"spell-actions\">\r\n        <div\r\n          class=\"spell-close d-none d-md-block\"\r\n          @click=\"$emit('clear-spell')\"\r\n        >\r\n          <img src=\"@/assets/images/icons/misc/close.png\" />\r\n        </div>\r\n        <div\r\n          :class=\"`spell-favorite ${favorited() ? 'favorited' : ''}`\"\r\n          @click=\"favoriteSpell\"\r\n        >\r\n          <img src=\"@/assets/images/icons/misc/favorite.png\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row spell-features\">\r\n      <div class=\"col-6 col-lg-4 col-xl-3\">\r\n        <router-link to=\"/rules/range\" title=\"Range\">\r\n          <img :src=\"icons.rangeIcon(spell)\" /> {{ spell.range }} </router-link\r\n        ><br />\r\n        <img :src=\"icons.durationIcon(spell)\" title=\"Duration\" />\r\n        {{ spell.duration }}<br />\r\n        <template v-if=\"spell.concentration\"\r\n          ><img\r\n            src=\"@/assets/images/icons/spell_features/concentration.png\"\r\n            title=\"Spell requires concentration\" />\r\n          Concentration<br\r\n        /></template>\r\n        <router-link to=\"/rules/casting-time\" title=\"Casting time\">\r\n          <img :src=\"icons.castingIcon(spell)\" />\r\n          {{ spell.casting }} </router-link\r\n        ><br />\r\n        <template v-if=\"spell.ritual\" title=\"Spell can be cast as ritual\"\r\n          ><img src=\"@/assets/images/icons/spell_features/ritual.png\" />\r\n          Ritual</template\r\n        >\r\n      </div>\r\n      <div class=\"col-6 col-lg-4 col-xl-3\">\r\n        <div @click=\"helpFor('classes')\" title=\"Classes\">\r\n          <img\r\n            v-for=\"icon in icons.classIcons(spell)\"\r\n            :src=\"`${icon}`\"\r\n            :key=\"icon\"\r\n            class=\"clickable\"\r\n          />\r\n        </div>\r\n        <div @click=\"helpFor('components')\" title=\"Components\">\r\n          <img\r\n            v-for=\"icon in icons.componentIcons(spell)\"\r\n            :src=\"icon\"\r\n            :key=\"icon\"\r\n            class=\"clickable\"\r\n          />\r\n        </div>\r\n        <template v-if=\"spell.atHigherLevel\">\r\n          <router-link\r\n            to=\"/rules/casting-a-spell-at-a-higher-level\"\r\n            title=\"Spell improves when cast with higher level slot\"\r\n          >\r\n            <img src=\"@/assets/images/icons/spell_features/scalable.png\" />\r\n            Scalable\r\n          </router-link>\r\n        </template>\r\n      </div>\r\n      <div class=\"d-none d-lg-block col-lg-4 col-xl-6\">\r\n        <div title=\"Which book/source this spell originates from\">\r\n          <router-link to=\"/content\">\r\n            <img src=\"@/assets/images/icons/spell_features/source.png\" />\r\n            {{ spell.location || spell.sourceName }}\r\n          </router-link>\r\n        </div>\r\n        <div\r\n          v-if=\"spell.material > 0\"\r\n          title=\"Materials\"\r\n          v-html=\"spell.materials\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"spell-description\"\r\n      v-html=\"prettyDescription\"\r\n      @click=\"handleDescriptionClick\"\r\n    ></div>\r\n    <div\r\n      v-if=\"spell.atHigherLevel\"\r\n      v-html=\"prettyHigherLevel\"\r\n      class=\"spell-higher\"\r\n    ></div>\r\n    <Diagram\r\n      :defaultRange=\"numericRange\"\r\n      :aoe=\"spell.aoe\"\r\n      title=\"Range visualization\"\r\n    />\r\n    <div class=\"d-block d-lg-none mobile-foot\">\r\n      <img\r\n        src=\"@/assets/images/icons/spell_features/source.png\"\r\n        title=\"Which book/source this spell originates from\"\r\n      />\r\n      {{ spell.location || spell.sourceName }}<br />\r\n      <div\r\n        v-if=\"spell.material > 0\"\r\n        title=\"Materials\"\r\n        v-html=\"prettyMaterials\"\r\n      ></div>\r\n    </div>\r\n    <HelpModal :app=\"app\" :topic=\"helpTopic\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HelpModal from \"./HelpModal.vue\";\r\nimport Diagram from \"./Diagram.vue\";\r\nimport Icons from \"@/util/icons.js\";\r\nimport TextBeautifier from \"@/util/textBeautifier.js\";\r\n\r\nexport default {\r\n  name: \"SpellView\",\r\n  components: {\r\n    HelpModal,\r\n    Diagram,\r\n  },\r\n  data() {\r\n    return {\r\n      helpTopic: null,\r\n    };\r\n  },\r\n  props: {\r\n    app: Object,\r\n    spell: Object,\r\n  },\r\n  computed: {\r\n    prettyLevel() {\r\n      var pretty;\r\n      switch (this.spell.level) {\r\n        case 0:\r\n          pretty = \"Cantrip\";\r\n          break;\r\n        case 1:\r\n          pretty = \"1st level\";\r\n          break;\r\n        case 2:\r\n          pretty = \"2nd level\";\r\n          break;\r\n        case 3:\r\n          pretty = \"3rd level\";\r\n          break;\r\n        default:\r\n          pretty = this.spell.level + \"th level\";\r\n      }\r\n      return pretty;\r\n    },\r\n    icons() {\r\n      return Icons;\r\n    },\r\n    prettyDescription() {\r\n      return TextBeautifier.beautify(this.spell.description || \"\");\r\n    },\r\n    prettyHigherLevel() {\r\n      // Regex: inject an <img> tag at the beginning of the string, or if there's a leading <p>, right after that instead\r\n      return TextBeautifier.colorize(this.spell.atHigherLevel || \"\").replace(\r\n        /^(<p>)?/,\r\n        `$1<img src=\"${require(\"@/assets/images/icons/spell_features/scalable.png\")}\"> `\r\n      );\r\n    },\r\n    // Applies only for the mobile version of this field, which is shown differently\r\n    prettyMaterials() {\r\n      return (this.spell.materials || \"\").replace(\r\n        /^(<p>)?/,\r\n        `$1<img src=\"${require(\"@/assets/images/icons/components/material.png\")}\"> `\r\n      );\r\n    },\r\n    // Returns an integer corresponding to the spell's range in feet, or 0 if it's Self/Touch/unrecognized\r\n    numericRange() {\r\n      if (this.aoe && this.aoe.range) {\r\n        // If the AOE has a manually overriden range, use that instead\r\n        return this.aoe.range;\r\n      } else {\r\n        // Parse the number of feet from the string\r\n        const match = this.spell.range.match(/(\\d+) feet/);\r\n        return match ? parseInt(match[1]) : 0;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    favorited() {\r\n      return this.app.settings.favorites.has(this.spell.codename);\r\n    },\r\n    helpFor(topic) {\r\n      this.helpTopic = topic;\r\n      this.$bvModal.show(\"helpModal\");\r\n    },\r\n    favoriteSpell() {\r\n      if (this.favorited()) {\r\n        this.app.settings.favorites.delete(this.spell.codename);\r\n      } else {\r\n        this.app.settings.favorites.add(this.spell.codename);\r\n      }\r\n      this.$forceUpdate(); // OPTIMIZE: Vue does not react to changes within the Set, so this was required. Look for a more elegant way?\r\n      this.app.settingsDatabase.saveToStorage();\r\n    },\r\n    handleDescriptionClick(evt) {\r\n      if (evt.target.className == \"dynamic-link\") {\r\n        this.$router.push(\"/rules/\" + evt.target.innerText.replace(/ /g, \"-\"));\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    // spell() {\r\n    //   // Make the dynamically generated links in the description work (OPTIMIZE: is there a more Vueish way to do this?)\r\n    //   console.log(document.getElementsByClassName(\"dynamic-link\"));\r\n    //   for (let dynamicLink of document.getElementsByClassName(\"dynamic-link\")) {\r\n    //     console.log(1);\r\n    //     dynamicLink.addEventListener('click', evt => {\r\n    //       this.$router.push('/rules/' + evt.currentTarget.innerText);\r\n    //     });\r\n    //   }\r\n    // }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.spell-details {\r\n  padding-top: 10px;\r\n  text-align: left;\r\n  font-size: 16px;\r\n}\r\n.spell-head {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.spell-title {\r\n  padding-left: 10px;\r\n  width: 100%;\r\n}\r\n.spell-actions img {\r\n  width: 24px;\r\n  transition: filter 0.3s, opacity 0.3s;\r\n  opacity: 0.3;\r\n  filter: saturate(0%);\r\n}\r\n.favorited > img {\r\n  filter: saturate(100%);\r\n  opacity: 1;\r\n}\r\n.spell-actions > div {\r\n  cursor: pointer;\r\n  padding: 3px;\r\n}\r\n.spell-name {\r\n  font-size: 22px;\r\n  font-weight: bold;\r\n  color: white;\r\n}\r\n.spell-type {\r\n  font-size: 16px;\r\n  font-style: italic;\r\n}\r\n.spell-school {\r\n  flex-grow: 0;\r\n  height: 64px;\r\n}\r\n.spell-features {\r\n  margin: 5px 0px !important; /* It shows an unnecessary vertical scrollbar if margin-right is left inherited */\r\n  padding: 8px 0px;\r\n  border-top: 1px solid #333;\r\n  border-bottom: 1px solid #333;\r\n}\r\n.spell-features img,\r\n.mobile-foot img {\r\n  height: 26px;\r\n}\r\n.spell-features a {\r\n  color: white;\r\n}\r\n.spell-description {\r\n  text-align: justify;\r\n}\r\n.sx-die rt {\r\n  margin-bottom: -3px;\r\n  opacity: 0.3;\r\n}\r\n.spell-higher {\r\n  border: 1px dashed #686666;\r\n  padding: 10px;\r\n  margin-bottom: 10px;\r\n  border-radius: 8px;\r\n}\r\n.spell-higher img {\r\n  height: 22px;\r\n  margin-right: 4px;\r\n}\r\n.spell-higher p {\r\n  margin-bottom: 0;\r\n}\r\n.sx-distance {\r\n  color: #b3d0ff;\r\n}\r\n.sx-time {\r\n  color: #d3b3ff;\r\n}\r\n.sx-weight {\r\n  color: #ffb3b3;\r\n}\r\n.sx-sthrow {\r\n  color: #fff7b3;\r\n}\r\n.sx-advantage {\r\n  color: #b3ffb8;\r\n}\r\n.sx-disadvantage {\r\n  color: #ffb3b3;\r\n}\r\n.sx-life {\r\n  color: #ffb3b3;\r\n}\r\n.sx-cold {\r\n  color: #3399cc;\r\n}\r\n.sx-force {\r\n  color: #cc3333;\r\n}\r\n.sx-acid {\r\n  color: #80b000;\r\n}\r\n.sx-poison {\r\n  color: #44bb00;\r\n}\r\n.sx-radiant {\r\n  color: #ccaa00;\r\n}\r\n.sx-necrotic {\r\n  color: #40b050;\r\n}\r\n.sx-weapon {\r\n  color: #8c8c8c;\r\n}\r\n.sx-psychic {\r\n  color: #cc77aa;\r\n}\r\n.sx-thunder {\r\n  color: #8844bb;\r\n}\r\n.sx-fire {\r\n  color: #ee5500;\r\n}\r\n.sx-lightning {\r\n  color: #3366cc;\r\n}\r\n.sx-attack {\r\n  color: #ffcab3;\r\n}\r\n.sx-die {\r\n  color: #ffeab3;\r\n}\r\n\r\n/* Make favorite hover effect work only on non-touch devices, because otherwise it looks favorited after un-favoriting */\r\n@media (pointer: fine) {\r\n  .spell-close:hover img,\r\n  .spell-favorite:hover img {\r\n    filter: saturate(100%);\r\n    opacity: 1;\r\n  }\r\n}\r\n/* Make favorite button easier to touch on mobile */\r\n@media (max-width: 767px) {\r\n  .spell-favorite {\r\n    padding: 15px !important;\r\n  }\r\n  .spell-favorite > img {\r\n    width: 32px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpellView.vue?vue&type=template&id=551e85e8&\"\nimport script from \"./SpellView.vue?vue&type=script&lang=js&\"\nexport * from \"./SpellView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpellView.vue?vue&type=style&index=0&id=551e85e8&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"spell-editor scrollable-panel\"},[_c('div',{staticClass:\"row my-4\"},[_c('div',{staticClass:\"col-12 col-md-6 col-lg-3\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.spell.name),expression:\"spell.name\"}],staticClass:\"form-control font-weight-bold\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.spell.name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.spell, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"col-12 col-md-6 col-lg-3\"},[_c('CustomSelect',{attrs:{\"options\":_vm.schoolOptions},model:{value:(_vm.spell.school),callback:function ($$v) {_vm.$set(_vm.spell, \"school\", $$v)},expression:\"spell.school\"}})],1),_c('div',{staticClass:\"col-12 col-md-6 col-lg-3\"},[_c('CustomSelect',{attrs:{\"options\":_vm.levelOptions},model:{value:(_vm.spell.level),callback:function ($$v) {_vm.$set(_vm.spell, \"level\", _vm._n($$v))},expression:\"spell.level\"}})],1),_c('div',{staticClass:\"col-12 col-md-6 col-lg-3\"},[_c('CustomSelect',{attrs:{\"options\":_vm.sourceOptions},model:{value:(_vm.spell.sourceName),callback:function ($$v) {_vm.$set(_vm.spell, \"sourceName\", $$v)},expression:\"spell.sourceName\"}})],1)]),_c('div',{staticClass:\"row my-4\"},[_c('div',{staticClass:\"col-12 col-lg-6 col-xl-3\"},[_c('div',{staticClass:\"field-with-icon pr-3\"},[_c('img',{attrs:{\"src\":_vm.icons.rangeIcon(_vm.spell),\"alt\":\"\"}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.spell.range),expression:\"spell.range\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Range\"},domProps:{\"value\":(_vm.spell.range)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.spell, \"range\", $event.target.value)}}})]),_c('div',{staticClass:\"field-with-icon pr-3\"},[_c('img',{attrs:{\"src\":_vm.icons.durationIcon(_vm.spell),\"alt\":\"\"}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.spell.duration),expression:\"spell.duration\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Duration\"},domProps:{\"value\":(_vm.spell.duration)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.spell, \"duration\", $event.target.value)}}})]),_c('div',{staticClass:\"field-with-icon pr-3 mb-2\"},[_c('img',{attrs:{\"src\":_vm.icons.castingIcon(_vm.spell),\"alt\":\"\"}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.spell.casting),expression:\"spell.casting\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Casting time\"},domProps:{\"value\":(_vm.spell.casting)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.spell, \"casting\", $event.target.value)}}})])]),_c('div',{staticClass:\"col-12 col-lg-6 col-xl-3\"},[_c('Toggler',{attrs:{\"checked\":_vm.spell.concentration,\"text\":'Concentration',\"icon\":require('@/assets/images/icons/spell_features/concentration.png')},on:{\"toggle\":function($event){_vm.spell.concentration = !_vm.spell.concentration}}}),_c('Toggler',{attrs:{\"checked\":_vm.spell.ritual,\"text\":'Ritual',\"icon\":require('@/assets/images/icons/spell_features/ritual.png')},on:{\"toggle\":function($event){_vm.spell.ritual = !_vm.spell.ritual}}}),_c('Toggler',{attrs:{\"checked\":_vm.spell.atHigherLevel != null,\"text\":'Scalable',\"icon\":require('@/assets/images/icons/spell_features/scalable.png')},on:{\"toggle\":function($event){_vm.spell.atHigherLevel = _vm.spell.atHigherLevel == null ? '' : null}}})],1),_c('div',{staticClass:\"col-12 col-lg-6 col-xl-3\"},[_c('CustomSelect',{staticClass:\"se-materials mb-3\",attrs:{\"options\":_vm.materialOptions},model:{value:(_vm.spell.material),callback:function ($$v) {_vm.$set(_vm.spell, \"material\", _vm._n($$v))},expression:\"spell.material\"}}),_c('Toggler',{attrs:{\"checked\":_vm.spell.verbal,\"text\":'Verbal',\"icon\":require('@/assets/images/icons/components/verbal.png')},on:{\"toggle\":function($event){_vm.spell.verbal = !_vm.spell.verbal}}}),_c('Toggler',{attrs:{\"checked\":_vm.spell.somatic,\"text\":'Somatic',\"icon\":require('@/assets/images/icons/components/somatic.png')},on:{\"toggle\":function($event){_vm.spell.somatic = !_vm.spell.somatic}}})],1),_c('div',{staticClass:\"col-12 col-lg-6 col-xl-3 pl-4\"},[_c('div',{staticClass:\"row\"},_vm._l((_vm.classes),function(klass){return _c('Toggler',{key:klass,staticClass:\"col-6 class-toggler\",attrs:{\"checked\":_vm.spell.classes.includes(klass),\"text\":klass,\"icon\":_vm.icons.classIcon(klass)},on:{\"toggle\":function($event){return _vm.toggleClass(klass)}}})}),1)])]),_c('div',{staticClass:\"mt-4\"},[_vm._v(\"Description:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.spell.description),expression:\"spell.description\"}],staticClass:\"form-control\",attrs:{\"rows\":\"4\",\"placeholder\":\"Description\"},domProps:{\"value\":(_vm.spell.description)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.spell, \"description\", $event.target.value)}}}),(_vm.spell.atHigherLevel != null)?[_vm._m(0),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.spell.atHigherLevel),expression:\"spell.atHigherLevel\"}],staticClass:\"form-control\",attrs:{\"rows\":\"2\",\"placeholder\":\"At higher levels\"},domProps:{\"value\":(_vm.spell.atHigherLevel)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.spell, \"atHigherLevel\", $event.target.value)}}})]:_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.spell.material > 0),expression:\"spell.material > 0\"}]},[_vm._m(1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.spell.materials),expression:\"spell.materials\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Materials\"},domProps:{\"value\":(_vm.spell.materials)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.spell, \"materials\", $event.target.value)}}})]),_c('div',{staticClass:\"row mt-4\"},[_c('div',{staticClass:\"col-6 col-md-3\"},[_vm._v(\" Area of effect: \"),_c('CustomSelect',{attrs:{\"options\":_vm.aoeOptions},model:{value:(_vm.chosenAoeType),callback:function ($$v) {_vm.chosenAoeType=$$v},expression:\"chosenAoeType\"}})],1),(_vm.spell.aoe)?_c('div',{staticClass:\"col-6 col-md-3\"},[_vm._v(\" Size: \"),_c('b',[_vm._v(_vm._s(_vm.chosenAoeSize))]),_vm._v(\" feet \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.chosenAoeSize),expression:\"chosenAoeSize\",modifiers:{\"number\":true}}],attrs:{\"type\":\"range\",\"step\":\"5\",\"min\":\"5\",\"max\":\"120\"},domProps:{\"value\":(_vm.chosenAoeSize)},on:{\"__r\":function($event){_vm.chosenAoeSize=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]):_vm._e()]),_c('Diagram',{attrs:{\"defaultRange\":_vm.numericRange,\"aoe\":_vm.spell.aoe,\"title\":\"Range visualization\"}})],2)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mt-4\"},[_c('img',{staticClass:\"se-icon\",attrs:{\"src\":require(\"@/assets/images/icons/spell_features/scalable.png\"),\"alt\":\"\"}}),_vm._v(\" At higher levels:\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mt-4\"},[_c('img',{staticClass:\"se-icon\",attrs:{\"src\":require(\"@/assets/images/icons/components/material.png\"),\"alt\":\"\"}}),_vm._v(\" Materials:\")])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:`toggler ${_vm.checked ? '' : 'absent'}`,on:{\"click\":function($event){return _vm.$emit('toggle')}}},[_c('img',{staticClass:\"toggler-icon clickable\",attrs:{\"src\":_vm.icon,\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(_vm.text)+\" \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<!-- A simple checkbox-like component. -->\r\n<template>\r\n  <div :class=\"`toggler ${checked ? '' : 'absent'}`\" @click=\"$emit('toggle')\">\r\n    <img :src=\"icon\" class=\"toggler-icon clickable\" alt=\"\" /> {{ text }}\r\n  </div>\r\n</template>\r\n<style>\r\n.toggler {\r\n  text-transform: capitalize;\r\n  padding: 2px 4px;\r\n  cursor: pointer;\r\n  transition: opacity 0.2s;\r\n}\r\n.toggler.absent {\r\n  opacity: 0.25;\r\n}\r\n.toggler.absent:hover {\r\n  opacity: 0.4;\r\n}\r\n.toggler-icon {\r\n  height: 26px;\r\n}\r\n</style>\r\n<script>\r\nexport default {\r\n  name: \"Toggler\",\r\n  props: {\r\n    checked: Boolean,\r\n    text: String,\r\n    icon: String,\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Toggler.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Toggler.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Toggler.vue?vue&type=template&id=53b2d85a&\"\nimport script from \"./Toggler.vue?vue&type=script&lang=js&\"\nexport * from \"./Toggler.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Toggler.vue?vue&type=style&index=0&id=53b2d85a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"spell-editor scrollable-panel\">\r\n    <div class=\"row my-4\">\r\n      <div class=\"col-12 col-md-6 col-lg-3\">\r\n        <input type=\"text\" v-model=\"spell.name\" class=\"form-control font-weight-bold\"/>\r\n      </div>\r\n      <div class=\"col-12 col-md-6 col-lg-3\">\r\n        <CustomSelect v-model=\"spell.school\" :options=\"schoolOptions\"/>\r\n      </div>\r\n      <div class=\"col-12 col-md-6 col-lg-3\">\r\n        <CustomSelect v-model.number=\"spell.level\" :options=\"levelOptions\"/>\r\n      </div>\r\n      <div class=\"col-12 col-md-6 col-lg-3\">\r\n        <CustomSelect v-model=\"spell.sourceName\" :options=\"sourceOptions\"/>\r\n      </div>\r\n    </div>\r\n    <div class=\"row my-4\">\r\n      <div class=\"col-12 col-lg-6 col-xl-3\">\r\n        <div class=\"field-with-icon pr-3\">\r\n          <img :src=\"icons.rangeIcon(spell)\" alt=\"\"/>  <input type=\"text\" v-model=\"spell.range\" class=\"form-control\" placeholder=\"Range\"/>\r\n        </div>\r\n        <div class=\"field-with-icon pr-3\">\r\n          <img :src=\"icons.durationIcon(spell)\" alt=\"\"/>  <input type=\"text\" v-model=\"spell.duration\" class=\"form-control\" placeholder=\"Duration\"/>\r\n        </div>\r\n        <div class=\"field-with-icon pr-3 mb-2\">\r\n          <img :src=\"icons.castingIcon(spell)\" alt=\"\"/>  <input type=\"text\" v-model=\"spell.casting\" class=\"form-control\" placeholder=\"Casting time\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-lg-6 col-xl-3\">\r\n        <Toggler :checked=\"spell.concentration\" :text=\"'Concentration'\" :icon=\"require('@/assets/images/icons/spell_features/concentration.png')\" @toggle=\"spell.concentration = !spell.concentration\"/>\r\n        <Toggler :checked=\"spell.ritual\" :text=\"'Ritual'\" :icon=\"require('@/assets/images/icons/spell_features/ritual.png')\" @toggle=\"spell.ritual = !spell.ritual\"/>\r\n        <Toggler :checked=\"spell.atHigherLevel != null\" :text=\"'Scalable'\" :icon=\"require('@/assets/images/icons/spell_features/scalable.png')\" @toggle=\"spell.atHigherLevel = spell.atHigherLevel == null ? '' : null\"/>\r\n      </div>\r\n\r\n      <div class=\"col-12 col-lg-6 col-xl-3\">\r\n        <CustomSelect v-model.number=\"spell.material\" :options=\"materialOptions\" class=\"se-materials mb-3\"/>\r\n        <Toggler :checked=\"spell.verbal\" :text=\"'Verbal'\" :icon=\"require('@/assets/images/icons/components/verbal.png')\" @toggle=\"spell.verbal = !spell.verbal\"/>\r\n        <Toggler :checked=\"spell.somatic\" :text=\"'Somatic'\" :icon=\"require('@/assets/images/icons/components/somatic.png')\" @toggle=\"spell.somatic = !spell.somatic\"/>\r\n      </div>\r\n      <div class=\"col-12 col-lg-6 col-xl-3 pl-4\">\r\n        <div class=\"row\">\r\n          <Toggler v-for=\"klass in classes\" :key=\"klass\" :checked=\"spell.classes.includes(klass)\" :text=\"klass\" :icon=\"icons.classIcon(klass)\" @toggle=\"toggleClass(klass)\" class=\"col-6 class-toggler\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"mt-4\">Description:</div>\r\n    <textarea v-model=\"spell.description\" class=\"form-control\" rows=\"4\" placeholder=\"Description\"></textarea>\r\n    <template v-if=\"spell.atHigherLevel != null\">\r\n      <div class=\"mt-4\"><img src=\"@/assets/images/icons/spell_features/scalable.png\" class=\"se-icon\" alt=\"\"/> At higher levels:</div>\r\n      <textarea v-model=\"spell.atHigherLevel\" class=\"form-control\" rows=\"2\" placeholder=\"At higher levels\"></textarea>\r\n    </template>\r\n    <div v-show=\"spell.material > 0\">\r\n      <div class=\"mt-4\"><img src=\"@/assets/images/icons/components/material.png\" class=\"se-icon\" alt=\"\"/> Materials:</div>\r\n      <input type=\"text\" v-model=\"spell.materials\" class=\"form-control\" placeholder=\"Materials\"/>\r\n    </div>\r\n\r\n    <div class=\"row mt-4\">\r\n\r\n      <div class=\"col-6 col-md-3\">\r\n        Area of effect:\r\n        <CustomSelect v-model=\"chosenAoeType\" :options=\"aoeOptions\"/>\r\n      </div>\r\n      <!-- <div class=\"col-6 col-md-3\">\r\n        Range: <b>{{ spell.range }}</b> feet\r\n        <input type=\"range\" v-model.number=\"spell.range\" step=\"5\" min=\"0\" max=\"300\"/>\r\n      </div> -->\r\n      <div class=\"col-6 col-md-3\" v-if=\"spell.aoe\">\r\n        Size: <b>{{ chosenAoeSize }}</b> feet\r\n        <input type=\"range\" v-model.number=\"chosenAoeSize\" step=\"5\" min=\"5\" max=\"120\"/>\r\n      </div>\r\n    </div>\r\n\r\n    <Diagram :defaultRange=\"numericRange\" :aoe=\"spell.aoe\" title=\"Range visualization\"/>\r\n  </div>\r\n</template>\r\n<script>\r\nimport spellOptions from '@/util/spellOptions.js';\r\nimport CustomSelect from \"@/components/general/CustomSelect.vue\";\r\nimport constants from '@/util/constants.js';\r\nimport Icons from '@/util/icons.js';\r\nimport Diagram from './Diagram.vue';\r\nimport Toggler from '@/components/general/Toggler.vue';\r\nconst aoeSizeMap = { sphere: \"radius\", cube: \"edge\", cone: \"length\" }; // Defines the name of the size attribute corresponding to each AoE type\r\n\r\nexport default {\r\n  name: 'SpellEditor',\r\n  components: {\r\n    CustomSelect,\r\n    Diagram,\r\n    Toggler\r\n  },\r\n  props: {\r\n    app: Object,\r\n    spell: Object\r\n  },\r\n  data: () => { return {\r\n    chosenAoeType: '',\r\n    chosenAoeSize: 10\r\n  }},\r\n  computed: {\r\n    classOptions: () => spellOptions.classOptions,\r\n    levelOptions: () => spellOptions.levelOptions,\r\n    schoolOptions: () => spellOptions.schoolOptions,\r\n    materialOptions: () => spellOptions.materialOptions,\r\n    sourceOptions() {\r\n      return spellOptions.sourceOptions(this.app);\r\n    },\r\n    aoeOptions: () => spellOptions.aoeOptions,\r\n    icons() {\r\n      return Icons;\r\n    },\r\n    classes() {\r\n      return constants.classes;\r\n    },\r\n    // Returns an integer corresponding to the spell's range in feet, or 0 if it's Self/Touch/unrecognized\r\n    numericRange() {\r\n      if (this.aoe && this.aoe.range) {\r\n        // If the AOE has a manually overriden range, use that instead\r\n        return this.aoe.range;\r\n      } else {\r\n        // Parse the number of feet from the string\r\n        const match = this.spell.range.match(/(\\d+) feet/);\r\n        return match ? parseInt(match[1]) : 0;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // Given the name of a class, add/remove it from the spell being edited\r\n    toggleClass(klass) {\r\n      if (this.spell.classes.includes(klass)) {\r\n        this.spell.classes = this.spell.classes.filter(c => c != klass);\r\n      } else {\r\n        this.spell.classes.push(klass);\r\n      }\r\n    },\r\n    // Adds or removes the presence of an AoE for this spell\r\n    toggleSpellAoE() {\r\n      if (this.spell.aoe) {\r\n        delete this.spell.aoe;\r\n      } else {\r\n        this.$set(this.spell, \"aoe\", { type: \"sphere\", size: 10 });\r\n      }\r\n    },\r\n    // Loads the auxiliary AoE-related fields\r\n    loadAoeFields() {\r\n      if (this.spell.aoe) {\r\n        this.chosenAoeType = this.spell.aoe.type;\r\n        this.chosenAoeSize = this.spell.aoe[aoeSizeMap[this.chosenAoeType]];\r\n      } else {\r\n        this.chosenAoeType = '';\r\n        this.chosenAoeSize = 10;\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    // The reason we bind the AoE type CustomSelect to 'chosenAoeType' instead of 'spell.aoe.type'\r\n    // is that not all spells have the 'aoe' attribute to begin with. So this method handles the\r\n    // creation/removal of that attribute based on the user's choice.\r\n    chosenAoeType() {\r\n      if (this.chosenAoeType == '') { // If the user chose 'None'\r\n        delete this.spell.aoe;\r\n      } else {\r\n        const aoe = { type: this.chosenAoeType }\r\n        aoe[aoeSizeMap[this.chosenAoeType]] = this.chosenAoeSize;\r\n        this.$set(this.spell, 'aoe', aoe);\r\n      }\r\n    },\r\n    // The following 2 methods keep 'chosenAoeSize' and the corresponding 'aoe.xxx' attribute in sync\r\n    chosenAoeSize() {\r\n      if (this.spell.aoe) {\r\n        this.spell.aoe[aoeSizeMap[this.chosenAoeType]] = this.chosenAoeSize;\r\n      }\r\n    },\r\n    spell() {\r\n      this.loadAoeFields();\r\n    },\r\n    // If the name changes, we need to change the 2 autocalculated fields as well\r\n    \"spell.name\": function() {\r\n      this.spell.downcasedName = this.spell.name.toLowerCase();\r\n      this.spell.codename = this.spell.downcasedName.replace(/[/ ]/g, '-');\r\n    },\r\n    // Changing the sourceName attribute alone isn't enough, we need to move the spell to the target source's spell list\r\n    \"spell.sourceName\": function() {\r\n      this.app.contentDatabase.relocateSpell(this.spell);\r\n    }\r\n  },\r\n  created() {\r\n    this.loadAoeFields();\r\n  }\r\n}\r\n</script>\r\n<style>\r\n  .class-toggler {\r\n    height: 30px;\r\n    overflow: hidden;\r\n    word-break: break-all;\r\n  }\r\n  .field-with-icon {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .field-with-icon img {\r\n    flex-grow: 0;\r\n    height: 26px;\r\n  }\r\n  .field-with-icon input {\r\n    width: 0;\r\n    flex-grow: 1;\r\n  }\r\n  .se-materials > .cs-field, .se-materials > .cs-options {\r\n    text-transform: none;\r\n  }\r\n  .se-icon {\r\n    height: 26px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpellEditor.vue?vue&type=template&id=3d48a997&\"\nimport script from \"./SpellEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./SpellEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpellEditor.vue?vue&type=style&index=0&id=3d48a997&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div>\r\n    <SpellsToolbar\r\n      :app=\"app\"\r\n      :class=\"panelIsOpen ? 'd-none d-md-flex' : ''\"\r\n      :query=\"query\"\r\n      :selectedSpell=\"selectedSpell\"\r\n      :detailedModeOn=\"detailedModeOn\"\r\n      @toggle-detailed-view=\"toggleDetailedView\"\r\n      @navigate-spells=\"navigateSpells\"\r\n      @select-spell=\"\r\n        (s) => {\r\n          selectedSpell = s;\r\n        }\r\n      \"\r\n    />\r\n    <div class=\"row\">\r\n      <div\r\n        :class=\"\r\n          detailedModeOn\r\n            ? panelIsOpen\r\n              ? 'd-none'\r\n              : 'd-block col-12'\r\n            : panelIsOpen\r\n            ? 'col-md-6 col-lg-4 col-xl-3 d-none d-md-block'\r\n            : 'col-12'\r\n        \"\r\n      >\r\n        <SpellList\r\n          v-if=\"queryPresent\"\r\n          :app=\"app\"\r\n          :spells=\"filteredSpells\"\r\n          :panelIsOpen=\"panelIsOpen\"\r\n          :selectedSpell=\"selectedSpell\"\r\n          :detailedModeOn=\"detailedModeOn\"\r\n          @spell-clicked=\"openSpell\"\r\n        />\r\n        <div v-else class=\"list-message\">Type anything to search</div>\r\n      </div>\r\n      <template v-if=\"selectedSpell\">\r\n        <SpellEditor\r\n          v-if=\"app.editionModeOn\"\r\n          :app=\"app\"\r\n          :spell=\"selectedSpell\"\r\n          :class=\"`${\r\n            detailedModeOn ? 'col-12' : 'col-md-6 col-lg-8 col-xl-9'\r\n          } scrollable-panel`\"\r\n        />\r\n        <SpellView\r\n          v-else\r\n          :app=\"app\"\r\n          :spell=\"selectedSpell\"\r\n          @clear-spell=\"clearSpell\"\r\n          :class=\"`${\r\n            detailedModeOn ? 'col-12' : 'col-md-6 col-lg-8 col-xl-9'\r\n          } scrollable-panel`\"\r\n        />\r\n      </template>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SpellList from \"./SpellList.vue\";\r\nimport SpellsToolbar from \"./SpellsToolbar.vue\";\r\nimport SpellView from \"./SpellView.vue\";\r\nimport SpellEditor from \"./SpellEditor.vue\";\r\n\r\nexport default {\r\n  name: \"SpellsPage\",\r\n  components: {\r\n    SpellList,\r\n    SpellsToolbar,\r\n    SpellView,\r\n    SpellEditor,\r\n  },\r\n  props: {\r\n    app: Object,\r\n    urlSpellName: String,\r\n  },\r\n  data() {\r\n    return {\r\n      query: {\r\n        text: \"\",\r\n        level: \"\",\r\n        class: \"\",\r\n        school: \"\",\r\n        sourceName: \"\",\r\n        includeDescription: false,\r\n        favorites: false,\r\n      },\r\n      selectedSpell: null,\r\n      detailedModeOn: false,\r\n    };\r\n  },\r\n  computed: {\r\n    // True if a spell's detailed view is open\r\n    panelIsOpen() {\r\n      return this.selectedSpell != null;\r\n    },\r\n    // The list of spells that match the user's query\r\n    filteredSpells() {\r\n      if (this.queryPresent) {\r\n        return this.app.spells.filter((spell) => {\r\n          if (\r\n            this.query.class ||\r\n            this.query.level ||\r\n            this.query.school ||\r\n            this.query.sourceName ||\r\n            this.query.favorites\r\n          ) {\r\n            // Composite search (with filters)\r\n            return (\r\n              (spell.codename.includes(this.query.text) ||\r\n                (this.query.includeDescription &&\r\n                  spell.description.includes(this.query.text))) &&\r\n              (!this.query.class || spell.classes.includes(this.query.class)) &&\r\n              (!this.query.level || spell.level == this.query.level) &&\r\n              (!this.query.school || spell.school == this.query.school) &&\r\n              (!this.query.sourceName ||\r\n                spell.sourceName == this.query.sourceName) &&\r\n              (!this.query.favorites ||\r\n                this.app.settings.favorites.has(spell.codename))\r\n            );\r\n          } else {\r\n            // Simple search (no filters)\r\n            return (\r\n              this.query.text.length >= this.app.settings.minimumQueryLength &&\r\n              (spell.downcasedName.includes(this.query.text) ||\r\n                (this.query.includeDescription &&\r\n                  spell.description.toLowerCase().includes(this.query.text)))\r\n            );\r\n          }\r\n        });\r\n      } else {\r\n        return [];\r\n      }\r\n    },\r\n    // Returns whether the user has entered any valid query\r\n    queryPresent() {\r\n      return (\r\n        this.query.text.length >= this.app.settings.minimumQueryLength ||\r\n        this.query.class ||\r\n        this.query.level ||\r\n        this.query.school ||\r\n        this.query.sourceName\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    openSpell(key) {\r\n      if (this.selectedSpell && this.selectedSpell.codename == key) {\r\n        // Do nothing if the spell is already selected\r\n        return;\r\n      }\r\n      // Save the currently opened spell in the URL. This has two benefits:\r\n      // - Each spell can be directly accessed by its own URL\r\n      // - Going back in history takes us back to the spell we were before, or to the list if none. This is essential in mobile so that the back button doesn't make us leave the spells page, but return to the list.\r\n      this.$router.push(\"/spells/\" + key);\r\n    },\r\n    clearSpell() {\r\n      this.$router.push(\"/spells\");\r\n    },\r\n    toggleDetailedView() {\r\n      this.detailedModeOn = !this.detailedModeOn;\r\n      if (this.detailedModeOn) {\r\n        this.clearSpell();\r\n      }\r\n    },\r\n    loadSpellInURL() {\r\n      if (this.urlSpellName) {\r\n        this.selectedSpell = this.app.spells.find(\r\n          (s) => s.codename == this.urlSpellName\r\n        );\r\n      } else {\r\n        this.selectedSpell = null;\r\n      }\r\n    },\r\n    // Allow the user to navigate through the spell list using the arrow keys\r\n    navigateSpells(direction) {\r\n      const indexOfTheCurrentSpell = this.filteredSpells.indexOf(\r\n        this.selectedSpell\r\n      );\r\n      if (direction == \"up\") {\r\n        if (indexOfTheCurrentSpell > 0) {\r\n          this.openSpell(\r\n            this.filteredSpells[indexOfTheCurrentSpell - 1].codename\r\n          );\r\n        }\r\n      } else {\r\n        if (indexOfTheCurrentSpell < this.filteredSpells.length - 1) {\r\n          this.openSpell(\r\n            this.filteredSpells[indexOfTheCurrentSpell + 1].codename\r\n          );\r\n        }\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    // If the URL contains a spell, display it\r\n    this.loadSpellInURL();\r\n  },\r\n  watch: {\r\n    $route: function () {\r\n      this.loadSpellInURL();\r\n    },\r\n  },\r\n  metaInfo() {\r\n    if (this.selectedSpell) {\r\n      const spellDescriptionWithoutHTML =\r\n        this.selectedSpell.description.replace(/<\\/?[^>]+>/g, \"\");\r\n      return {\r\n        title: this.selectedSpell.name + \" - WeaveLore\",\r\n        meta: [\r\n          {\r\n            vmid: \"description\",\r\n            name: \"description\",\r\n            content:\r\n              spellDescriptionWithoutHTML.length > 300\r\n                ? spellDescriptionWithoutHTML.substring(0, 300) + \"...\"\r\n                : spellDescriptionWithoutHTML,\r\n          },\r\n        ],\r\n      };\r\n    } else {\r\n      return {}; // Use the default data defined in App.vue\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.spells {\r\n  max-height: calc(100vh - 90px);\r\n}\r\n.spell-details,\r\n.spell-editor {\r\n  height: calc(100vh - 90px);\r\n}\r\n@media (max-width: 767px) {\r\n  /* On mobile, the spell list is further down because the search filters take up two rows instead of one */\r\n  .spells {\r\n    max-height: calc(100vh - 130px);\r\n  }\r\n  /* On mobile, the spell view takes up the whole screen (except navbar), without having the search bar above */\r\n  .spell-details,\r\n  .spell-editor {\r\n    height: calc(100vh - 50px);\r\n  }\r\n}\r\n@media (min-width: 768px) and (max-width: 991px) {\r\n  .spells {\r\n    max-height: calc(100vh - 130px);\r\n  }\r\n  .spell-details,\r\n  .spell-editor {\r\n    height: calc(100vh - 130px);\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellsPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SpellsPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpellsPage.vue?vue&type=template&id=f21d311e&\"\nimport script from \"./SpellsPage.vue?vue&type=script&lang=js&\"\nexport * from \"./SpellsPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpellsPage.vue?vue&type=style&index=0&id=f21d311e&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row text-left justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10 col-xl-8\"},[_vm._m(0),_c('p',[_vm._v(\"Total spells: \"),_c('b',[_vm._v(_vm._s(_vm.app.spells.length))]),_vm._v(\" (\"+_vm._s(_vm.app.settings.favorites.size)+\" favorites)\")]),_c('div',{staticClass:\"row\"},[_c('section',{staticClass:\"col-12 col-sm-4\"},[_c('h2',{staticClass:\"mb-3\"},[_vm._v(\"By school\")]),_vm._l((_vm.constants.schools),function(school){return _c('p',{key:school},[_c('img',{staticClass:\"stats-icon\",attrs:{\"src\":_vm.icons.schoolIcon({school}),\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(_vm.stats.schools[school])+\" \"+_vm._s(school)+\" \")])})],2),_c('section',{staticClass:\"col-12 col-sm-4\"},[_c('h2',{staticClass:\"mb-3\"},[_vm._v(\"By level\")]),_vm._l((_vm.constants.levels),function(level){return _c('p',{key:level},[_c('span',{staticClass:\"level\"},[_vm._v(_vm._s(level))]),_vm._v(\" \"+_vm._s(_vm.stats.levels[level])+\" spells \")])})],2),_c('section',{staticClass:\"col-12 col-sm-4\"},[_c('h2',{staticClass:\"mb-3\"},[_vm._v(\"By class\")]),_vm._l((_vm.constants.classes),function(className){return _c('p',{key:className},[_c('img',{staticClass:\"stats-icon\",attrs:{\"src\":_vm.icons.classIcon(className),\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(_vm.stats.classes[className])+\" \"+_vm._s(className)+\" spells \")])})],2)])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"my-4\"},[_vm._v(\"Stats\"),_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/stats.png\"),\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row text-left justify-content-center\">\r\n    <div class=\"col-12 col-md-10 col-xl-8\">\r\n      <h1 class=\"my-4\">Stats<img src=\"@/assets/images/icons/menu/stats.png\" alt=\"\"/></h1>\r\n      <p>Total spells: <b>{{ app.spells.length }}</b> ({{ app.settings.favorites.size }} favorites)</p>\r\n      <div class=\"row\">\r\n        <section class=\"col-12 col-sm-4\">\r\n          <h2 class=\"mb-3\">By school</h2>\r\n          <p v-for=\"school in constants.schools\" :key=\"school\">\r\n            <img class=\"stats-icon\" :src=\"icons.schoolIcon({school})\" alt=\"\"/> {{ stats.schools[school] }} {{ school }}\r\n          </p>\r\n        </section>\r\n        <section class=\"col-12 col-sm-4\">\r\n          <h2 class=\"mb-3\">By level</h2>\r\n          <p v-for=\"level in constants.levels\" :key=\"level\">\r\n            <span class=\"level\">{{ level }}</span>  {{ stats.levels[level] }} spells\r\n          </p>\r\n        </section>\r\n        <section class=\"col-12 col-sm-4\">\r\n          <h2 class=\"mb-3\">By class</h2>\r\n          <p v-for=\"className in constants.classes\" :key=\"className\">\r\n            <img class=\"stats-icon\" :src=\"icons.classIcon(className)\" alt=\"\"/>  {{ stats.classes[className] }} {{ className }} spells\r\n          </p>\r\n        </section>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n  .stats-icon {\r\n    height: 26px;\r\n  }\r\n  .source-version {\r\n    color: #aaa;\r\n    font-size: 70%;\r\n  }\r\n</style>\r\n<script>\r\nimport Icons from '@/util/icons.js';\r\nimport constants from '@/util/constants.js';\r\n\r\nexport default {\r\n  name: 'StatsPage',\r\n  props: {\r\n    app: Object\r\n  },\r\n  computed: {\r\n    stats() {\r\n      var schools = { abjuration: 0, conjuration: 0, divination: 0, enchantment: 0, evocation: 0, illusion: 0, necromancy: 0, transmutation: 0 };\r\n      var levels = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n      var classes = { bard: 0, cleric: 0, druid: 0, paladin: 0, ranger: 0, sorcerer: 0, warlock: 0, wizard: 0 };\r\n      for (var s of this.app.spells) {\r\n        schools[s.school]++;\r\n        levels[s.level]++;\r\n        s.classes.forEach(c => classes[c]++);\r\n      }\r\n      return { schools, levels, classes };\r\n    },\r\n    icons() {\r\n      return Icons;\r\n    },\r\n    constants() {\r\n      return constants;\r\n    }\r\n  },\r\n  metaInfo: {\r\n    title: \"Statistics - WeaveLore\",\r\n    meta: [\r\n      { vmid: \"description\", name: \"description\", content: \"View statistics about all the spells currently loaded in the application, such as spells by school, class and level.\" },\r\n      { vmid: \"robots\", name: \"robots\", content: \"noindex\" }\r\n    ]\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatsPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatsPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StatsPage.vue?vue&type=template&id=561bd118&\"\nimport script from \"./StatsPage.vue?vue&type=script&lang=js&\"\nexport * from \"./StatsPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StatsPage.vue?vue&type=style&index=0&id=561bd118&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row text-left justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10 col-xl-8\"},[_vm._m(0),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('b-form-group',{attrs:{\"label\":\"Require a minimum query length?\"}},[_c('b-form-radio',{attrs:{\"value\":0},on:{\"change\":function($event){return _vm.setDirty()}},model:{value:(_vm.app.settings.minimumQueryLength),callback:function ($$v) {_vm.$set(_vm.app.settings, \"minimumQueryLength\", $$v)},expression:\"app.settings.minimumQueryLength\"}},[_vm._v(\"No, search always\")]),_c('b-form-radio',{attrs:{\"value\":3},on:{\"change\":function($event){return _vm.setDirty()}},model:{value:(_vm.app.settings.minimumQueryLength),callback:function ($$v) {_vm.$set(_vm.app.settings, \"minimumQueryLength\", $$v)},expression:\"app.settings.minimumQueryLength\"}},[_vm._v(\"Yes, don't search until I enter at least 3 characters or choose a filter\"),_c('i',[_vm._v(\"(faster)\")])])],1)],1)])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"my-4\"},[_vm._v(\"Settings\"),_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/settings.png\"),\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row text-left justify-content-center\">\r\n    <div class=\"col-12 col-md-10 col-xl-8\">\r\n      <h1 class=\"my-4\">Settings<img src=\"@/assets/images/icons/menu/settings.png\" alt=\"\"/></h1>\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <b-form-group label=\"Require a minimum query length?\">\r\n            <b-form-radio v-model=\"app.settings.minimumQueryLength\" v-bind:value=\"0\" @change=\"setDirty()\">No, search always</b-form-radio>\r\n            <b-form-radio v-model=\"app.settings.minimumQueryLength\" v-bind:value=\"3\" @change=\"setDirty()\">Yes, don't search until I enter at least 3 characters or choose a filter<i>(faster)</i></b-form-radio>\r\n          </b-form-group>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    name: 'SettingsPage',\r\n    data() { return {\r\n      dirty: false // Whether the user has made changes to the settings that haven't been persisted yet\r\n    }},\r\n    props: {\r\n      app: Object\r\n    },\r\n    methods: {\r\n      setDirty(dirty = true) {\r\n        this.dirty = dirty;\r\n      }\r\n    },\r\n    beforeDestroy() {\r\n      // Whenever the user leaves this page, persist the new settings\r\n      if (this.dirty) {\r\n        this.app.settingsDatabase.saveToStorage();\r\n      }\r\n    },\r\n    metaInfo: {\r\n      title: \"Settings - WeaveLore\",\r\n      meta: [\r\n        { vmid: \"description\", name: \"description\", content: \"Configure WeaveLore to match your preferences.\" },\r\n        { vmid: \"robots\", name: \"robots\", content: \"noindex\" }\r\n      ]\r\n    }\r\n  }\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SettingsPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SettingsPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SettingsPage.vue?vue&type=template&id=0ab41b64&\"\nimport script from \"./SettingsPage.vue?vue&type=script&lang=js&\"\nexport * from \"./SettingsPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row text-left justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10 col-xl-8\"},[_vm._m(0),_vm._m(1),_c('div',{staticClass:\"license-text my-4\",domProps:{\"innerHTML\":_vm._s(_vm.licenseText)}}),_vm._m(2)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"my-4\"},[_vm._v(\"About OGL\"),_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/ogl.png\"),\"alt\":\"\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"The default application data is Open Game Content from the \"),_c('b',[_vm._v(\"SRD\")]),_vm._v(\" (System Reference Document) 5.1, released under the terms of the \"),_c('b',[_vm._v(\"OGL\")]),_vm._v(\" (Open Game License). A copy of the license text is included below in accordance to the terms:\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"The SRD can be found \"),_c('a',{attrs:{\"href\":\"https://dnd.wizards.com/articles/features/systems-reference-document-srd\"}},[_vm._v(\"here\")]),_vm._v(\".\")])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row text-left justify-content-center\">\r\n    <div class=\"col-12 col-md-10 col-xl-8\">\r\n      <h1 class=\"my-4\">About OGL<img src=\"@/assets/images/icons/menu/ogl.png\" alt=\"\"/></h1>\r\n      <p>The default application data is Open Game Content from the <b>SRD</b> (System Reference Document) 5.1, released under the terms of the <b>OGL</b> (Open Game License). A copy of the license text is included below in accordance to the terms:</p>\r\n      <div v-html=\"licenseText\" class=\"license-text my-4\">\r\n      </div>\r\n      <p>The SRD can be found <a href=\"https://dnd.wizards.com/articles/features/systems-reference-document-srd\">here</a>.</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n\r\n</style>\r\n<script>\r\nexport default {\r\n  name: 'OGLPage',\r\n  props: {\r\n    app: Object\r\n  },\r\n  data() { return {\r\n    licenseText: \"Loading...\"\r\n  }},\r\n  created() {\r\n    fetch('/ogl.txt').then(res => res.text()).then(text => {\r\n      this.licenseText = text.replace(/\\n/g, \"<br/>\");\r\n    }).catch(error => {\r\n      this.licenseText = \"Sorry, we could not load the license text.\";\r\n      console.error(error);\r\n    });\r\n  },\r\n  metaInfo: {\r\n    title: \"OGL - WeaveLore\",\r\n    meta: [\r\n      { vmid: \"description\", name: \"description\", content: \"Learn more about how WeaveLore uses content from the SRD (System Reference Document) 5.1, released under the OGL (Open Game License).\" }\r\n    ]\r\n  }\r\n}\r\n</script>\r\n<style>\r\n  .license-text {\r\n    max-height: 300px;\r\n    overflow-y: scroll;\r\n    scrollbar-color: #282828 #1b1b1b;\r\n    padding: 5px;\r\n    font-size: 0.8rem;\r\n    border: 2px solid #292929;\r\n    border-radius: 5px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OGLPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OGLPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OGLPage.vue?vue&type=template&id=1adb51c9&\"\nimport script from \"./OGLPage.vue?vue&type=script&lang=js&\"\nexport * from \"./OGLPage.vue?vue&type=script&lang=js&\"\nimport style1 from \"./OGLPage.vue?vue&type=style&index=1&id=1adb51c9&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row text-left justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10 col-xl-8 tips\"},[_vm._m(0),_c('h2',[_vm._v(\"Search syntax\")]),_vm._v(\" If you add a period to the start of your query, the text will be searched in spell descriptions in addition to their names. \"),_c('h2',[_vm._v(\"Mobile app\")]),_vm._v(\" You can download this web app so that it behaves like a native app, including: \"),_vm._m(1),_vm._v(\" To install, look for an \\\"Add to home\\\" button in your browser of choice. \"),_c('h2',[_vm._v(\"Editing spells\")]),_vm._v(\" You can create, edit and remove spells by entering \"),_c('img',{staticStyle:{\"width\":\"20px\"},attrs:{\"src\":require(\"@/assets/images/icons/misc/edition.png\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('span',{staticClass:\"highlight ml-1\"},[_vm._v(\"Edition mode\")]),_vm._v(\". \"),_c('ul',[_vm._m(2),_c('li',[_vm._v(\"Keep backups by \"),_c('router-link',{attrs:{\"to\":\"/content\"}},[_vm._v(\"exporting your database\")]),_vm._v(\". This way you can restore everything after clearing your browser history.\")],1),_c('li',[_vm._v(\"Avoid making changes to the default content, because the SRD database may be periodically updated and your changes will be overwritten.\")]),_vm._m(3),_vm._m(4)])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"my-4\"},[_vm._v(\"Tips and tricks\"),_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/tips.png\"),\"alt\":\"\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\"Automatic fullscreen\")]),_c('li',[_vm._v(\"100% offline functionality\")]),_c('li',[_vm._v(\"Shortcut in your home screen/apps menu\")]),_c('li',[_vm._v(\"Separate window from your browser\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_c('img',{staticStyle:{\"width\":\"20px\"},attrs:{\"src\":require(\"@/assets/images/icons/misc/save1.png\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('span',{staticClass:\"highlight ml-1\"},[_vm._v(\"Save\")]),_vm._v(\" often (this makes your changes persist after refreshing/closing your browser).\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\"Long text fields support some HTML. Use \"),_c('span',{staticClass:\"highlight\"},[_vm._v(\"<p>\")]),_vm._v(\" tags to mark paragraphs. The following tags are also supported: \"),_c('span',{staticClass:\"highlight\"},[_vm._v(\"<b>\")]),_vm._v(\", \"),_c('span',{staticClass:\"highlight\"},[_vm._v(\"<i>\")]),_vm._v(\", \"),_c('span',{staticClass:\"highlight\"},[_vm._v(\"<ul>\")]),_vm._v(\", \"),_c('span',{staticClass:\"highlight\"},[_vm._v(\"<li>\")]),_vm._v(\", \"),_c('span',{staticClass:\"highlight\"},[_vm._v(\"<table>\")]),_vm._v(\" and table sub-tags.\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\"Check out the \"),_c('a',{attrs:{\"href\":\"https://github.com/bgior/weavelore/wiki/WLC-Format\",\"target\":\"_blank\"}},[_vm._v(\"documentation\")]),_vm._v(\" for more information.\")])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row text-left justify-content-center\">\r\n    <div class=\"col-12 col-md-10 col-xl-8 tips\">\r\n      <h1 class=\"my-4\">Tips and tricks<img src=\"@/assets/images/icons/menu/tips.png\" alt=\"\"/></h1>\r\n      <h2>Search syntax</h2>\r\n      If you add a period to the start of your query, the text will be searched in spell descriptions in addition to their names.\r\n      <h2>Mobile app</h2>\r\n      You can download this web app so that it behaves like a native app, including:\r\n      <ul>\r\n        <li>Automatic fullscreen</li>\r\n        <li>100% offline functionality</li>\r\n        <li>Shortcut in your home screen/apps menu</li>\r\n        <li>Separate window from your browser</li>\r\n      </ul>\r\n      To install, look for an \"Add to home\" button in your browser of choice.\r\n      <h2>Editing spells</h2>\r\n      You can create, edit and remove spells by entering <img src=\"@/assets/images/icons/misc/edition.png\" style=\"width: 20px\" alt=\"\"/> <span class=\"highlight ml-1\">Edition mode</span>.\r\n      <ul>\r\n        <li><img src=\"@/assets/images/icons/misc/save1.png\" style=\"width: 20px\" alt=\"\"/> <span class=\"highlight ml-1\">Save</span> often (this makes your changes persist after refreshing/closing your browser).</li>\r\n        <li>Keep backups by <router-link to=\"/content\">exporting your database</router-link>. This way you can restore everything after clearing your browser history.</li>\r\n        <li>Avoid making changes to the default content, because the SRD database may be periodically updated and your changes will be overwritten.</li>\r\n        <li>Long text fields support some HTML. Use <span class=\"highlight\">&lt;p&gt;</span> tags to mark paragraphs. The following tags are also supported: <span class=\"highlight\">&lt;b&gt;</span>, <span class=\"highlight\">&lt;i&gt;</span>, <span class=\"highlight\">&lt;ul&gt;</span>, <span class=\"highlight\">&lt;li&gt;</span>, <span class=\"highlight\">&lt;table&gt;</span> and table sub-tags.</li>\r\n        <li>Check out the <a href=\"https://github.com/bgior/weavelore/wiki/WLC-Format\" target=\"_blank\">documentation</a> for more information.</li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n.tips > h2 {\r\n  margin-top: 20px;\r\n}\r\n.tips .highlight {\r\n  color: #fea357;\r\n}\r\n</style>\r\n<script>\r\nexport default {\r\n  name: 'TipsPage',\r\n  props: {\r\n    app: Object\r\n  },\r\n  metaInfo: {\r\n    title: \"Tips - WeaveLore\",\r\n    meta: [\r\n      { vmid: \"description\", name: \"description\", content: \"Learn tips and tricks to take full advantage of the features of WeaveLore, a free and open-source web application to browse D&D 5e spells.\" }\r\n    ]\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TipsPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TipsPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TipsPage.vue?vue&type=template&id=6aff6c5a&\"\nimport script from \"./TipsPage.vue?vue&type=script&lang=js&\"\nexport * from \"./TipsPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TipsPage.vue?vue&type=style&index=0&id=6aff6c5a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row text-left justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10 col-xl-8\"},[_vm._m(0),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-6 col-md-3\"},[_vm._v(\" Type: \"),_c('span',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.areasHelp\",modifiers:{\"areasHelp\":true}}],attrs:{\"id\":\"areasHelp\"}},[_vm._v(\"( ? )\")]),_c('CustomSelect',{attrs:{\"options\":_vm.aoeOptions},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}})],1),_c('div',{staticClass:\"col-6 col-md-3\"},[_vm._v(\" Range: \"),_c('b',[_vm._v(_vm._s(_vm.range))]),_vm._v(\" feet \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.range),expression:\"range\",modifiers:{\"number\":true}}],attrs:{\"type\":\"range\",\"step\":\"5\",\"min\":\"0\",\"max\":\"300\"},domProps:{\"value\":(_vm.range)},on:{\"__r\":function($event){_vm.range=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type != ''),expression:\"type != ''\"}],staticClass:\"col-6 col-md-3\"},[_vm._v(\" Size: \"),_c('b',[_vm._v(_vm._s(_vm.size))]),_vm._v(\" feet \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.size),expression:\"size\",modifiers:{\"number\":true}}],attrs:{\"type\":\"range\",\"step\":\"5\",\"min\":\"5\",\"max\":\"120\"},domProps:{\"value\":(_vm.size)},on:{\"__r\":function($event){_vm.size=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type == 'cone'),expression:\"type == 'cone'\"}],staticClass:\"col-6 col-md-3\"},[_vm._v(\" Direction: \"+_vm._s(_vm.angleDegrees)+\"º \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.angleDegrees),expression:\"angleDegrees\",modifiers:{\"number\":true}}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"360\"},domProps:{\"value\":(_vm.angleDegrees)},on:{\"__r\":function($event){_vm.angleDegrees=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type == 'sphere'),expression:\"type == 'sphere'\"}],staticClass:\"col-6 col-md-3\"},[_vm._v(\" Center: \"),_c('CustomSelect',{attrs:{\"options\":_vm.centerOptions},model:{value:(_vm.center),callback:function ($$v) {_vm.center=$$v},expression:\"center\"}})],1)])]),_c('div',{staticClass:\"col-12\",staticStyle:{\"text-align\":\"center\"}},[_c('Diagram',{attrs:{\"defaultRange\":_vm.range,\"aoe\":_vm.type == '' ? null : { type: _vm.type, radius: _vm.size, edge: _vm.size, length: _vm.size, angle: _vm.angleRadians, center: _vm.center }}})],1),_c('b-modal',{attrs:{\"id\":\"areasHelp\",\"title\":\"Notes\"}},[_c('ul',[_c('li',[_vm._v(\"The following criteria are used, for lack of a standard, to determine which cells are affected by an AOE (Area of Effect):\")]),_c('ul',[_c('li',[_c('b',[_vm._v(\"Circle:\")]),_vm._v(\" The cell's center point is within the circle.\")]),_c('li',[_c('b',[_vm._v(\"Cone:\")]),_vm._v(\" The triangle intersects the circle inscribed in the cell.\")])]),_c('li',[_vm._v(\"AOEs are always centered in a grid intersection point, except in the case of cubes whose size is not multiple of 10, and spheres with range 0.\")])]),_c('div',{staticClass:\"w-100\",attrs:{\"slot\":\"modal-footer\"},slot:\"modal-footer\"},[_c('b-button',{staticClass:\"float-right\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.$bvModal.hide('areasHelp')}}},[_vm._v(\"Close\")])],1)])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"my-4\"},[_vm._v(\"Area calculator\"),_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/areas.png\"),\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row text-left justify-content-center\">\r\n    <div class=\"col-12 col-md-10 col-xl-8\">\r\n      <h1 class=\"my-4\">Area calculator<img src=\"@/assets/images/icons/menu/areas.png\" alt=\"\"/></h1>\r\n      <div class=\"row\">\r\n        <div class=\"col-6 col-md-3\">\r\n          Type: <span v-b-modal.areasHelp id=\"areasHelp\">( ? )</span>\r\n          <CustomSelect v-model=\"type\" :options=\"aoeOptions\"/>\r\n        </div>\r\n        <div class=\"col-6 col-md-3\">\r\n          Range: <b>{{ range }}</b> feet\r\n          <input type=\"range\" v-model.number=\"range\" step=\"5\" min=\"0\" max=\"300\"/>\r\n        </div>\r\n        <div class=\"col-6 col-md-3\" v-show=\"type != ''\">\r\n          Size: <b>{{ size }}</b> feet\r\n          <input type=\"range\" v-model.number=\"size\" step=\"5\" min=\"5\" max=\"120\"/>\r\n        </div>\r\n        <div class=\"col-6 col-md-3\" v-show=\"type == 'cone'\">\r\n          Direction: {{ angleDegrees }}º\r\n          <input type=\"range\" v-model.number=\"angleDegrees\" min=\"0\" max=\"360\"/>\r\n        </div>\r\n        <div class=\"col-6 col-md-3\" v-show=\"type == 'sphere'\">\r\n          Center:\r\n          <CustomSelect v-model=\"center\" :options=\"centerOptions\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-12\" style=\"text-align: center\">\r\n      <Diagram :defaultRange=\"range\" :aoe=\"type == '' ? null : { type: type, radius: size, edge: size, length: size, angle: angleRadians, center: center }\"/>\r\n    </div>\r\n    <b-modal id=\"areasHelp\" title=\"Notes\">\r\n      <ul>\r\n        <li>The following criteria are used, for lack of a standard, to determine which cells are affected by an AOE (Area of Effect):</li>\r\n        <ul>\r\n          <li><b>Circle:</b> The cell's center point is within the circle.</li>\r\n          <li><b>Cone:</b> The triangle intersects the circle inscribed in the cell.</li>\r\n        </ul>\r\n        <li>AOEs are always centered in a grid intersection point, except in the case of cubes whose size is not multiple of 10, and spheres with range 0.</li>\r\n      </ul>\r\n      <div slot=\"modal-footer\" class=\"w-100\">\r\n        <b-button variant=\"primary\" size=\"sm\" class=\"float-right\" @click=\"$bvModal.hide('areasHelp')\">Close</b-button>\r\n      </div>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n<style>\r\n  #areasHelp {\r\n    float: right;\r\n    color: #444;\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n<script>\r\nimport spellOptions from '@/util/spellOptions.js';\r\nimport CustomSelect from '@/components/general/CustomSelect.vue';\r\nimport Diagram from '../spells/Diagram.vue';\r\n\r\nexport default {\r\n  name: 'AreasPage',\r\n  components: {\r\n    Diagram,\r\n    CustomSelect\r\n  },\r\n  props: {\r\n    app: Object\r\n  },\r\n  data() { return {\r\n    type: \"cone\",\r\n    size: 30,\r\n    range: 0,\r\n    center: '',\r\n    angleRadians: 0,\r\n    angleDegrees: 0\r\n  }},\r\n  computed: {\r\n    aoeOptions: () => spellOptions.aoeOptions,\r\n    centerOptions: () => spellOptions.centerOptions\r\n  },\r\n  watch: {\r\n    angleDegrees() {\r\n      this.angleRadians = this.angleDegrees * Math.PI / 180;\r\n    },\r\n    type() {\r\n      if (this.type == '' && this.range < 10) {\r\n        this.range = 20;\r\n      }\r\n      if (this.type == 'cone') {\r\n        this.range = 0;\r\n      }\r\n    }\r\n  },\r\n  metaInfo: {\r\n    title: \"AoE Calculator - WeaveLore\",\r\n    meta: [\r\n      { vmid: \"description\", name: \"description\", content: \"Visualize the AoE (Area of Effect) of different D&D 5e spells on a grid using this handy simulator. Supports spheres, cones and cubes of arbitrary size.\" }\r\n    ]\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AreasPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AreasPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AreasPage.vue?vue&type=template&id=b1a059cc&\"\nimport script from \"./AreasPage.vue?vue&type=script&lang=js&\"\nexport * from \"./AreasPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AreasPage.vue?vue&type=style&index=0&id=b1a059cc&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row text-left justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10 col-xl-8 about\"},[_vm._m(0),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-md-4 about-image\",style:({ backgroundImage: `url(${require('@/assets/images/logo/logo_large.jpg')})`})}),_c('div',{staticClass:\"col-12 col-md-8\"},[_c('h2',[_vm._v(\"WeaveLore \"+_vm._s(_vm.appVersion))]),_vm._m(1),_c('p',[_vm._v(\"The SRD content included is Open Game Content, which is distributed under \"),_c('router-link',{attrs:{\"to\":\"/ogl\"}},[_vm._v(\"OGL\")]),_vm._v(\" and not AGPL.\")],1),_c('p',[_vm._v(\"This project is not affiliated in any way to Wizards of the Coast.\")]),_vm._m(2)])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"my-4\"},[_vm._v(\"About\"),_c('img',{staticStyle:{\"filter\":\"contrast(0) brightness(0.8)\"},attrs:{\"src\":require(\"@/assets/images/logo/logo64.png\"),\"alt\":\"\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"This project is open-source and released under \"),_c('a',{attrs:{\"href\":\"https://www.gnu.org/licenses/agpl-3.0.en.html\",\"target\":\"_blank\"}},[_vm._v(\"GNU AGPL v3\")]),_vm._v(\". You can find the repository and more information on \"),_c('a',{attrs:{\"href\":\"https://github.com/bgior/weavelore\",\"target\":\"_blank\"}},[_vm._v(\"GitHub\")]),_vm._v(\".\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"Join us on \"),_c('a',{attrs:{\"href\":\"https://www.reddit.com/r/WeaveLore\"}},[_vm._v(\"Reddit\")]),_vm._v(\"!\")])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row text-left justify-content-center\">\r\n    <div class=\"col-12 col-md-10 col-xl-8 about\">\r\n      <h1 class=\"my-4\">About<img src=\"@/assets/images/logo/logo64.png\" style=\"filter: contrast(0) brightness(0.8)\" alt=\"\"/></h1>\r\n      <div class=\"row\">\r\n        <div class=\"col-12 col-md-4 about-image\" :style=\"{ backgroundImage: `url(${require('@/assets/images/logo/logo_large.jpg')})`}\">\r\n        </div>\r\n        <div class=\"col-12 col-md-8\">\r\n          <h2>WeaveLore {{ appVersion }}</h2>\r\n          <p>This project is open-source and released under <a href=\"https://www.gnu.org/licenses/agpl-3.0.en.html\" target=\"_blank\">GNU AGPL v3</a>. You can find the repository and more information on <a href=\"https://github.com/bgior/weavelore\" target=\"_blank\">GitHub</a>.</p>\r\n          <p>The SRD content included is Open Game Content, which is distributed under <router-link to=\"/ogl\">OGL</router-link> and not AGPL.</p>\r\n          <p>This project is not affiliated in any way to Wizards of the Coast.</p>\r\n          <p>Join us on <a href=\"https://www.reddit.com/r/WeaveLore\">Reddit</a>!</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n  .about-image {\r\n    background-position: center;\r\n    background-repeat: no-repeat;\r\n    background-size: contain;\r\n    min-height: 256px;\r\n  }\r\n</style>\r\n<script>\r\nimport constants from '@/util/constants.js';\r\n\r\nexport default {\r\n  name: 'AboutPage',\r\n  props: {\r\n    app: Object\r\n  },\r\n  computed: {\r\n    appVersion() {\r\n      return constants.appVersion;\r\n    }\r\n  },\r\n  metaInfo: {\r\n    title: \"About - WeaveLore\",\r\n    meta: [\r\n      { vmid: \"description\", name: \"description\", content: \"Learn more about WeaveLore, a free and open-source web application to browse D&D 5e spells. More information about the project is available on GitHub.\" }\r\n    ]\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AboutPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AboutPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AboutPage.vue?vue&type=template&id=06e6cb62&\"\nimport script from \"./AboutPage.vue?vue&type=script&lang=js&\"\nexport * from \"./AboutPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AboutPage.vue?vue&type=style&index=0&id=06e6cb62&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row text-left justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10 col-xl-8\"},[_vm._m(0),(_vm.message)?_c('div',[_vm._v(_vm._s(_vm.message))]):_vm._e(),_vm._l((_vm.news),function(item){return _c('div',{key:item.title},[_c('div',{staticClass:\"news-item\"},[_c('div',{staticClass:\"news-head\"},[_c('h2',[_vm._v(_vm._s(item.title))]),_c('span',[_vm._v(_vm._s(_vm.prettyDate(item.date)))])]),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.prettyDescription(item.description))},on:{\"click\":_vm.handleDescriptionClick}})]),_c('hr')])})],2)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"my-4\"},[_vm._v(\"News \"),_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/news.png\"),\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row text-left justify-content-center\">\r\n    <div class=\"col-12 col-md-10 col-xl-8\">\r\n      <h1 class=\"my-4\">News <img src=\"@/assets/images/icons/menu/news.png\" alt=\"\"/></h1>\r\n      <div v-if=\"message\">{{ message }}</div>\r\n      <div v-for=\"item in news\" :key=\"item.title\">\r\n        <div class=\"news-item\">\r\n          <div class=\"news-head\">\r\n            <h2>{{ item.title }}</h2>\r\n            <span>{{ prettyDate(item.date) }}</span>\r\n          </div>\r\n          <div v-html=\"prettyDescription(item.description)\" @click=\"handleDescriptionClick\"></div>\r\n        </div>\r\n        <hr/>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n.news-item {\r\n  padding: 10px;\r\n}\r\n.news-head {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.news-head > span {\r\n  margin-top: 5px;\r\n  border-bottom: 1px solid #333;\r\n  border-radius: 3px;\r\n}\r\n</style>\r\n<script>\r\nimport TextBeautifier from '@/util/textBeautifier.js';\r\nconst months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\nexport default {\r\n  name: 'NewsPage',\r\n  props: {\r\n    app: Object\r\n  },\r\n  data() { return {\r\n    message: \"Loading...\",\r\n    news: null\r\n  }},\r\n  methods: {\r\n    prettyDate(dateString) {\r\n      const date = new Date(dateString);\r\n      return date ? `${months[date.getUTCMonth()]} ${date.getUTCDate()}` : '';\r\n    },\r\n    prettyDescription(description){\r\n      return TextBeautifier.beautify(description);\r\n    },\r\n    handleDescriptionClick(evt) {\r\n      if (evt.target.className == 'dynamic-link') {\r\n        this.$router.push('/rules/' + evt.target.innerText.replace(/ /g, \"-\"));\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    fetch('/news.json').then(res => res.json()).then(news => {\r\n      this.news = news;\r\n      this.message = null;\r\n    }).catch(error => {\r\n      this.message = \"Sorry, we could not load the latest news.\";\r\n      console.error(error);\r\n    });\r\n  },\r\n  metaInfo: {\r\n    title: \"News - WeaveLore\",\r\n    meta: [\r\n      { vmid: \"description\", name: \"description\", content: \"View the latest major events and news concerning WeaveLore development. Check out the subreddit too for more detailed information.\" }\r\n    ]\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NewsPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NewsPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewsPage.vue?vue&type=template&id=6766b1a1&\"\nimport script from \"./NewsPage.vue?vue&type=script&lang=js&\"\nexport * from \"./NewsPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewsPage.vue?vue&type=style&index=0&id=6766b1a1&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row text-left justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10 col-xl-8\"},[_vm._m(0),(_vm.app.appUpdateAvailable)?_c('div',[_vm._m(1)]):_c('div',[_vm._m(2)]),_c('p',[_vm._v(\"Current version: \"),_c('b',[_vm._v(_vm._s(_vm.appVersion))])]),(_vm.app.appUpdateAvailable)?_c('button',{staticClass:\"btn btn-primary\",attrs:{\"disabled\":_vm.applyingNewVersion},on:{\"click\":function($event){return _vm.updateNow()}}},[_c('img',{staticStyle:{\"width\":\"20px\",\"opacity\":\"0.5\"},attrs:{\"src\":require(\"@/assets/images/icons/misc/sync.png\"),\"alt\":\"\"}}),_vm._v(\" Update now \")]):_vm._e()])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"my-4\"},[_vm._v(\"Updates\"),_c('img',{staticStyle:{\"filter\":\"brightness(0.5)\"},attrs:{\"src\":require(\"@/assets/images/icons/misc/upgrade.png\"),\"alt\":\"\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('p',[_vm._v(\"A new version of the app is ready to be installed!\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_c('span',{staticStyle:{\"color\":\"#5fc611\"}},[_vm._v(\"✓\")]),_vm._v(\" No application updates are awaiting installation.\")])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<!-- Page where users can view and install app updates, if available. -->\r\n<template>\r\n  <div class=\"row text-left justify-content-center\">\r\n    <div class=\"col-12 col-md-10 col-xl-8\">\r\n      <h1 class=\"my-4\">Updates<img src=\"@/assets/images/icons/misc/upgrade.png\" style=\"filter: brightness(0.5);\" alt=\"\"></h1>\r\n      <div v-if=\"app.appUpdateAvailable\">\r\n        <div>\r\n          <p>A new version of the app is ready to be installed!</p>\r\n        </div>\r\n      </div>\r\n      <div v-else>\r\n        <p><span style=\"color:#5fc611\">✓</span> No application updates are awaiting installation.</p>\r\n      </div>\r\n      <p>Current version: <b>{{ appVersion }}</b></p>\r\n      <button v-if=\"app.appUpdateAvailable\" @click=\"updateNow()\" :disabled=\"applyingNewVersion\" class=\"btn btn-primary\">\r\n        <img src=\"@/assets/images/icons/misc/sync.png\" style=\"width: 20px; opacity: 0.5\" alt=\"\"/> Update now\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n</style>\r\n<script>\r\nimport constants from '@/util/constants.js';\r\n\r\nexport default {\r\n  name: 'UpdatesPage',\r\n  props: {\r\n    app: Object\r\n  },\r\n  data() {\r\n    return {\r\n      applyingNewVersion: false\r\n    }},\r\n  computed: {\r\n    appVersion() {\r\n      return constants.appVersion;\r\n    }\r\n  },\r\n  methods: {\r\n    updateNow() {\r\n      this.applyingNewVersion = true;\r\n      navigator.serviceWorker.getRegistration().then(reg => {\r\n        try {\r\n          reg.waiting.postMessage('skipWaiting');\r\n          window.location.reload();\r\n        } catch(e) {\r\n          this.app.alert(\"Sorry, we couldn't apply the update. Please try restarting the app.\");\r\n          console.error(\"Couldn't load the updated service worker: \" + e);\r\n          this.applyingNewVersion = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UpdatesPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UpdatesPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UpdatesPage.vue?vue&type=template&id=c1e7a396&\"\nimport script from \"./UpdatesPage.vue?vue&type=script&lang=js&\"\nexport * from \"./UpdatesPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row text-left justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10 col-xl-8\"},[_vm._m(0),_c('div',{staticClass:\"my-4\"},[_c('div',{staticClass:\"sources-intro w-100\"},[_c('span',[_vm._v(\" You have \"+_vm._s(_vm.sources.length || 'no')+\" content \"+_vm._s(_vm.sources.length == 1 ? 'source' : 'sources')+\". \")]),_c('span',{staticClass:\"no-shrink pb-3 pr-3\"},[_c('strong',{staticClass:\"source-amounts\"},[_c('img',{staticStyle:{\"filter\":\"brightness(2.3)\"},attrs:{\"src\":require(\"@/assets/images/icons/menu/spells.png\"),\"title\":\"Total amount of spells\",\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(_vm.app.spells.length)+\" \"),_c('img',{staticClass:\"ml-3\",staticStyle:{\"filter\":\"brightness(2.0)\"},attrs:{\"src\":require(\"@/assets/images/icons/menu/rules.png\"),\"title\":\"Total amount of rules\",\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(_vm.app.rules.length)+\" \")])])]),_vm._l((_vm.sources),function(source){return _c('div',{staticClass:\"source mb-3\"},[_c('img',{staticClass:\"source-icon\",attrs:{\"src\":require(\"@/assets/images/icons/misc/content.png\"),\"alt\":\"\"}}),_c('div',{staticClass:\"source-info pl-2\"},[_c('div',{staticClass:\"source-head\"},[_c('span',{staticClass:\"source-title d-flex\"},[(_vm.sourceBeingEdited == source)?[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(source.name),expression:\"source.name\"}],staticClass:\"form-control font-weight-bold\",attrs:{\"type\":\"text\",\"maxlength\":\"32\"},domProps:{\"value\":(source.name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(source, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(source.version),expression:\"source.version\",modifiers:{\"number\":true}}],staticClass:\"form-control ml-2 d-none d-md-block\",staticStyle:{\"width\":\"70px\"},attrs:{\"type\":\"number\",\"min\":\"0\",\"title\":\"Version number for this source\"},domProps:{\"value\":(source.version)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(source, \"version\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]:[_vm._v(_vm._s(source.name)+\" \"),(source.version > 0)?_c('span',{staticClass:\"source-version badge ml-2\"},[_vm._v(\"v\"+_vm._s(source.version))]):_vm._e()]],2),_c('span',{staticClass:\"source-amounts no-shrink ml-4\"},[_c('img',{staticStyle:{\"filter\":\"brightness(1.8)\"},attrs:{\"src\":require(\"@/assets/images/icons/menu/spells.png\"),\"title\":\"Amount of spells in this source\",\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(source.spells.length)+\" \"),_c('img',{staticClass:\"ml-3\",staticStyle:{\"filter\":\"brightness(1.6)\"},attrs:{\"src\":require(\"@/assets/images/icons/menu/rules.png\"),\"title\":\"Amount of rules in this source\",\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(source.rules.length)+\" \"),_c('img',{staticClass:\"source-action ml-3\",attrs:{\"src\":require(\"@/assets/images/icons/misc/exportFile.png\"),\"title\":\"Export this source\",\"alt\":\"\"},on:{\"click\":function($event){return _vm.exportSource(source)}}}),_c('img',{class:{'source-action ml-2': true, active: _vm.sourceBeingEdited == source},attrs:{\"src\":require(\"@/assets/images/icons/misc/edition.png\"),\"title\":\"Edit this source\",\"alt\":\"\"},on:{\"click\":function($event){return _vm.toggleSourceBeingEdited(source)}}}),_c('img',{staticClass:\"source-action ml-2\",attrs:{\"src\":require(\"@/assets/images/icons/misc/close.png\"),\"title\":\"Delete this source\",\"alt\":\"\"},on:{\"click\":function($event){return _vm.deleteSource(source)}}})])]),(_vm.sourceBeingEdited == source)?_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(source.description),expression:\"source.description\"}],staticClass:\"form-control\",attrs:{\"maxlength\":\"512\"},domProps:{\"value\":(source.description)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(source, \"description\", $event.target.value)}}}):_c('div',{staticStyle:{\"line-break\":\"anywhere\"}},[_vm._v(_vm._s(source.description))])])])})],2),_c('div',{staticClass:\"row sources-actions\"},[_c('div',{staticClass:\"col-12 col-md-6 col-xl-4 mt-1\"},[_c('button',{staticClass:\"btn btn-primary w-100\",on:{\"click\":_vm.openFileSelector}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/importFile.png\"),\"alt\":\"\"}}),_vm._v(\" Import file \")]),_c('input',{ref:\"uploader\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\".json\",\"multiple\":\"\"},on:{\"change\":_vm.handleFileSelect}})]),_c('div',{staticClass:\"col-12 col-md-6 col-xl-4 mt-1\"},[_c('button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.urlloader\",modifiers:{\"urlloader\":true}}],staticClass:\"btn btn-primary w-100\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/importLink.png\"),\"alt\":\"\"}}),_vm._v(\" Import URL \")])]),_c('div',{staticClass:\"col-12 col-md-6 col-xl-4 mt-1\"},[_c('button',{staticClass:\"btn btn-primary w-100\",attrs:{\"disabled\":_vm.sources.length == 0},on:{\"click\":_vm.exportDatabase}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/exportFile.png\"),\"alt\":\"\"}}),_vm._v(\" Export all \")]),_c('a',{ref:\"downloadLink\",staticClass:\"d-none\",attrs:{\"href\":\"#\"}})]),_c('div',{staticClass:\"col-12 col-md-6 col-xl-4 mt-1\"},[_c('button',{staticClass:\"btn btn-primary w-100\",attrs:{\"disabled\":_vm.sources.some(s => s.name == 'SRD 5.1')},on:{\"click\":_vm.loadSRD}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/srd.png\"),\"alt\":\"\"}}),_vm._v(\" Load SRD \")])]),_c('div',{staticClass:\"col-12 col-md-6 col-xl-4 mt-1\"},[_c('button',{staticClass:\"btn btn-primary w-100\",on:{\"click\":_vm.addSource}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/addSource.png\"),\"alt\":\"\"}}),_vm._v(\" New source \")])]),_c('div',{staticClass:\"col-12 col-md-6 col-xl-4 mt-1\"},[_c('button',{staticClass:\"btn btn-primary w-100\",attrs:{\"disabled\":_vm.sources.length == 0},on:{\"click\":_vm.resetDatabase}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/trash.png\"),\"alt\":\"\"}}),_vm._v(\" Delete all \")])]),_c('div',{staticClass:\"col-12 col-md-6 col-xl-4 mt-1\"},[_c('button',{staticClass:\"btn btn-primary w-100\",attrs:{\"disabled\":_vm.sources.length == 0},on:{\"click\":_vm.saveDatabase}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/save2.png\"),\"alt\":\"\"}}),_vm._v(\" Save changes \")])]),_c('div',{staticClass:\"col-12 col-md-6 col-xl-4 mt-1\"},[_c('button',{staticClass:\"btn btn-primary w-100\",attrs:{\"disabled\":_vm.sources.length == 0,\"title\":\"Check your content sources for any issues\"},on:{\"click\":_vm.validateDatabase}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/check.png\"),\"alt\":\"\"}}),_vm._v(\" Validate \")])]),_vm._m(1)]),_c('b-modal',{attrs:{\"id\":\"urlloader\",\"title\":\"Enter the URL of the file:\"},on:{\"ok\":_vm.handleURLSelect}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.urlToImport),expression:\"urlToImport\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.urlToImport)},on:{\"input\":function($event){if($event.target.composing)return;_vm.urlToImport=$event.target.value}}})])],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"my-4\"},[_vm._v(\"My content\"),_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/menu/content.png\"),\"alt\":\"\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-12 col-md-6 col-xl-4 mt-1\"},[_c('a',{staticClass:\"btn btn-primary w-100\",attrs:{\"href\":\"https://github.com/bgior/weavelore/wiki/Content-FAQ\",\"target\":\"_blank\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/help.png\"),\"alt\":\"\"}}),_vm._v(\" Help \")])])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row text-left justify-content-center\">\r\n    <div class=\"col-12 col-md-10 col-xl-8\">\r\n      <h1 class=\"my-4\">My content<img src=\"@/assets/images/icons/menu/content.png\" alt=\"\"/></h1>\r\n      <div class=\"my-4\">\r\n        <div class=\"sources-intro w-100\">\r\n          <span>\r\n            You have {{ sources.length || 'no' }} content {{ sources.length == 1 ? 'source' : 'sources' }}.\r\n          </span>\r\n          <span class=\"no-shrink pb-3 pr-3\">\r\n            <strong class=\"source-amounts\">\r\n              <img src=\"@/assets/images/icons/menu/spells.png\" style=\"filter: brightness(2.3)\" title=\"Total amount of spells\" alt=\"\"> {{ app.spells.length }}\r\n              <img src=\"@/assets/images/icons/menu/rules.png\" class=\"ml-3\" style=\"filter: brightness(2.0)\" title=\"Total amount of rules\" alt=\"\"> {{ app.rules.length }}\r\n            </strong>\r\n          </span>\r\n        </div>\r\n        <div v-for=\"source in sources\" class=\"source mb-3\">\r\n          <img src=\"@/assets/images/icons/misc/content.png\" class=\"source-icon\" alt=\"\">\r\n          <div class=\"source-info pl-2\">\r\n            <div class=\"source-head\">\r\n              <span class=\"source-title d-flex\">\r\n                <template v-if=\"sourceBeingEdited == source\">\r\n                  <input type=\"text\" class=\"form-control font-weight-bold\" v-model=\"source.name\" maxlength=\"32\"/>\r\n                  <input type=\"number\" class=\"form-control ml-2 d-none d-md-block\" v-model.number=\"source.version\" min=\"0\" title=\"Version number for this source\" style=\"width:70px\"/>\r\n                </template>\r\n                <template v-else>{{ source.name }} <span v-if=\"source.version > 0\" class=\"source-version badge ml-2\">v{{ source.version }}</span></template>\r\n              </span>\r\n              <span class=\"source-amounts no-shrink ml-4\">\r\n                <img src=\"@/assets/images/icons/menu/spells.png\" style=\"filter: brightness(1.8)\" title=\"Amount of spells in this source\" alt=\"\"> {{ source.spells.length }}\r\n                <img src=\"@/assets/images/icons/menu/rules.png\" class=\"ml-3\" style=\"filter: brightness(1.6)\" title=\"Amount of rules in this source\" alt=\"\"> {{ source.rules.length }}\r\n                <img src=\"@/assets/images/icons/misc/exportFile.png\" class=\"source-action ml-3\" @click=\"exportSource(source)\" title=\"Export this source\" alt=\"\"/>\r\n                <img src=\"@/assets/images/icons/misc/edition.png\" :class=\"{'source-action ml-2': true, active: sourceBeingEdited == source}\" @click=\"toggleSourceBeingEdited(source)\" title=\"Edit this source\" alt=\"\"/>\r\n                <img src=\"@/assets/images/icons/misc/close.png\" class=\"source-action ml-2\" @click=\"deleteSource(source)\" title=\"Delete this source\" alt=\"\"/>\r\n              </span>\r\n            </div>\r\n            <textarea v-if=\"sourceBeingEdited == source\" class=\"form-control\" v-model=\"source.description\" maxlength=\"512\"></textarea>\r\n            <div v-else style=\"line-break: anywhere\">{{ source.description }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"row sources-actions\">\r\n        <div class=\"col-12 col-md-6 col-xl-4 mt-1\">\r\n          <button class=\"btn btn-primary w-100\" @click=\"openFileSelector\">\r\n            <img src=\"@/assets/images/icons/misc/importFile.png\" alt=\"\"/>\r\n            Import file\r\n          </button>\r\n          <input ref=\"uploader\" type=\"file\" @change=\"handleFileSelect\" accept=\".json\" style=\"display:none\" multiple/>\r\n        </div>\r\n        <div class=\"col-12 col-md-6 col-xl-4 mt-1\">\r\n          <button class=\"btn btn-primary w-100\" v-b-modal.urlloader>\r\n            <img src=\"@/assets/images/icons/misc/importLink.png\" alt=\"\"/>\r\n            Import URL\r\n          </button>\r\n        </div>\r\n        <div class=\"col-12 col-md-6 col-xl-4 mt-1\">\r\n          <button class=\"btn btn-primary w-100\" @click=\"exportDatabase\" :disabled=\"sources.length == 0\">\r\n            <img src=\"@/assets/images/icons/misc/exportFile.png\" alt=\"\"/>\r\n            Export all\r\n          </button>\r\n          <a ref=\"downloadLink\" href=\"#\" class=\"d-none\"></a>\r\n        </div>\r\n        <div class=\"col-12 col-md-6 col-xl-4 mt-1\">\r\n          <button class=\"btn btn-primary w-100\" @click=\"loadSRD\" :disabled=\"sources.some(s => s.name == 'SRD 5.1')\">\r\n            <img src=\"@/assets/images/icons/misc/srd.png\" alt=\"\"/>\r\n            Load SRD\r\n          </button>\r\n        </div>\r\n        <div class=\"col-12 col-md-6 col-xl-4 mt-1\">\r\n          <button class=\"btn btn-primary w-100\" @click=\"addSource\">\r\n            <img src=\"@/assets/images/icons/misc/addSource.png\" alt=\"\"/>\r\n            New source\r\n          </button>\r\n        </div>\r\n        <div class=\"col-12 col-md-6 col-xl-4 mt-1\">\r\n          <button class=\"btn btn-primary w-100\" @click=\"resetDatabase\" :disabled=\"sources.length == 0\">\r\n            <img src=\"@/assets/images/icons/misc/trash.png\" alt=\"\"/>\r\n            Delete all\r\n          </button>\r\n        </div>\r\n        <div class=\"col-12 col-md-6 col-xl-4 mt-1\">\r\n          <button class=\"btn btn-primary w-100\" @click=\"saveDatabase\" :disabled=\"sources.length == 0\">\r\n            <img src=\"@/assets/images/icons/misc/save2.png\" alt=\"\"/>\r\n            Save changes\r\n          </button>\r\n        </div>\r\n        <div class=\"col-12 col-md-6 col-xl-4 mt-1\">\r\n          <button class=\"btn btn-primary w-100\" @click=\"validateDatabase\" :disabled=\"sources.length == 0\" title=\"Check your content sources for any issues\">\r\n            <img src=\"@/assets/images/icons/misc/check.png\" alt=\"\"/>\r\n            Validate\r\n          </button>\r\n        </div>\r\n        <div class=\"col-12 col-md-6 col-xl-4 mt-1\">\r\n          <a class=\"btn btn-primary w-100\" href=\"https://github.com/bgior/weavelore/wiki/Content-FAQ\" target=\"_blank\">\r\n            <img src=\"@/assets/images/icons/misc/help.png\" alt=\"\"/>\r\n            Help\r\n          </a>\r\n        </div>\r\n      </div>\r\n      <b-modal id=\"urlloader\" title=\"Enter the URL of the file:\" @ok=\"handleURLSelect\">\r\n        <input type=\"text\" class=\"form-control\" v-model=\"urlToImport\"/>\r\n      </b-modal>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n.source {\r\n  display: flex;\r\n  background-color: #212121;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  box-shadow: 1px 1px 3px #121212;\r\n}\r\n.source-head, .sources-intro {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.source-info {\r\n  flex-grow: 1;\r\n}\r\n.source-title {\r\n  font-size: 120%;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  overflow-x: hidden;\r\n}\r\n.source-icon {\r\n  height: 48px;\r\n}\r\n.source-version {\r\n  background-color: #3d5368;\r\n  color: white;\r\n  font-size: 60% !important;\r\n  height: 16px;\r\n  margin-top: 6px;\r\n}\r\n.no-shrink {\r\n  flex-shrink: 0;\r\n}\r\n.source-amounts > img {\r\n  height: 20px;\r\n}\r\n.source-action {\r\n  filter: saturate(0);\r\n  opacity: 0.5;\r\n  cursor: pointer;\r\n  transition: filter, opacity 0.3s;\r\n}\r\n.source-action:hover, .source-action.active {\r\n  filter: saturate(1);\r\n  opacity: 1;\r\n}\r\n.sources-actions img {\r\n  height: 24px;\r\n  margin-right: 2px;\r\n}\r\n.sources-actions button:disabled img {\r\n  opacity: 0.1;\r\n}\r\n</style>\r\n<script>\r\nfunction getLines(file) {\r\n  return new Promise(function(resolve) {\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      resolve(reader.result.split(\"\\n\"));\r\n    }\r\n    reader.readAsText(file);\r\n  });\r\n}\r\nexport default {\r\n  name: 'ContentPage',\r\n  props: {\r\n    app: Object\r\n  },\r\n  data() { return {\r\n    urlToImport: 'https://',\r\n    sourceBeingEdited: null\r\n  }},\r\n  computed: {\r\n    sources() {\r\n      return this.app.contentDatabase.data.sources;\r\n    }\r\n  },\r\n  methods: {\r\n    loadSRD() {\r\n      this.urlToImport = \"/srd.json\";\r\n      this.handleURLSelect();\r\n    },\r\n    addSource() {\r\n      const newSource = {\r\n        name: \"New source\",\r\n        description: \"Edit me!\",\r\n        version: 0,\r\n        spells: [],\r\n        rules: []\r\n      };\r\n      const sources = this.app.contentDatabase.data.sources;\r\n      // If a spell named \"New spell\" already exists, append numbers until necessary\r\n      while(sources.some(src => src.name == newSource.name)) {\r\n        const number = (newSource.name.match(/ (\\d+)$/) || [])[1]; // Grab the number from the current source name\r\n        if (number) {\r\n          newSource.name = \"New source \" + (parseInt(number) + 1);\r\n        } else {\r\n          newSource.name = \"New source 2\";\r\n        }\r\n      }\r\n      this.app.contentDatabase.data.sources.push(newSource);\r\n    },\r\n    // Enable the edition controls of the given source, or disable them if the source is already being edited\r\n    toggleSourceBeingEdited(source) {\r\n      this.sourceBeingEdited = this.sourceBeingEdited == source ? null : source;\r\n    },\r\n    openFileSelector() {\r\n      this.$refs.uploader.click();\r\n    },\r\n    handleFileSelect(evt) {\r\n      for (let file of evt.target.files) {\r\n        getLines(file).then(lines => {\r\n          try {\r\n            this.app.contentDatabase.loadJSON(JSON.parse(lines.join('')));\r\n            this.app.reloadDatabase();\r\n            this.app.alert(null);\r\n          } catch (e) {\r\n            this.showError(e);\r\n          }\r\n        });\r\n      }\r\n    },\r\n    handleURLSelect() {\r\n      this.app.contentDatabase.loadURL(this.urlToImport).then(() => {\r\n        this.app.reloadDatabase();\r\n        this.app.alert(null);\r\n      }).catch(e => {\r\n        this.showError(e);\r\n      });\r\n    },\r\n    exportDatabase() {\r\n      this.download(`WeaveLoreExport-${this.app.contentDatabase.data.sources.length}c-${this.app.spells.length}s-${this.app.rules.length}r.json`, this.app.contentDatabase.export());\r\n    },\r\n    download(name, text) {\r\n      const link = this.$refs.downloadLink;\r\n      const file = new Blob([text], {type: 'application/json'});\r\n      link.href = URL.createObjectURL(file);\r\n      link.download = name;\r\n      link.click();\r\n    },\r\n    resetDatabase() {\r\n      if (confirm(\"Are you sure you want to delete all your content sources?\")) {\r\n        this.app.contentDatabase.deleteAllSources();\r\n        this.app.reloadDatabase();\r\n      }\r\n    },\r\n    deleteSource(source) {\r\n      if (source.name == \"SRD 5.1\" || (source.spells.length == 0 && source.rules.length == 0) ||\r\n        confirm(`Delete all spells and rules in source '${source.name}'?`)) {\r\n        this.app.contentDatabase.deleteSource(source);\r\n        this.app.reloadDatabase();\r\n      }\r\n    },\r\n    exportSource(source) {\r\n      this.download(source.name + '.json', this.app.contentDatabase.export(source.name));\r\n    },\r\n    saveDatabase() {\r\n      try {\r\n        this.app.contentDatabase.validate();\r\n        this.app.contentDatabase.saveToStorage();\r\n        this.app.alert(\"Content saved\", \"success\");\r\n      } catch (error) {\r\n        this.showError(error);\r\n      }\r\n    },\r\n    validateDatabase() {\r\n      try {\r\n        this.app.contentDatabase.validate();\r\n      } catch (error) {\r\n        this.showError(error);\r\n        return;\r\n      }\r\n      this.app.alert(\"All your content sources are valid.\", \"success\");\r\n    },\r\n    showError(error) {\r\n      let message;\r\n      if (error.name == \"ValidationError\") {\r\n        message = \"Validation error: \" + error.message;\r\n      } else if (typeof(error) == \"string\") {\r\n        message = error;\r\n      } else {\r\n        message = \"Sorry, an unexpected error occurred. See the console for details.\";\r\n        console.error(error.message || error);\r\n      }\r\n      this.app.alert(message);\r\n    }\r\n  },\r\n  metaInfo: {\r\n    title: \"Content - WeaveLore\",\r\n    meta: [\r\n      { vmid: \"description\", name: \"description\", content: \"Manage your WeaveLore content sources from this page.\" },\r\n      { vmid: \"robots\", name: \"robots\", content: \"noindex\" }\r\n    ]\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ContentPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ContentPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContentPage.vue?vue&type=template&id=1f88753d&\"\nimport script from \"./ContentPage.vue?vue&type=script&lang=js&\"\nexport * from \"./ContentPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContentPage.vue?vue&type=style&index=0&id=1f88753d&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('RuleSearcher',{class:_vm.panelIsOpen ? 'd-none d-md-flex' : '',attrs:{\"app\":_vm.app,\"query\":_vm.query},on:{\"navigate-rules\":_vm.navigateRules}}),_c('div',{staticClass:\"row\"},[_c('div',{class:_vm.panelIsOpen ? 'col-md-6 col-lg-4 col-xl-3 d-none d-md-block' : 'col-12'},[(_vm.queryPresent)?_c('RuleList',{attrs:{\"rules\":_vm.filteredRules,\"panelIsOpen\":_vm.panelIsOpen,\"selectedRule\":_vm.selectedRule},on:{\"rule-clicked\":_vm.openRule}}):_c('div',{staticClass:\"list-message\"},[_vm._v(\"Type anything to search\")])],1),(_vm.panelIsOpen)?_c('RuleView',{staticClass:\"col-md-6 col-lg-8 col-xl-9 scrollable-panel rule-view\",attrs:{\"app\":_vm.app,\"rule\":_vm.selectedRule},on:{\"clear-rule\":_vm.clearRule}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.rules.length > 0)?_c('div',{staticClass:\"row rules scrollable-panel\"},_vm._l((_vm.rules),function(r){return _c('div',{key:r.codename,class:`rule col-12 ${_vm.panelIsOpen ? (r.codename == _vm.selectedRule.codename ? 'selected' : '') : 'col-md-6 col-lg-4 col-xl-3'}`,on:{\"click\":function($event){return _vm.ruleClicked($event, r.codename)}}},[_c('img',{attrs:{\"src\":require(`@/assets/images/icons/rules/${r.icon}.png`),\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(r.name)+\" \")])}),0):_c('div',{staticClass:\"list-message\"},[_vm._v(\" No rules found \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"row rules scrollable-panel\" v-if=\"rules.length > 0\">\r\n      <div v-for=\"r in rules\" :key=\"r.codename\" :class=\"`rule col-12 ${panelIsOpen ? (r.codename == selectedRule.codename ? 'selected' : '') : 'col-md-6 col-lg-4 col-xl-3'}`\" @click=\"ruleClicked($event, r.codename)\">\r\n        <img :src=\"require(`@/assets/images/icons/rules/${r.icon}.png`)\" alt=\"\">\r\n        {{ r.name }}\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"list-message\">\r\n      No rules found\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Icons from '@/util/icons.js';\r\nimport constants from '@/util/constants.js';\r\n\r\nexport default {\r\n  name: 'RuleList',\r\n  props: {\r\n    app: Object,\r\n    rules: Array,\r\n    panelIsOpen: Boolean,\r\n    selectedRule: Object\r\n  },\r\n  computed: {\r\n    icons() {\r\n      return Icons;\r\n    },\r\n    classes() {\r\n      return constants.classes;\r\n    }\r\n  },\r\n  methods: {\r\n    ruleClicked(event, key) {\r\n      if (!this.selectedRule) {\r\n        const div = event.currentTarget;\r\n        setTimeout(() => div.scrollIntoView({behavior: \"smooth\", block: \"center\"}), 100);\r\n      }\r\n      this.$emit(\"rule-clicked\", key);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .rules {\r\n    padding: 3px;\r\n    font-size: 16px;\r\n    line-height: 1;\r\n    color: #eee;\r\n  }\r\n  .rule {\r\n    text-align: left;\r\n    background-color: #212020;\r\n    border: 2px solid #1b1b1b;\r\n    border-radius: 4px;\r\n    padding: 2px 6px !important;\r\n    cursor: pointer;\r\n    overflow-y: hidden;\r\n    height: 34px;\r\n    line-height: 20px;\r\n  }\r\n  .rule img {\r\n    height: 26px;\r\n    filter: brightness(0.5);\r\n  }\r\n  .rule:hover, .rule.selected {\r\n    background-color: #272727;\r\n    border-color: #212121;\r\n  }\r\n  .rule:hover img, .rule.selected img {\r\n    transform: scale(1.05);\r\n    filter: brightness(1.0);\r\n  }\r\n  @media(max-width: 767px) {\r\n    .rules { font-size: 18px; }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RuleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RuleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RuleList.vue?vue&type=template&id=3b608a5e&\"\nimport script from \"./RuleList.vue?vue&type=script&lang=js&\"\nexport * from \"./RuleList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RuleList.vue?vue&type=style&index=0&id=3b608a5e&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"col-12 query-area\"},[_c('input',{directives:[{name:\"focus\",rawName:\"v-focus\"},{name:\"model\",rawName:\"v-model\",value:(_vm.rawQueryText),expression:\"rawQueryText\"}],ref:\"queryField\",staticClass:\"form-control query\",attrs:{\"type\":\"text\",\"placeholder\":\"Search...\"},domProps:{\"value\":(_vm.rawQueryText)},on:{\"keydown\":_vm.handleQueryKeydown,\"input\":function($event){if($event.target.composing)return;_vm.rawQueryText=$event.target.value}}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"row no-gutters\">\r\n    <div class=\"col-12 query-area\">\r\n      <input type=\"text\" class=\"form-control query\" v-focus v-model=\"rawQueryText\" ref=\"queryField\" placeholder=\"Search...\" @keydown=\"handleQueryKeydown\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { debounce } from \"debounce\";\r\n\r\nexport default {\r\n  name: 'RuleSearcher',\r\n  props: {\r\n    app: Object,\r\n    query: Object\r\n  },\r\n  data() { return {\r\n    rawQueryText: ''\r\n  }},\r\n  methods: {\r\n    // Add the ability to move through the rule list by using the Up/Down arrows while focused on the query input\r\n    handleQueryKeydown(evt) {\r\n      if (evt.keyCode == 38) { // Up arrow\r\n        this.$emit('navigate-rules', 'up');\r\n        evt.preventDefault();\r\n      } else if (evt.keyCode == 40) { // Down arrow\r\n        this.$emit('navigate-rules', 'down');\r\n        evt.preventDefault();\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    rawQueryText() {\r\n      // Binding the text field directly to query.text can make the app stutter a bit because it has to re-render\r\n      // the list with each keydown event. Instead, we use a separate field called rawQueryText that updates\r\n      // query.text at a limited rate (aka debouncing).\r\n      debounce(() => {\r\n        // If the query starts with a period, it means the user wants to search in the rule description too\r\n        this.query.includeDescription = this.rawQueryText.startsWith(\".\");\r\n        // Remove the period from the query if present\r\n        this.query.text = (this.query.includeDescription ? this.rawQueryText.substring(1) : this.rawQueryText).toLowerCase();\r\n      }, 200)();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RuleSearcher.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RuleSearcher.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RuleSearcher.vue?vue&type=template&id=6792eac0&\"\nimport script from \"./RuleSearcher.vue?vue&type=script&lang=js&\"\nexport * from \"./RuleSearcher.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"rule-details\"},[_c('div',{staticClass:\"rule-head\"},[_c('img',{staticClass:\"rule-icon\",attrs:{\"src\":require(`@/assets/images/icons/rules/${_vm.rule.icon}.png`),\"alt\":\"\"}}),_c('div',{staticClass:\"rule-title\"},[_c('div',{staticClass:\"rule-name\"},[_vm._v(_vm._s(_vm.rule.name))]),_c('div',{staticClass:\"rule-category\",attrs:{\"title\":\"Category\"}},[_vm._v(_vm._s(_vm.rule.category))])]),_c('div',{staticClass:\"rule-actions\"},[_c('div',{staticClass:\"rule-close d-none d-md-block\",on:{\"click\":function($event){return _vm.$emit('clear-rule')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/close.png\"),\"alt\":\"Close\"}})])])]),_c('hr'),_c('div',{staticClass:\"rule-description\",domProps:{\"innerHTML\":_vm._s(_vm.prettyDescription)},on:{\"click\":_vm.handleDescriptionClick}}),_c('div',{staticClass:\"rule-foot\"},[_c('span',{attrs:{\"title\":\"Which book/source this rule originates from\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/spell_features/source.png\"),\"alt\":\"Source\"}}),_vm._v(\" \"+_vm._s(_vm.rule.location || _vm.rule.sourceName))]),_c('br'),(_vm.rule.tags)?_c('span',{staticClass:\"rule-tags\",attrs:{\"title\":\"Additional tags associated to this rule\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/tag.png\"),\"alt\":\"Tags\"}}),_vm._v(\" \"+_vm._s(_vm.rule.tags.join(\", \")))]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"rule-details\">\r\n    <div class=\"rule-head\">\r\n      <img :src=\"require(`@/assets/images/icons/rules/${rule.icon}.png`)\" class=\"rule-icon\" alt=\"\"/>\r\n      <div class=\"rule-title\">\r\n        <div class=\"rule-name\">{{ rule.name }}</div>\r\n        <div class=\"rule-category\" title=\"Category\">{{ rule.category }}</div>\r\n      </div>\r\n      <div class=\"rule-actions\">\r\n        <div class=\"rule-close d-none d-md-block\" @click=\"$emit('clear-rule')\">\r\n          <img src=\"@/assets/images/icons/misc/close.png\" alt=\"Close\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <hr/>\r\n    <div class=\"rule-description\" v-html=\"prettyDescription\" @click=\"handleDescriptionClick\">\r\n    </div>\r\n    <div class=\"rule-foot\">\r\n      <span title=\"Which book/source this rule originates from\"><img src=\"@/assets/images/icons/spell_features/source.png\" alt=\"Source\"/> {{ rule.location || rule.sourceName }}</span><br/>\r\n      <span class=\"rule-tags\" v-if=\"rule.tags\" title=\"Additional tags associated to this rule\"><img src=\"@/assets/images/icons/misc/tag.png\" alt=\"Tags\"/> {{ rule.tags.join(\", \") }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Icons from '@/util/icons.js';\r\nimport TextBeautifier from '@/util/textBeautifier.js';\r\n\r\nexport default {\r\n  name: 'RuleView',\r\n  props: {\r\n    app: Object,\r\n    rule: Object\r\n  },\r\n  computed: {\r\n    icons() {\r\n      return Icons;\r\n    },\r\n    prettyDescription() {\r\n      return TextBeautifier.beautify(this.rule.description);\r\n    }\r\n  },\r\n  methods: {\r\n    handleDescriptionClick(evt) {\r\n      if (evt.target.className == 'dynamic-link') { // TODO: extract this bit of logic present in 3 components to a mixin/directive\r\n        this.$router.push('/rules/' + evt.target.innerText.replace(/ /g, \"-\"));\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.rule-details {\r\n  padding-top: 10px;\r\n  text-align: left;\r\n  font-size: 16px;\r\n}\r\n.rule-details h2 {\r\n  font-size: 120%;\r\n  font-weight: bold;\r\n  border-bottom: 1px solid #333;\r\n  padding-bottom: 5px;\r\n}\r\n.rule-head {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.rule-title {\r\n  padding-left: 10px;\r\n  width: 100%;\r\n}\r\n.rule-icon {\r\n  flex-grow: 0;\r\n  height: 64px;\r\n}\r\n.rule-actions img {\r\n  width: 24px;\r\n  transition: filter 0.3s, opacity 0.3s;\r\n  opacity: 0.3;\r\n  filter: saturate(0%);\r\n  cursor: pointer;\r\n}\r\n.rule-name {\r\n  font-size: 22px;\r\n  font-weight: bold;\r\n}\r\n.rule-category {\r\n  font-size: 16px;\r\n  font-style: italic;\r\n}\r\n.rule-foot img {\r\n  height: 26px;\r\n}\r\n.rule-tags {\r\n  font-style: italic;\r\n}\r\n@media (pointer: fine) {\r\n  .rule-close:hover img {\r\n    filter: saturate(100%);\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RuleView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RuleView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RuleView.vue?vue&type=template&id=a8e1b1d0&\"\nimport script from \"./RuleView.vue?vue&type=script&lang=js&\"\nexport * from \"./RuleView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RuleView.vue?vue&type=style&index=0&id=a8e1b1d0&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div>\r\n    <RuleSearcher :app=\"app\" :class=\"panelIsOpen ? 'd-none d-md-flex' : ''\" :query=\"query\" @navigate-rules=\"navigateRules\"/>\r\n    <div class=\"row\">\r\n      <div :class=\"panelIsOpen ? 'col-md-6 col-lg-4 col-xl-3 d-none d-md-block' : 'col-12'\">\r\n        <RuleList v-if=\"queryPresent\" :rules=\"filteredRules\" :panelIsOpen=\"panelIsOpen\" :selectedRule=\"selectedRule\" @rule-clicked=\"openRule\"/>\r\n        <div v-else class=\"list-message\">Type anything to search</div>\r\n      </div>\r\n      <RuleView :app=\"app\" v-if=\"panelIsOpen\" :rule=\"selectedRule\" @clear-rule=\"clearRule\" class=\"col-md-6 col-lg-8 col-xl-9 scrollable-panel rule-view\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RuleList from './RuleList.vue';\r\nimport RuleSearcher from './RuleSearcher.vue';\r\nimport RuleView from './RuleView.vue';\r\nimport constants from '@/util/constants.js';\r\n\r\nexport default {\r\n  name: 'RulesPage',\r\n  components: {\r\n    RuleList,\r\n    RuleSearcher,\r\n    RuleView\r\n  },\r\n  props: {\r\n    app: Object,\r\n    urlRuleName: String\r\n  },\r\n  data() { return {\r\n    query: { text: '', level: \"\", class: \"\", school: \"\", includeDescription: false, favorites: false },\r\n    selectedRule: null,\r\n    detailedModeOn: false\r\n  }},\r\n  computed: {\r\n    // True if a rule's detailed view is open\r\n    panelIsOpen() {\r\n      return this.selectedRule != null;\r\n    },\r\n    // The list of rules that match the user's query\r\n    filteredRules() {\r\n      const query = this.query;\r\n      return this.app.rules.filter(rule => query.text.length >= this.app.settings.minimumQueryLength &&\r\n        (rule.downcasedName.includes(query.text) || (rule.tags && rule.tags.some(t => t.includes(query.text))) ||\r\n        (query.includeDescription && rule.description.toLowerCase().includes(query.text)))\r\n      );\r\n    },\r\n    // Returns whether the user has entered any valid query\r\n    queryPresent() {\r\n      return this.query.text.length >= this.app.settings.minimumQueryLength || this.query.class || this.query.level || this.query.school;\r\n    },\r\n    // Determines whether the user's content database contains an outdated version of the SRD database\r\n    updateAvailable() {\r\n      return this.app.contentDatabase.data.sources.some(s =>\r\n        s.name == 'SRD 5.1' && (s.version < constants.srdVersion || typeof(s.version) != \"number\")\r\n      );\r\n    }\r\n  },\r\n  methods: {\r\n    openRule(key) {\r\n      if (this.selectedRule && this.selectedRule.codename == key) { // Do nothing if the rule is already selected\r\n        return;\r\n      }\r\n      // Save the currently opened rule in the URL. This has two benefits:\r\n      // - Each rule can be directly accessed by its own URL\r\n      // - Going back in history takes us back to the rule we were before, or to the list if none. This is essential in mobile so that the back button doesn't make us leave the rules page, but return to the list.\r\n      this.$router.push('/rules/' + key);\r\n    },\r\n    clearRule() {\r\n      this.$router.push('/rules');\r\n    },\r\n    toggleDetailedView() {\r\n      this.detailedModeOn = !this.detailedModeOn;\r\n      if (this.detailedModeOn) {\r\n        this.clearRule();\r\n      }\r\n    },\r\n    loadRuleInURL() {\r\n      if (this.urlRuleName) {\r\n        this.selectedRule = this.app.rules.find(s => s.codename == this.urlRuleName);\r\n      } else {\r\n        this.selectedRule = null;\r\n      }\r\n    },\r\n    // Allow the user to navigate through the rule list using the arrow keys\r\n    navigateRules(direction) {\r\n      const indexOfTheCurrentRule = this.filteredRules.indexOf(this.selectedRule);\r\n      if (direction == 'up') {\r\n        if (indexOfTheCurrentRule > 0) {\r\n          this.openRule(this.filteredRules[indexOfTheCurrentRule - 1].codename);\r\n        }\r\n      } else {\r\n        if (indexOfTheCurrentRule < this.filteredRules.length - 1) {\r\n          this.openRule(this.filteredRules[indexOfTheCurrentRule + 1].codename);\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.loadRuleInURL();\r\n  },\r\n  watch: {\r\n    '$route': function() {\r\n      this.loadRuleInURL();\r\n    }\r\n  },\r\n  metaInfo() {\r\n    if (this.selectedRule) {\r\n      const ruleDescriptionWithoutHTML = this.selectedRule.description.replace(/<\\/?[^>]+>/g, '');\r\n      return {\r\n        title: this.selectedRule.name + \" - WeaveLore\",\r\n        meta: [\r\n          {\r\n            vmid: \"description\",\r\n            name: \"description\",\r\n            content: ruleDescriptionWithoutHTML.length > 300 ? ruleDescriptionWithoutHTML.substring(0, 300) + '...' : ruleDescriptionWithoutHTML\r\n          }\r\n        ]\r\n      }\r\n    } else {\r\n      return {\r\n        title: \"Rules - Weavelore\",\r\n        meta: [\r\n          { vmid: \"description\", name: \"description\", content: \"Browse a list of rules taken from the D&D 5e SRD (System Reference Document), or add your own rules and notes.\" }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .rules, .rule-view {\r\n    max-height: calc(100vh - 90px);\r\n  }\r\n  @media(max-width: 768px) {\r\n    .rule-view {\r\n      max-height: calc(100vh - 50px);\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RulesPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RulesPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RulesPage.vue?vue&type=template&id=03ded54e&\"\nimport script from \"./RulesPage.vue?vue&type=script&lang=js&\"\nexport * from \"./RulesPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RulesPage.vue?vue&type=style&index=0&id=03ded54e&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"text-center\"},[_c('div',{staticStyle:{\"font-size\":\"200px\"}},[_vm._v(\"?\")]),_vm._v(\" The requested page was not found. \")])\n}]\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div class=\"text-center\">\r\n    <div style=\"font-size: 200px\">?</div>\r\n    The requested page was not found.\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'NotFound',\r\n  metaInfo: {\r\n    title: \"404 - WeaveLore\",\r\n    meta: [\r\n      { vmid: \"description\", name: \"description\", content: \"The requested page was not found.\" },\r\n      { vmid: \"robots\", name: \"robots\", content: \"noindex\" }\r\n    ]\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NotFound.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NotFound.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NotFound.vue?vue&type=template&id=2e6b8df8&\"\nimport script from \"./NotFound.vue?vue&type=script&lang=js&\"\nexport * from \"./NotFound.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:`foot-alert ${_vm.type}`},[_vm._v(\" \"+_vm._s(_vm.message)+\" \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'. -->\r\n\r\n<template>\r\n  <div :class=\"`foot-alert ${type}`\">\r\n    {{ message }}\r\n  </div>\r\n</template>\r\n<style>\r\n.foot-alert {\r\n  position: fixed;\r\n  bottom: -24px;\r\n  left: 0;\r\n  width: 100%;\r\n  padding: 5px;\r\n  z-index: 100;\r\n  text-align: center;\r\n  transition: bottom 0.7s;\r\n  transition-property: bottom, background-color, border-color;\r\n  background-color: rgba(93, 93, 93, 0.78);\r\n  border-top: 2px solid rgba(142, 142, 142, 0.68);\r\n  min-height: 24px;\r\n}\r\n.foot-alert.success {\r\n  bottom: 0;\r\n  background-color: rgba(48, 86, 25, 0.78);\r\n  border-color: rgba(85, 152, 50, 0.68);\r\n}\r\n.foot-alert.error {\r\n  bottom: 0;\r\n  background-color: rgba(115, 38, 38, 0.78);\r\n  border-color: rgba(179, 66, 66, 0.68);\r\n}\r\n</style>\r\n<script>\r\nexport default {\r\n  name: \"Alert\",\r\n  data() {\r\n    return {\r\n      message: null,\r\n      type: null,\r\n      alertClearTimeout: null,\r\n    };\r\n  },\r\n  methods: {\r\n    // Display an alert message, which can be of type \"success\" or \"error\" (default),\r\n    // and will be visible for [duration] ms. If the message is null, hide the alert.\r\n    alert(message, type, duration) {\r\n      if (!message) {\r\n        this.message = null;\r\n        this.type = null;\r\n      } else {\r\n        type = type || \"error\";\r\n        if (type == \"error\") {\r\n          duration = 10000;\r\n          console.error(message);\r\n        } else {\r\n          duration = 5000;\r\n        }\r\n        clearTimeout(this.alertClearTimeout); // Cancel the clearing of a previous message, if present\r\n        this.message = message;\r\n        this.type = type;\r\n        this.alertClearTimeout = setTimeout(() => {\r\n          this.message = null;\r\n          this.type = null;\r\n        }, duration);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Alert.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Alert.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Alert.vue?vue&type=template&id=ae72eeee&\"\nimport script from \"./Alert.vue?vue&type=script&lang=js&\"\nexport * from \"./Alert.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Alert.vue?vue&type=style&index=0&id=ae72eeee&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('router-link',{staticClass:\"app-update-notice\",attrs:{\"to\":\"/updates\",\"title\":\"New version available\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/misc/upgrade.png\"),\"alt\":\"Update\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./UpdateNotice.vue?vue&type=template&id=0b4afdc7&\"\nvar script = {}\nimport style0 from \"./UpdateNotice.vue?vue&type=style&index=0&id=0b4afdc7&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'.\r\n\r\nimport constants from \"@/util/constants.js\";\r\n\r\n// This class performs diverse validations on content database JSONs.\r\nclass ContentDatabaseValidator {\r\n  // Given the JSON of an entire content database, perform all validations\r\n  static validate(json) {\r\n    this.assert(typeof json == \"object\", \"Unrecognized format.\");\r\n    this.assert(\r\n      json.format == \"WLC\",\r\n      `The format is not valid. Expected \"WLC\", got \"${json.format}\".`\r\n    );\r\n    this.assertType(json, \"formatVersion\", \"string\");\r\n    this.assertType(json, \"sources\", \"object\");\r\n    for (let source of json.sources) {\r\n      this.assertType(source, \"name\", \"string\");\r\n      this.assertType(source, \"description\", \"string\");\r\n      this.assertType(source, \"version\", \"number\");\r\n      this.assertType(source, \"spells\", \"object\");\r\n      this.assertType(source, \"rules\", \"object\");\r\n      this.assert(\r\n        source.name.length > 0 && source.name.length <= 32,\r\n        \"Source name must be between 1 and 32 characters\"\r\n      );\r\n      this.assert(\r\n        source.description.length > 0 && source.name.length <= 512,\r\n        \"Source description must be between 1 and 512 characters\"\r\n      );\r\n      this.validateSpells(source.spells);\r\n      this.validateRules(source.rules);\r\n    }\r\n  }\r\n  // Validate an array of spells\r\n  static validateSpells(spells) {\r\n    for (let spell of spells) {\r\n      this.assertType(spell, \"name\", \"string\");\r\n      this.assertType(spell, \"classes\", \"object\");\r\n      for (let klass of spell.classes) {\r\n        this.assert(\r\n          constants.classes.includes(klass),\r\n          `Class \"${klass}\" is not allowed.'`\r\n        );\r\n      }\r\n      this.assertType(spell, \"school\", \"string\");\r\n      this.assert(\r\n        constants.schools.includes(spell.school),\r\n        `School \"${spell.school}\" is not allowed.`\r\n      );\r\n      this.assert(\r\n        constants.levels.includes(spell.level),\r\n        `Level ${spell.level} is not allowed.`\r\n      );\r\n      this.assertType(spell, \"range\", \"string\");\r\n      this.assertType(spell, \"duration\", \"string\");\r\n      this.assertType(spell, \"casting\", \"string\");\r\n      this.assertType(spell, \"verbal\", \"boolean\");\r\n      this.assertType(spell, \"somatic\", \"boolean\");\r\n      this.assertType(spell, \"material\", \"number\");\r\n      this.assertType(spell, \"materials\", \"string\", false);\r\n      this.validateHTML(spell.materials);\r\n      this.assertType(spell, \"concentration\", \"boolean\");\r\n      this.assertType(spell, \"ritual\", \"boolean\");\r\n      this.assertType(spell, \"description\", \"string\");\r\n      this.validateHTML(spell.description);\r\n      this.assertType(spell, \"aoe\", \"object\", false);\r\n      this.assertType(spell, \"location\", \"string\", false);\r\n      if (spell.aoe) {\r\n        const aoe = spell.aoe;\r\n        this.assert(\r\n          [\"sphere\", \"cone\", \"cube\"].includes(aoe.type),\r\n          `Invalid AOE type: ${aoe.type}`\r\n        );\r\n        this.assertType(aoe, \"range\", \"number\", false);\r\n        if (aoe.center) {\r\n          this.assert(\r\n            [\"cell\", \"intersection\"].includes(aoe.center),\r\n            `The AOE center \"${aoe.center}\" is not valid.`\r\n          );\r\n          this.assert(\r\n            aoe.type == \"sphere\",\r\n            `The \"center\" field can only be used for spheres, not ${aoe.type}s.`\r\n          );\r\n        }\r\n      }\r\n      this.assertType(spell, \"atHigherLevel\", \"string\", false);\r\n      this.validateHTML(spell.atHigherLevel);\r\n      this.assert(\r\n        !spell.source,\r\n        'The \"source\" attribute has been replaced by \"location\". Please update your WLC file.'\r\n      );\r\n    }\r\n  }\r\n  // Validate an array of rules\r\n  static validateRules(rules) {\r\n    for (let rule of rules) {\r\n      this.assertType(rule, \"name\", \"string\");\r\n      this.assertType(rule, \"category\", \"string\");\r\n      this.assertType(rule, \"description\", \"string\");\r\n      if (rule.tags) {\r\n        const tags = rule.tags;\r\n        this.assertType(rule, \"tags\", \"object\");\r\n        for (let tag of tags) {\r\n          this.assert(\r\n            typeof tag == \"string\",\r\n            `Expected tag list to contain only strings but got a ${typeof tag}.`\r\n          );\r\n        }\r\n      }\r\n      this.assert(\r\n        [\"eye\", \"hand\", \"stars\"].includes(rule.icon),\r\n        `Invalid rule icon: ${rule.icon}`\r\n      );\r\n      this.assertType(rule, \"location\", \"string\", false);\r\n    }\r\n  }\r\n  // Assert that a condition is true by raising an exception if not\r\n  static assert(condition, message) {\r\n    if (!condition) {\r\n      throw { name: \"ValidationError\", message };\r\n    }\r\n  }\r\n  // Assert that a property of a hash has a certain type, and (unless required = false) that it's present\r\n  static assertType(hash, key, type, required = true) {\r\n    if (hash[key] == undefined || hash[key] == null) {\r\n      if (!required) return;\r\n      console.log(hash);\r\n      throw { name: \"ValidationError\", message: `Field is missing: \"${key}\".` };\r\n    }\r\n    if (typeof hash[key] != type) {\r\n      console.log(hash);\r\n      throw {\r\n        name: \"ValidationError\",\r\n        message: `Error on field \"${key}\": expected ${type} but got ${typeof hash[\r\n          key\r\n        ]}`,\r\n      };\r\n    }\r\n  }\r\n  // Validate that the HTML within a string is valid (not broken, using forbidden tags, etc.)\r\n  static validateHTML(str) {\r\n    if (!str) return;\r\n    const balances = {}; // The balance for each tag tracks how many of each were opened and closed\r\n    for (const tagName of constants.allowedTags) {\r\n      balances[tagName] = 0;\r\n    }\r\n    let tag;\r\n    while ((tag = TAG_REGEX.exec(str)) !== null) {\r\n      const match = tag[0].match(TAG_SPLIT_REGEX);\r\n      const closing = match[1] == \"/\";\r\n      const type = match[2];\r\n      this.assert(\r\n        constants.allowedTags.includes(type),\r\n        `HTML tag type not allowed: \"${type}\".`\r\n      );\r\n      balances[type] += closing ? -1 : 1;\r\n      this.assert(\r\n        balances[type] >= 0,\r\n        `HTML closing tag unmatched: \"${type}\".`\r\n      );\r\n    }\r\n\r\n    for (let tag in balances) {\r\n      if (tag != \"img\")\r\n        this.assert(\r\n          balances[tag] == 0,\r\n          `HTML opening tag unmatched: \"${tag}\".`\r\n        );\r\n    }\r\n  }\r\n}\r\nconst TAG_REGEX = /<\\/?[a-zA-Z0-9-]+(?: [^>]+)?>/g; // Matches an HTML tag\r\nconst TAG_SPLIT_REGEX = /<(\\/?)([a-zA-Z0-9-]+)(?: [^>]+)?>/; // Matches an HTML tag and captures various groups\r\nexport default ContentDatabaseValidator;\r\n","// © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'.\r\n\r\nimport Validator from \"@/util/contentDatabaseValidator.js\";\r\n\r\n// A ContentDatabase abstracts concerns like persistence and loading related to\r\n// content data (like spells and rules).\r\nclass ContentDatabase {\r\n  constructor(contentJSON, runValidations = true) {\r\n    this.data = getBlankData();\r\n    this.loadJSON(contentJSON, runValidations);\r\n  }\r\n  // Returns true if the database has at least one source\r\n  isEmpty() {\r\n    return this.data.sources.length == 0;\r\n  }\r\n  // Returns an array of all spells contained, sorted alphabetically\r\n  getSpells() {\r\n    const spells = [];\r\n    for (let source of this.data.sources) {\r\n      for (let spell of source.spells) {\r\n        spells.push(spell);\r\n      }\r\n    }\r\n    return spells.sort((a, b) => {\r\n      return a.name < b.name ? -1 : a.name > b.name ? 1 : 0;\r\n    });\r\n  }\r\n  getRules() {\r\n    const rules = [];\r\n    for (let source of this.data.sources) {\r\n      for (let rule of source.rules) {\r\n        rules.push(rule);\r\n      }\r\n    }\r\n    return rules.sort((a, b) => {\r\n      return a.name < b.name ? -1 : a.name > b.name ? 1 : 0;\r\n    });\r\n  }\r\n  // Imports a JSON object into the database and persists it\r\n  loadJSON(contentJSON, runValidations = true) {\r\n    if (!contentJSON) {\r\n      throw \"Attempted to load an empty JSON into a content database\";\r\n    }\r\n    if (runValidations) {\r\n      Validator.validate(contentJSON);\r\n    }\r\n    // Merge the sources in the JSON file with those already present. An existing\r\n    // source is replaced with one in the JSON if the new source has a higher or\r\n    // equal version number.\r\n    for (let newSource of contentJSON.sources) {\r\n      const existingSource = this.data.sources.find(\r\n        (s) => s.name == newSource.name\r\n      );\r\n      if (existingSource) {\r\n        if (existingSource.version > newSource.version) {\r\n          console.log(\r\n            `Ignoring ${newSource.name} v${newSource.version} because newer version v${existingSource.version} is loaded.`\r\n          );\r\n        } else {\r\n          // Replace the older source with the updated one\r\n          this.data.sources.splice(\r\n            this.data.sources.indexOf(existingSource),\r\n            1\r\n          );\r\n          this.addSource(newSource);\r\n        }\r\n      } else {\r\n        this.addSource(newSource);\r\n      }\r\n    }\r\n    this.saveToStorage();\r\n  }\r\n  // Fetch a JSON from a URL and then load it\r\n  loadURL(url) {\r\n    const baseURL =\r\n      process.env.NODE_ENV === \"production\" ? process.env.BASE_URL + url : url;\r\n    console.log(baseURL);\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`${baseURL}`)\r\n        .then((res) => res.json())\r\n        .then((json) => {\r\n          try {\r\n            this.loadJSON(json);\r\n            resolve();\r\n          } catch (e) {\r\n            reject(\r\n              \"Failed to import database fetched from URL, see console for details.\"\r\n            );\r\n            console.error(e);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          reject(\"Failed to fetch database from URL, see console for details.\");\r\n          console.error(error);\r\n        });\r\n    });\r\n  }\r\n  // Add a new source to the database\r\n  addSource(source) {\r\n    source.spells.forEach((s) => this.fillAutocalculatedFields(s, source.name));\r\n    source.rules.forEach((r) => this.fillAutocalculatedFields(r, source.name));\r\n    this.data.sources.push(source);\r\n  }\r\n  // Delete a source from the database\r\n  deleteSource(source) {\r\n    this.data.sources.splice(this.data.sources.indexOf(source), 1);\r\n    this.saveToStorage();\r\n  }\r\n  // Delete all sources from the database\r\n  deleteAllSources() {\r\n    this.data = getBlankData();\r\n    this.saveToStorage();\r\n  }\r\n  // Add a new spell to the database under the given source\r\n  addSpell(spell, sourceName) {\r\n    this.fillAutocalculatedFields(spell, sourceName);\r\n    const source = this.data.sources.find((s) => s.name == sourceName);\r\n    if (source) {\r\n      source.spells.push(spell);\r\n    } else {\r\n      throw \"Called ContentDatabase.addSpell with a sourceName that does not exist\";\r\n    }\r\n  }\r\n  // Delete a spell from the database\r\n  deleteSpell(spell) {\r\n    const source = this.data.sources.find((s) => s.name == spell.sourceName);\r\n    if (!source)\r\n      throw `Cannot delete spell ${spell.name} because source ${spell.sourceName} does not exist.`;\r\n    const index = source.spells.indexOf(spell);\r\n    if (index < 0)\r\n      throw `Cannot delete spell ${spell.name} because source ${spell.sourceName} does not contain it.`;\r\n    source.spells.splice(index, 1);\r\n  }\r\n  // Given a spell whose sourceName was changed, remove it from its original source and add it to the new one to reflect that change\r\n  relocateSpell(spell) {\r\n    const originalSource = this.data.sources.find((src) =>\r\n      src.spells.includes(spell)\r\n    );\r\n    if (!originalSource)\r\n      throw `Cannot delete spell ${spell.name} because no source contains it.`;\r\n    const targetSource = this.data.sources.find(\r\n      (s) => s.name == spell.sourceName\r\n    );\r\n    const index = originalSource.spells.indexOf(spell);\r\n    originalSource.spells.splice(index, 1);\r\n    targetSource.spells.push(spell);\r\n  }\r\n  // Given either a spell or a rule, set the autocalculated fields values\r\n  fillAutocalculatedFields(entity, sourceName) {\r\n    entity.sourceName = sourceName;\r\n    entity.downcasedName = entity.name.toLowerCase(); // Used to search\r\n    entity.codename = entity.downcasedName.replace(/[/ ]/g, \"-\"); // Used as an identificator for the spell (friendlier to URLs and such)\r\n  }\r\n  // Persist this database in the browser's LocalStorage\r\n  saveToStorage() {\r\n    try {\r\n      window.localStorage.content = JSON.stringify(this.data);\r\n      return true;\r\n    } catch (ex) {\r\n      throw (\r\n        \"Failed to persist content due to the following exception: \" +\r\n        ex.message\r\n      );\r\n    }\r\n  }\r\n  // Generate a JSON string that can be written into a WLC file. If a source name is given\r\n  // it exports that source only. Otherwise it exports the entire database.\r\n  export(sourceName = null) {\r\n    var clonedData = JSON.parse(JSON.stringify(this.data)); // Deep clone the database so that we can modify the copy\r\n    // If a source was specified, remove all other sources from the export\r\n    if (sourceName) {\r\n      clonedData.sources = clonedData.sources.filter(\r\n        (s) => s.name == sourceName\r\n      );\r\n    }\r\n    // Remove the autogenerated fields from each spell and rule\r\n    for (let source of clonedData.sources) {\r\n      for (let spell of source.spells) {\r\n        delete spell.downcasedName;\r\n        delete spell.codename;\r\n        delete spell.sourceName;\r\n      }\r\n      for (let rule of source.rules) {\r\n        delete rule.downcasedName;\r\n        delete rule.codename;\r\n        delete rule.sourceName;\r\n      }\r\n    }\r\n    return JSON.stringify(clonedData);\r\n  }\r\n  // Raise an exception if there's any issue with the database contents\r\n  validate() {\r\n    Validator.validate(this.data);\r\n  }\r\n  // Get the ContentDatabase persisted in LocalStorage, or if absent/invalid, a default one\r\n  static getFromStorageOrBlank() {\r\n    try {\r\n      if (window.localStorage.content) {\r\n        let contentJSON = JSON.parse(window.localStorage.content);\r\n        if (contentJSON.sources) {\r\n          // Load the previously stored local database without running validations\r\n          return new ContentDatabase(contentJSON, false);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error(\r\n        \"Couldn't load the local database, using default instead. Reason: \" +\r\n          JSON.stringify(e)\r\n      );\r\n    }\r\n    return this.getBlank();\r\n  }\r\n  // Get an empty database with no sources\r\n  static getBlank() {\r\n    return new ContentDatabase(getBlankData());\r\n  }\r\n}\r\n// Get a JSON representing a blank database\r\nfunction getBlankData() {\r\n  return {\r\n    format: \"WLC\",\r\n    formatVersion: \"0.2.0\",\r\n    sources: [],\r\n  };\r\n}\r\n\r\nexport default ContentDatabase;\r\n","// © Copyright 2019 Bruno Giorello. Released under GNU AGPLv3, see 'LICENSE.md'.\r\n\r\n// A SettingsDatabase abstracts concerns like persistence and loading related to\r\n// settings data (like config and favorites).\r\nclass SettingsDatabase {\r\n  constructor(settingsJSON) {\r\n    if (!settingsJSON) {\r\n      throw \"Attempted to initialize a settings database without data\";\r\n    }\r\n    this.data = settingsJSON;\r\n  }\r\n  getSettings() {\r\n    return this.data;\r\n  }\r\n  saveToStorage() {\r\n    try {\r\n      const convertedData = Object.assign({}, this.data); // Clone so that the original settings aren't modified\r\n      convertedData.favorites = Array.from(convertedData.favorites); // Convert the Set to Array so that it can be serialized\r\n      window.localStorage.settings = JSON.stringify(convertedData);\r\n      return true;\r\n    } catch (ex) {\r\n      throw \"Failed to persist settings due to the following exception: \" + ex.message;\r\n    }\r\n  }\r\n  deleteFromStorage() {\r\n    window.localStorage.removeItem(\"settings\");\r\n  }\r\n  // Load the user settings from local storage. If there are none, or they fail to be loaded, return default settings instead.\r\n  static getFromStorageOrDefault() {\r\n    let settingsJSON = null;\r\n    try {\r\n      settingsJSON = JSON.parse(window.localStorage.settings);\r\n    } catch (e) {}\r\n    const defaults = this.getDefaultSettings();\r\n    if (settingsJSON && typeof(settingsJSON) == \"object\") {\r\n      settingsJSON = Object.assign(defaults, settingsJSON); // Let the default settings fill any missing element in the persisted hash, in case we add settings in future versions.\r\n    } else {\r\n      settingsJSON = defaults;\r\n    }\r\n    settingsJSON.favorites = new Set(settingsJSON.favorites); // Convert the Array to Set for faster lookups\r\n    return new SettingsDatabase(settingsJSON);\r\n  }\r\n  // Get a predefined hash of default settings, different for mobile and desktop browsers\r\n  static getDefaultSettings() {\r\n    if (navigator.userAgent.includes(\"Mobile\")) {\r\n      return {\r\n        minimumQueryLength: 3,\r\n        favorites: []\r\n      }\r\n    } else {\r\n      return {\r\n        minimumQueryLength: 0,\r\n        favorites: []\r\n      }\r\n    }\r\n  }\r\n}\r\nexport default SettingsDatabase;\r\n","<template>\r\n  <div id=\"app\" class=\"mt-0\">\r\n    <Navbar :enabled=\"!awaitingInitialFetch\" />\r\n    <main class=\"container-fluid\">\r\n      <div v-if=\"awaitingInitialFetch\" class=\"text-center\">\r\n        <svg\r\n          id=\"loadingIcon\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 100 100\"\r\n        >\r\n          <g\r\n            fill=\"none\"\r\n            stroke=\"#393939\"\r\n            stroke-width=\"5\"\r\n            stroke-linecap=\"square\"\r\n            stroke-linejoin=\"bevel\"\r\n          >\r\n            <path\r\n              d=\"M92 50a42 42 0 01-41 42M8 50A42 42 0 0149 8M30 70a28 28 0 0039 0m1-40a28 28 0 00-39 0M35 50a15 15 0 0015 15m15-15a15 15 0 00-15-15M19 81l11-11M70 30l11-11M19 50h16M65 50h16\"\r\n            />\r\n          </g>\r\n        </svg>\r\n      </div>\r\n      <router-view v-else :app=\"app\"></router-view>\r\n    </main>\r\n    <Alert ref=\"alert\" />\r\n    <UpdateNotice\r\n      v-if=\"app.appUpdateAvailable && this.$route.path != '/updates'\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport VueRouter from \"vue-router\";\r\nimport Navbar from \"./components/general/Navbar.vue\";\r\nimport SpellsPage from \"./components/spells/SpellsPage.vue\";\r\nimport StatsPage from \"./components/general/StatsPage.vue\";\r\nimport SettingsPage from \"./components/general/SettingsPage.vue\";\r\nimport OGLPage from \"./components/general/OGLPage.vue\";\r\nimport TipsPage from \"./components/general/TipsPage.vue\";\r\nimport AreasPage from \"./components/general/AreasPage.vue\";\r\nimport AboutPage from \"./components/general/AboutPage.vue\";\r\nimport NewsPage from \"./components/general/NewsPage.vue\";\r\nimport UpdatesPage from \"./components/general/UpdatesPage.vue\";\r\nimport ContentPage from \"./components/general/ContentPage.vue\";\r\nimport RulesPage from \"./components/rules/RulesPage.vue\";\r\nimport NotFound from \"./components/general/NotFound.vue\";\r\nimport Alert from \"./components/general/Alert.vue\";\r\nimport UpdateNotice from \"./components/general/UpdateNotice.vue\";\r\n\r\nimport ContentDatabase from \"@/util/contentDatabase.js\";\r\nimport SettingsDatabase from \"@/util/settingsDatabase.js\";\r\nimport constants from \"@/util/constants.js\";\r\n\r\nconst timeBetweenAppUpdateChecksInMs = 1000 * 60 * 60 * 1; // 1 hour\r\nconst router = new VueRouter({\r\n  mode: \"history\",\r\n  routes: [\r\n    { path: \"/dnd5e-spellsbook\", component: SpellsPage },\r\n    { path: \"/\", component: SpellsPage },\r\n    { path: \"/spells/:urlSpellName\", component: SpellsPage, props: true },\r\n    { path: \"/spells\", redirect: \"/\" }, // This path was used in previous versions of the app, we leave this redirection to prevent 404'ing users\r\n    { path: \"/rules/:urlRuleName\", component: RulesPage, props: true },\r\n    { path: \"/rules\", component: RulesPage },\r\n    { path: \"/stats\", component: StatsPage },\r\n    { path: \"/settings\", component: SettingsPage },\r\n    { path: \"/tips\", component: TipsPage },\r\n    { path: \"/areas\", component: AreasPage },\r\n    { path: \"/about\", component: AboutPage },\r\n    { path: \"/news\", component: NewsPage },\r\n    { path: \"/content\", component: ContentPage },\r\n    { path: \"/ogl\", component: OGLPage },\r\n    { path: \"/updates\", component: UpdatesPage },\r\n    { path: \"*\", component: NotFound },\r\n  ],\r\n});\r\n\r\nexport default {\r\n  name: \"App\",\r\n  router,\r\n  components: {\r\n    Navbar,\r\n    Alert,\r\n    UpdateNotice,\r\n  },\r\n  data() {\r\n    const contentDatabase = ContentDatabase.getFromStorageOrBlank();\r\n    const settingsDatabase = SettingsDatabase.getFromStorageOrDefault();\r\n    return {\r\n      app: {\r\n        contentDatabase,\r\n        settingsDatabase,\r\n        spells: [],\r\n        rules: [],\r\n        settings: settingsDatabase.getSettings(),\r\n        appUpdateAvailable: false, // Whether an updated version of the app is awaiting activation\r\n        editionModeOn: false, // Whether we should show the spell editor instead of the normal spell view\r\n        alert: (msg, type, duration) =>\r\n          this.$refs.alert.alert(msg, type, duration), // A helper function to display messages from anywhere\r\n        reloadDatabase: function () {\r\n          // Fetch the data from the contentDatabase again into this Vue component\r\n          this.spells = this.contentDatabase.getSpells();\r\n          this.rules = this.contentDatabase.getRules();\r\n        },\r\n      },\r\n      awaitingInitialFetch: false, // If true, it means we're waiting for an AJAX request to populate the content database\r\n      alertMessage: null,\r\n      alertType: null,\r\n      lastAppUpdateCheck: new Date(),\r\n    };\r\n  },\r\n  methods: {\r\n    // Let the app know that there's a new app version available\r\n    notifyUpdate() {\r\n      this.app.appUpdateAvailable = true;\r\n    },\r\n  },\r\n  created() {\r\n    window.vueApp = this; // Share the Vue app reference here so that the Service Worker can call notifyUpdate()\r\n    if (this.app.contentDatabase.isEmpty()) {\r\n      // If the database is empty, load the default content file(s)\r\n      const defaultContentFileURLs =\r\n        process.env.VUE_APP_DEFAULT_CONTENTFILES.split(\",\");\r\n      this.awaitingInitialFetch = true;\r\n      Promise.all(\r\n        defaultContentFileURLs.map((url) =>\r\n          this.app.contentDatabase.loadURL(url)\r\n        )\r\n      ).then(() => {\r\n        this.app.reloadDatabase();\r\n        this.awaitingInitialFetch = false;\r\n      });\r\n    } else {\r\n      // If an existing database was loaded, ensure the SRD is up-to-date\r\n      if (\r\n        this.app.contentDatabase.data.sources.some(\r\n          (s) => s.name == \"SRD 5.1\" && s.version < constants.srdVersion\r\n        )\r\n      ) {\r\n        this.app.contentDatabase\r\n          .loadURL(\"/srd.json\")\r\n          .then(() => {\r\n            this.app.reloadDatabase();\r\n          })\r\n          .catch((err) => {\r\n            this.showError(err);\r\n          });\r\n      } else {\r\n        this.app.reloadDatabase();\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    $route: function () {\r\n      /* Normally the browser would check for ServiceWorker updates every time the user\r\n      navigates to a different page. But since this is a SPA, it only checks on application\r\n      startup, so on the PWA it could take days to update. To fix that, we manually check\r\n      every time the route changes. Limited to once every 1 hour since that's good enough. */\r\n      if (\r\n        new Date() - this.lastAppUpdateCheck >\r\n        timeBetweenAppUpdateChecksInMs\r\n      ) {\r\n        this.lastAppUpdateCheck = new Date();\r\n        navigator.serviceWorker.getRegistration().then((reg) => {\r\n          if (reg) {\r\n            reg.update();\r\n          }\r\n        });\r\n      }\r\n    },\r\n  },\r\n  metaInfo: {\r\n    title: \"WeaveLore\",\r\n    meta: [\r\n      {\r\n        vmid: \"description\",\r\n        name: \"description\",\r\n        content:\r\n          \"WeaveLore is a free and open-source web application to browse D&D 5e spells. It's packed with features and includes a mobile app. Try it now!\",\r\n      },\r\n      { vmid: \"robots\", name: \"robots\", content: \"all\" },\r\n    ],\r\n  },\r\n};\r\n\r\nVue.directive(\"focus\", {\r\n  inserted(el) {\r\n    el.focus();\r\n  },\r\n});\r\n</script>\r\n\r\n<style>\r\nbody {\r\n  background-color: #1b1b1b !important;\r\n}\r\n#app {\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  color: white;\r\n  background-color: #1b1b1b !important;\r\n  font-family: \"Ubuntu\", Helvetica, Arial, sans-serif !important;\r\n}\r\n@font-face {\r\n  font-family: \"Ubuntu\";\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  font-display: swap;\r\n  src: local(\"Ubuntu Regular\"), local(\"Ubuntu-Regular\"),\r\n    url(./fonts/ubuntu.woff2) format(\"woff2\");\r\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,\r\n    U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215,\r\n    U+FEFF, U+FFFD;\r\n}\r\n#loadingIcon {\r\n  width: 120px;\r\n  margin-top: 100px;\r\n  animation: spin 1s linear infinite;\r\n}\r\n@keyframes spin {\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=aa0df6da&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=aa0df6da&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport VueRouter from \"vue-router\";\nimport VueMeta from \"vue-meta\";\n\nimport BootstrapVue from \"bootstrap-vue\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\nimport \"./assets/application.css\";\n\nVue.use(BootstrapVue);\nVue.use(VueRouter);\nVue.use(VueMeta, {\n  refreshOnceOnNavigation: true,\n});\nVue.config.productionTip = false;\n\nnew Vue({\n  render: (h) => h(App),\n}).$mount(\"#app\");\n","var map = {\n\t\"./bard.png\": 3950,\n\t\"./cleric.png\": 2310,\n\t\"./druid.png\": 8662,\n\t\"./monk.png\": 135,\n\t\"./paladin.png\": 4161,\n\t\"./ranger.png\": 4237,\n\t\"./sorcerer.png\": 8519,\n\t\"./warlock.png\": 1697,\n\t\"./wizard.png\": 2415\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2452;","var map = {\n\t\"./expensive2.png\": 3233,\n\t\"./expensive3.png\": 9595,\n\t\"./material.png\": 3493,\n\t\"./somatic.png\": 8215,\n\t\"./verbal.png\": 7882\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 8321;","var map = {\n\t\"./action.png\": 5076,\n\t\"./bonus.png\": 3756,\n\t\"./longcast.png\": 7746,\n\t\"./reaction.png\": 6064\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 8842;","var map = {\n\t\"./dispelled.png\": 2399,\n\t\"./instant.png\": 6693,\n\t\"./transient.png\": 7508\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 6452;","var map = {\n\t\"./cone.png\": 7741,\n\t\"./cube.png\": 191,\n\t\"./range.png\": 1245,\n\t\"./self.png\": 2218,\n\t\"./sphere.png\": 4889,\n\t\"./touch.png\": 8460\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 7458;","var map = {\n\t\"./eye.png\": 8763,\n\t\"./hand.png\": 9195,\n\t\"./stars.png\": 821\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1078;","var map = {\n\t\"./abjuration.png\": 7017,\n\t\"./conjuration.png\": 4101,\n\t\"./divination.png\": 5565,\n\t\"./enchantment.png\": 3651,\n\t\"./evocation.png\": 5717,\n\t\"./illusion.png\": 648,\n\t\"./necromancy.png\": 8005,\n\t\"./transmutation.png\": 4525\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 3444;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/dnd5e-spellsbook/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdnd5e_spellsbook\"] = self[\"webpackChunkdnd5e_spellsbook\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(6554); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","awaitingInitialFetch","app","ref","appUpdateAvailable","$route","path","_e","staticRenderFns","staticStyle","require","_v","enabled","name","props","Boolean","component","class","panelIsOpen","query","selectedSpell","detailedModeOn","on","toggleDetailedView","navigateSpells","s","queryPresent","filteredSpells","openSpell","editionModeOn","clearSpell","spells","length","_l","key","codename","$event","spellClicked","classes","c","includes","icons","classIcon","verbal","somatic","material","aoe","aoeIcon","rangeIcon","durationIcon","concentration","castingIcon","ritual","atHigherLevel","settings","favorites","has","_s","level","schoolIcon","Icons","className","classIcons","spell","map","school","instantaneous","duration","toLowerCase","cube","sphere","cone","type","range","casting","componentIcons","push","appVersion","srdVersion","levels","schools","allowedTags","Object","Array","computed","constants","methods","event","div","currentTarget","setTimeout","scrollIntoView","behavior","block","$emit","directives","rawName","value","rawQueryText","expression","domProps","handleQueryKeydown","target","composing","clearQuery","classOptions","model","callback","$$v","$set","levelOptions","schoolOptions","sourceOptions","sourceName","close","open","selectedOption","image","text","align","options","option","choose","String","Number","data","find","o","mixins","clickaway","addNewSpell","deleteSpell","disabled","validateAndSave","active","newSpellTemplate","materials","description","contentDatabase","validate","saveToStorage","error","message","alert","newSpell","assign","defaultSource","sources","version","rules","some","number","match","parseInt","addSpell","reloadDatabase","confirm","concat","n","toString","materialOptions","aoeOptions","a","centerOptions","components","SpellEditionControls","CustomSelect","spellOptions","$refs","queryField","focus","evt","keyCode","preventDefault","watch","debounce","includeDescription","startsWith","substring","helpFor","prettyLevel","favorited","favoriteSpell","icon","location","prettyDescription","handleDescriptionClick","prettyHigherLevel","numericRange","prettyMaterials","helpTopic","topic","slot","$bvModal","hide","width","height","Geometry","pointIsWithinTriangle","px","py","ax","ay","bx","by","cx","cy","as_x","as_y","s_ab","findCircleLineIntersections","radius","baX","baY","caX","caY","bBy2","pBy2","q","disc","tmpSqrt","Math","sqrt","abScalingFactor1","abScalingFactor2","p1","x","y","segmentIntersectsCircle","intersections","p","min","max","cellSize","margin","fade","feetPerCell","circleRadius","pixelsPerFoot","pixelsPerCell","minRange","maxRange","maxAOERadius","coneAmplitude","atan","coneSideLengthMultiplier","defaultRange","overrideRange","undefined","cols","rows","getOptimalRowAmount","getOptimalColAmount","isCenteredInIntersection","center","mounted","draw","updated","angle","canvas","document","getElementById","ctx","getContext","font","clearRect","setLineDash","positionCaster","positionTarget","drawGrid","drawAOE","drawCaster","drawTarget","lineWidth","strokeStyle","rowCount","colCount","maxX","maxY","rowNumber","beginPath","moveTo","lineTo","stroke","colNumber","forEach","grd","createLinearGradient","addColorStop","fillStyle","fillRect","caster","ceil","angleInDegrees","PI","tan","edge","radiusInPixels","arc","textOffsetY","fillText","offset","pow","rect","halfEdge","angle1","angle2","origin","coneSideLengthPixels","end1","cos","sin","end2","minX","minY","floor","baseCols","TextBeautifier","colorize","sub","substitutions","replace","addDieAverages","styleTables","addRuleLinks","rulesRegex","beautify","HelpModal","Diagram","pretty","show","delete","add","$forceUpdate","settingsDatabase","$router","innerText","_n","klass","toggleClass","_m","chosenAoeType","chosenAoeSize","modifiers","checked","aoeSizeMap","Toggler","filter","toggleSpellAoE","size","loadAoeFields","downcasedName","relocateSpell","created","SpellList","SpellsToolbar","SpellView","SpellEditor","urlSpellName","minimumQueryLength","loadSpellInURL","direction","indexOfTheCurrentSpell","indexOf","metaInfo","spellDescriptionWithoutHTML","title","meta","vmid","content","stats","abjuration","conjuration","divination","enchantment","evocation","illusion","necromancy","transmutation","bard","cleric","druid","paladin","ranger","sorcerer","warlock","wizard","setDirty","dirty","beforeDestroy","licenseText","fetch","then","res","catch","console","angleDegrees","angleRadians","style","backgroundImage","news","item","prettyDate","date","months","dateString","Date","getUTCMonth","getUTCDate","json","applyingNewVersion","updateNow","navigator","serviceWorker","getRegistration","reg","waiting","postMessage","window","reload","e","source","sourceBeingEdited","exportSource","toggleSourceBeingEdited","deleteSource","openFileSelector","handleFileSelect","exportDatabase","loadSRD","addSource","resetDatabase","saveDatabase","validateDatabase","handleURLSelect","urlToImport","getLines","file","Promise","resolve","reader","FileReader","onload","result","split","readAsText","newSource","src","uploader","click","files","lines","loadJSON","JSON","parse","join","showError","loadURL","download","export","link","downloadLink","Blob","href","URL","createObjectURL","deleteAllSources","navigateRules","filteredRules","selectedRule","openRule","clearRule","r","ruleClicked","rule","category","tags","RuleList","RuleSearcher","RuleView","urlRuleName","t","updateAvailable","loadRuleInURL","indexOfTheCurrentRule","ruleDescriptionWithoutHTML","alertClearTimeout","clearTimeout","script","ContentDatabaseValidator","assert","format","assertType","validateSpells","validateRules","validateHTML","tag","condition","hash","required","log","str","balances","tagName","TAG_REGEX","exec","TAG_SPLIT_REGEX","closing","ContentDatabase","constructor","contentJSON","runValidations","getBlankData","isEmpty","getSpells","sort","b","getRules","Validator","existingSource","splice","url","baseURL","process","reject","fillAutocalculatedFields","index","originalSource","targetSource","entity","localStorage","stringify","ex","clonedData","getFromStorageOrBlank","getBlank","formatVersion","SettingsDatabase","settingsJSON","getSettings","convertedData","from","deleteFromStorage","removeItem","getFromStorageOrDefault","defaults","getDefaultSettings","Set","userAgent","timeBetweenAppUpdateChecksInMs","router","VueRouter","mode","routes","SpellsPage","redirect","RulesPage","StatsPage","SettingsPage","TipsPage","AreasPage","AboutPage","NewsPage","ContentPage","OGLPage","UpdatesPage","NotFound","Navbar","Alert","UpdateNotice","msg","alertMessage","alertType","lastAppUpdateCheck","notifyUpdate","vueApp","defaultContentFileURLs","all","err","update","Vue","directive","inserted","el","use","BootstrapVue","VueMeta","refreshOnceOnNavigation","config","productionTip","h","App","$mount","webpackContext","req","id","webpackContextResolve","__webpack_require__","Error","code","keys","module","exports","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","getter","__esModule","d","definition","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}